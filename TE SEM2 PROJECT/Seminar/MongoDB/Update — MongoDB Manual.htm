<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <title>Update — MongoDB Manual</title>

    <link rel="shortcut icon" href="http://media.mongodb.org/favicon.ico">
    <meta name="robots" content="index">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="canonical" href="http://docs.mongodb.org/manual/applications/update">

    
    
    <link rel="stylesheet" href="Update%20%E2%80%94%20MongoDB%20Manual_files/mongodb-docs.css" type="text/css">
    <link rel="stylesheet" href="Update%20%E2%80%94%20MongoDB%20Manual_files/pygments.css" type="text/css">
      
    <script id="undefined" src="Update%20%E2%80%94%20MongoDB%20Manual_files/inpage_linkid.js" async="" type="text/javascript"></script><script src="Update%20%E2%80%94%20MongoDB%20Manual_files/ga.js" async="" type="text/javascript"></script><script src="Update%20%E2%80%94%20MongoDB%20Manual_files/cse.js" async="" type="text/javascript"></script><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="Update%20%E2%80%94%20MongoDB%20Manual_files/jquery.js"></script>
    <script type="text/javascript" src="Update%20%E2%80%94%20MongoDB%20Manual_files/underscore.js"></script>
    <script type="text/javascript" src="Update%20%E2%80%94%20MongoDB%20Manual_files/doctools.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="http://docs.mongodb.org/osd.xml" title="MongoDB Help">
<link rel="author" title="About these documents" href="http://docs.mongodb.org/manual/about/">
<link rel="top" title="MongoDB Manual" href="http://docs.mongodb.org/manual/">
<link rel="up" title="Core MongoDB Operations (CRUD)" href="http://docs.mongodb.org/manual/crud/">
<link rel="next" title="Delete" href="http://docs.mongodb.org/manual/applications/delete/">
<link rel="prev" title="Read" href="http://docs.mongodb.org/manual/applications/read/">
<!-- Put the following javascript before the closing </head> tag. -->
<script>
  (function() {
    var cx = '017213726194841070573:WMX6838984';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>
  <script type="text/javascript" src="Update%20%E2%80%94%20MongoDB%20Manual_files/jsapi"></script><link rel="stylesheet" href="Update%20%E2%80%94%20MongoDB%20Manual_files/defaulten.css" type="text/css"><link rel="stylesheet" href="Update%20%E2%80%94%20MongoDB%20Manual_files/default.css" type="text/css"><script src="Update%20%E2%80%94%20MongoDB%20Manual_files/defaulten.js" type="text/javascript"></script><script src="Update%20%E2%80%94%20MongoDB%20Manual_files/search.js" type="text/javascript"></script><style type="text/css">
.gsc-control-cse {
font-family: Arial, sans-serif;
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-control-cse .gsc-table-result {
font-family: Arial, sans-serif;
}
input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
border-color: #D9D9D9;
}
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
border-color: #5AAC41;
background-color: #5AAC41;
background-image: none;
filter: none;
}
.gsc-tabHeader.gsc-tabhInactive {
border-color: #CCCCCC;
background-color: #FFFFFF;
}
.gsc-tabHeader.gsc-tabhActive {
border-color: #CCCCCC;
border-bottom-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-tabsArea {
border-color: #CCCCCC;
}
.gsc-webResult.gsc-result,
.gsc-results .gsc-imageResult {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-webResult.gsc-result:hover,
.gsc-imageResult:hover {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gs-webResult.gs-result a.gs-title:link,
.gs-webResult.gs-result a.gs-title:link b,
.gs-imageResult a.gs-title:link,
.gs-imageResult a.gs-title:link b {
color: #1155CC;
}
.gs-webResult.gs-result a.gs-title:visited,
.gs-webResult.gs-result a.gs-title:visited b,
.gs-imageResult a.gs-title:visited,
.gs-imageResult a.gs-title:visited b {
color: #1155CC;
}
.gs-webResult.gs-result a.gs-title:hover,
.gs-webResult.gs-result a.gs-title:hover b,
.gs-imageResult a.gs-title:hover,
.gs-imageResult a.gs-title:hover b {
color: #1155CC;
}
.gs-webResult.gs-result a.gs-title:active,
.gs-webResult.gs-result a.gs-title:active b,
.gs-imageResult a.gs-title:active,
.gs-imageResult a.gs-title:active b {
color: #1155CC;
}
.gsc-cursor-page {
color: #1155CC;
}
a.gsc-trailing-more-results:link {
color: #1155CC;
}
.gs-webResult .gs-snippet,
.gs-imageResult .gs-snippet,
.gs-fileFormatType {
color: #333333;
}
.gs-webResult div.gs-visibleUrl,
.gs-imageResult div.gs-visibleUrl {
color: #009933;
}
.gs-webResult div.gs-visibleUrl-short {
color: #009933;
}
.gs-webResult div.gs-visibleUrl-short {
display: none;
}
.gs-webResult div.gs-visibleUrl-long {
display: block;
}
.gs-promotion div.gs-visibleUrl-short {
display: none;
}
.gs-promotion div.gs-visibleUrl-long {
display: block;
}
.gsc-cursor-box {
border-color: #FFFFFF;
}
.gsc-results .gsc-cursor-box .gsc-cursor-page {
border-color: #CCCCCC;
background-color: #FFFFFF;
color: #1155CC;
}
.gsc-results .gsc-cursor-box .gsc-cursor-current-page {
border-color: #CCCCCC;
background-color: #FFFFFF;
color: #1155CC;
}
.gsc-webResult.gsc-result.gsc-promotion {
border-color: #F6F6F6;
background-color: #F6F6F6;
}
.gsc-completion-title {
color: #1155CC;
}
.gsc-completion-snippet {
color: #333333;
}
.gs-promotion a.gs-title:link,
.gs-promotion a.gs-title:link *,
.gs-promotion .gs-snippet a:link {
color: #1155CC;
}
.gs-promotion a.gs-title:visited,
.gs-promotion a.gs-title:visited *,
.gs-promotion .gs-snippet a:visited {
color: #1155CC;
}
.gs-promotion a.gs-title:hover,
.gs-promotion a.gs-title:hover *,
.gs-promotion .gs-snippet a:hover {
color: #1155CC;
}
.gs-promotion a.gs-title:active,
.gs-promotion a.gs-title:active *,
.gs-promotion .gs-snippet a:active {
color: #1155CC;
}
.gs-promotion .gs-snippet,
.gs-promotion .gs-title .gs-promotion-title-right,
.gs-promotion .gs-title .gs-promotion-title-right * {
color: #333333;
}
.gs-promotion .gs-visibleUrl,
.gs-promotion .gs-visibleUrl-short {
color: #009933;
}
.gsc-input input.gsc-input {
background: none repeat scroll 0% 0% white !important;
}
</style><style type="text/css">.gsfe_a{border:1px solid #b9b9b9;border-top-color:#a0a0a0;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);}.gsfe_b{border:1px solid #4d90fe;outline:none;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);}.gssb_c{border:0;position:absolute;z-index:989}.gssb_e{border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);cursor:default}.gssb_f{visibility:hidden;white-space:nowrap}.gssb_k{border:0;display:block;position:absolute;top:0;z-index:988}.gsdd_a{border:none!important}.gsib_a{width:100%;padding:4px 6px 0}.gsib_a,.gsib_b{vertical-align:top}.gssb_a{padding:0 7px}.gssb_a,.gssb_a td{white-space:nowrap;overflow:hidden;line-height:22px}#gssb_b{font-size:11px;color:#36c;text-decoration:none}#gssb_b:hover{font-size:11px;color:#36c;text-decoration:underline}.gssb_g{text-align:center;padding:8px 0 7px;position:relative}.gssb_h{font-size:15px;height:28px;margin:0.2em}.gssb_i{background:#eee}.gss_ifl{visibility:hidden;padding-left:5px}.gssb_i .gss_ifl{visibility:visible}a.gssb_j{font-size:13px;color:#36c;text-decoration:none;line-height:100%}a.gssb_j:hover{text-decoration:underline}.gssb_l{height:1px;background-color:#e5e5e5}.gssb_m{color:#000;background:#fff}.gscsep_a{display:none}.gsq_a{padding:0}.gscb_a{display:inline-block;font:27px/13px arial,sans-serif}.gsst_a .gscb_a{color:#a1b9ed;cursor:pointer}.gsst_a:hover .gscb_a,.gsst_a:focus .gscb_a{color:#36c}.gsst_a{display:inline-block}.gsst_a{cursor:pointer;padding:0 4px}.gsst_a:hover{text-decoration:none!important}.gsst_b{font-size:16px;padding:0 2px;user-select:none;-moz-user-select:none;white-space:nowrap}.gsst_e{opacity:0.55;}.gsst_a:hover .gsst_e,.gsst_a:focus .gsst_e{opacity:0.72;}.gsst_a:active .gsst_e{opacity:1;}.gsst_f{background:white;text-align:left}.gsst_g{background-color:white;border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);margin:-1px -3px;padding:0 6px}.gsst_h{background-color:white;height:1px;margin-bottom:-1px;position:relative;top:-1px}.gssb_a{padding:0 9px}.gsib_a{padding-right:8px;padding-left:8px}.gsst_a{padding-top:3px}.gssb_e{border:0}.gssb_l{margin:5px 0}.gssb_c .gsc-completion-container{position:static}.gssb_c{z-index:5000}.gsc-completion-container table{background:transparent;font-size:inherit;font-family:inherit}.gssb_c > tbody > tr,.gssb_c > tbody > tr > td,.gssb_d,.gssb_d > tbody > tr,.gssb_d > tbody > tr > td,.gssb_e,.gssb_e > tbody > tr,.gssb_e > tbody > tr > td{padding:0;margin:0;border:0}.gssb_a table,.gssb_a table tr,.gssb_a table tr td{padding:0;margin:0;border:0}</style><style type="text/css">.atlwdg-blanket {background:#000;height:100%;left:0;opacity:.5;position:fixed;top:0;width:100%;z-index:1000000;}
.atlwdg-popup {background:#fff;border:1px solid #666;position:fixed;top:50%;left:50%;z-index:10000011;}
.atlwdg-popup.atlwdg-box-shadow {-moz-box-shadow:10px 10px 20px rgba(0,0,0,0.5);-webkit-box-shadow:10px 10px 20px rgba(0,0,0,0.5);box-shadow:10px 10px 20px rgba(0,0,0,0.5);background-color:#fff;}
.atlwdg-hidden {display:none;}
.atlwdg-trigger {position: fixed; background: #013466; padding: 5px;border: 2px solid white;border-top: none; font-weight: bold; color: white; display:block;white-space:nowrap;text-decoration:none; font-family:arial, FreeSans, Helvetica, sans-serif;font-size:12px;box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);-webkit-box-shadow:5px 5px 10px rgba(0, 0, 0, 0.5); -moz-box-shadow:5px 5px 10px rgba(0, 0, 0, 0.5);border-radius: 0 0 5px 5px; -moz-border-radius: 0 0 5px 5px;}
a.atlwdg-trigger {text-decoration:none;}
.atlwdg-trigger.atlwdg-TOP {left: 45%;top:0; }
.atlwdg-trigger.atlwdg-RIGHT {left:100%; top:40%; -webkit-transform-origin:top left; -webkit-transform: rotate(90deg); -moz-transform: rotate(90deg); -moz-transform-origin:top left;-ms-transform: rotate(90deg); -ms-transform-origin:top left; }
.atlwdg-trigger.atlwdg-SUBTLE { right:0; bottom:0; border: 1px solid #ccc; border-bottom: none; border-right: none; background-color: #f5f5f5; color: #444; font-size: 11px; padding: 6px; box-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5); border-radius: 2px 0 0 0; }
.atlwdg-loading {position:absolute;top:220px;left:295px;}</style></head>
  <body>
<div id="top-right">
        <div class="user-right">
                <ul id="header-menu-bar" class="ajs-menu-bar">
                <li class="normal"><a target="_blank" href="http://groups.google.com/group/mongodb-user">Forums</a></li>
                <li class="normal"><a target="_blank" href="http://blog.mongodb.org/">Blog</a></li>
                <li class="normal"><a href="http://www.mongodb.org/downloads">Download</a></li>
                <li class="normal"><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers</a></li>
                <li class="normal"><a href="http://www.10gen.com/events">Events</a></li>
                <li class="normal last"><a class="last" href="http://docs.mongodb.org/manual/meta/translation">Translations</a></li>
                </ul>
        </div>
</div>
<div id="header-db" class="spread">
        <div class="split">
                <div id="logo">
                        <div><a href="http://docs.mongodb.org/manual/"><img class="logo" src="Update%20%E2%80%94%20MongoDB%20Manual_files/logo-mongodb.png" alt="MongoDB Logo"></a></div>
                </div>
        </div>

<div class="search-db"><div dir="ltr" id="___gcse_0"><form accept-charset="utf-8" class="gsc-search-box gsc-search-box-tools"><table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-input"><div id="gsc-iw-id1" class="gsc-input-box"><table class="gstl_0 " id="gs_id0" style="width: 100%; padding: 0px;" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsib_a" id="gs_tti0"><input spellcheck="false" dir="ltr" id="gsc-i-id1" style="width: 100%; padding: 0px; border: medium none; margin: 0px; height: auto; outline: medium none;" title="search" name="search" class="gsc-input" size="10" autocomplete="off" type="text"></td><td class="gsib_b"><div dir="ltr" id="gs_st0" class="gsst_b"><a style="display: none;" href="javascript:void(0)" class="gsst_a"><span id="gs_cb0" class="gscb_a">×</span></a></div></td></tr></tbody></table></div></td><td class="gsc-search-button"><input title="search" class="gsc-search-button gsc-search-button-v2" src="Update%20%E2%80%94%20MongoDB%20Manual_files/search_box_icon.png" type="image"></td><td class="gsc-clear-button"><div title="clear results" class="gsc-clear-button">&nbsp;</div></td></tr></tbody></table><table class="gsc-branding" cellpadding="0" cellspacing="0"><tbody><tr style="display: none;"><td class="gsc-branding-user-defined"></td><td class="gsc-branding-text"><div class="gsc-branding-text">powered by</div></td><td class="gsc-branding-img"><img class="gsc-branding-img" src="Update%20%E2%80%94%20MongoDB%20Manual_files/small-logo.png"></td></tr></tbody></table></form></div></div>
<div id="etp">
<ul>
<li><a href="https://github.com/mongodb/docs/blob/master/source/applications/update.txt" target="_blank" title="Edit applications/update.txt on github">Edit this Page</a></li>
<li><a href="http://github.com/mongodb/docs" target="_blank" title="Fork the documentation on GitHub and contribute.">GitHub</a></li>
<li><a href="https://jira.mongodb.org/secure/CreateIssueDetails%21init.jspa?pid=10380&amp;issuetype=4&amp;priority=4&amp;summary=Comment+on%3a+%22applications/update%2Etxt%22" target="_blank" title="Report a problem with applications/update.txt on Jira">Report a problem</a></li>
</ul>
</div>
</div>  
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            <div id="cse-results"><div id="___gcse_1"><div class="gsc-control-cse gsc-control-cse-en"><div dir="ltr" class="gsc-control-wrapper-cse"><div class="gsc-results-wrapper-nooverlay"><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">Custom Search</div><span class="gs-spacer"> </span></div><div class="gsc-tabsAreaInvisible"></div><div class="gsc-above-wrapper-area-invisible"><table class="gsc-above-wrapper-area-container" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td></tr></tbody></table></div><div class="gsc-adBlockInvisible"></div><div class="gsc-wrapper"><div class="gsc-adBlockInvisible"></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table class="gsc-resultsHeader" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">Web</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-all-results-active"><div title="show one result" class="gsc-result-selector gsc-one-result">&nbsp;</div><div title="show more results" class="gsc-result-selector gsc-more-results">&nbsp;</div><div title="show all results" class="gsc-result-selector gsc-all-results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div></div></div></div></div>
            
  <div class="section" id="update">
<h1>Update<a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h1>
<p>Of the four basic database operations (i.e. CRUD), <em>update</em> operations
are those that modify existing records or <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-document"><em class="xref std std-term">documents</em></a>
in a MongoDB <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-collection"><em class="xref std std-term">collection</em></a>. For general information about write
operations and the factors that affect their performance, see
<a class="reference internal" href="http://docs.mongodb.org/manual/core/write-operations/"><em>Write Operations</em></a>; for documentation of other CRUD
operations, see the <a class="reference internal" href="http://docs.mongodb.org/manual/crud/"><em>Core MongoDB Operations (CRUD)</em></a> page.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Update operation modifies an existing <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-document"><em class="xref std std-term">document</em></a> or
documents in a <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-collection"><em class="xref std std-term">collection</em></a>. MongoDB provides the following
methods to perform update operations:</p>
<ul class="simple">
<li><a class="reference internal" href="#crud-update-update"><em>update</em></a></li>
<li><a class="reference internal" href="#crud-update-save"><em>save</em></a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Consider the following behaviors of MongoDB’s update
operations.</p>
<ul class="last">
<li><p class="first">When performing update operations that increase the document size
beyond the allocated space for that document, the update operation
relocates the document on disk and may reorder the document fields
depending on the type of update.</p>
</li>
<li><p class="first">As of these <a class="reference internal" href="http://docs.mongodb.org/manual/release-notes/drivers-write-concern/#write-concern-change-releases"><em>driver versions</em></a>, all
write operations will issue a <a class="reference internal" href="http://docs.mongodb.org/manual/reference/command/getLastError/#getLastError" title="getLastError"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLastError</span></tt></a> command to
confirm the result of the write operation:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">getLastError</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<p>Refer to the documentation on <a class="reference internal" href="http://docs.mongodb.org/manual/core/write-operations/#write-operations-write-concern"><em>write concern</em></a> in the <a class="reference internal" href="http://docs.mongodb.org/manual/core/write-operations/"><em>Write Operations</em></a>
document for more information.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="crud-update-update">
<span id="id1"></span><h2>Update<a class="headerlink" href="#crud-update-update" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method is the primary
method used to modify documents in a MongoDB collection. By default,
the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method updates a
<strong>single</strong> document, but by using the <tt class="docutils literal"><span class="pre">multi</span></tt> option,
<a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> can update all documents
that match the query criteria in the collection. The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method can either replace the existing
document with the new document or update specific fields in the
existing document.</p>
<p>The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> has the following
syntax:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">query</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">update</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">options</span><span class="o">&gt;</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition-corresponding-operation-in-sql admonition">
<p class="first admonition-title">Corresponding operation in SQL</p>
<p>The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method corresponds
to the <tt class="docutils literal"><span class="pre">UPDATE</span></tt> operation in SQL, and:</p>
<ul class="simple">
<li>the <tt class="docutils literal"><span class="pre">&lt;query&gt;</span></tt> argument corresponds to the <tt class="docutils literal"><span class="pre">WHERE</span></tt> statement,
and</li>
<li>the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> corresponds to the <tt class="docutils literal"><span class="pre">SET</span> <span class="pre">...</span></tt> statement.</li>
</ul>
<p class="last">The default behavior of the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method updates a <strong>single</strong> document and
would correspond to the SQL <tt class="docutils literal"><span class="pre">UPDATE</span></tt> statement with the <tt class="docutils literal"><span class="pre">LIMIT</span>
<span class="pre">1</span></tt>. With the <tt class="docutils literal"><span class="pre">multi</span></tt> option, <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method would correspond to the SQL
<tt class="docutils literal"><span class="pre">UPDATE</span></tt> statement without the <tt class="docutils literal"><span class="pre">LIMIT</span></tt> clause.</p>
</div>
<p>Consider the following examples that illustrate the use of the
<a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method:</p>
<ul>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument contains only <a class="reference internal" href="http://docs.mongodb.org/manual/reference/operators/#update-operators"><em>update operator</em></a> expressions such as the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/set/#_S_set" title="$set"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$set</span></tt></a> operator
expression, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method
updates the corresponding fields in the document. To update fields in
subdocuments, MongoDB uses <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-dot-notation"><em class="xref std std-term">dot notation</em></a>.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for the first
document that has an <tt class="docutils literal"><span class="pre">_id</span></tt> field equal to <tt class="docutils literal"><span class="pre">1</span></tt> and sets the field
named <tt class="docutils literal"><span class="pre">middle</span></tt> to the value <tt class="docutils literal"><span class="pre">Warner</span></tt> in the <tt class="docutils literal"><span class="pre">name</span></tt> subdocument
and adds a new element to the <tt class="docutils literal"><span class="pre">awards</span></tt> field:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span>
   <span class="p">{</span>
     <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'name.middle'</span><span class="o">:</span> <span class="s1">'Warner'</span> <span class="p">},</span>
     <span class="nx">$push</span><span class="o">:</span> <span class="p">{</span> <span class="nx">awards</span><span class="o">:</span> <span class="p">{</span> <span class="nx">award</span><span class="o">:</span> <span class="s1">'IBM Fellow'</span><span class="p">,</span> <span class="nx">year</span><span class="o">:</span> <span class="mi">1963</span><span class="p">,</span> <span class="nx">by</span><span class="o">:</span> <span class="s1">'IBM'</span> <span class="p">}</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument contains <a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/unset/#_S_unset" title="$unset"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$unset</span></tt></a> operator, the
<a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method removes the field
from the document.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for the
first document that has an <tt class="docutils literal"><span class="pre">_id</span></tt> field equal to <tt class="docutils literal"><span class="pre">3</span></tt> and removes
the <tt class="docutils literal"><span class="pre">birth</span></tt> field from the document:</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">$unset</span><span class="o">:</span> <span class="p">{</span> <span class="nx">birth</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument contains fields not currently in the
document, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method
adds the new fields to the document.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for the
first document that has an <tt class="docutils literal"><span class="pre">_id</span></tt> field equal to <tt class="docutils literal"><span class="pre">3</span></tt> and adds to
the document a new <tt class="docutils literal"><span class="pre">mbranch</span></tt> field and a new <tt class="docutils literal"><span class="pre">aka</span></tt> field in the
subdocument <tt class="docutils literal"><span class="pre">name</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span>
             <span class="nx">mbranch</span><span class="o">:</span> <span class="s1">'Navy'</span><span class="p">,</span>
             <span class="s1">'name.aka'</span><span class="o">:</span> <span class="s1">'Amazing Grace'</span>
           <span class="p">}</span>
   <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument contains only field and value pairs, the
<a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method <em>replaces</em> the
existing document with the document in the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument,
except for the <tt class="docutils literal"><span class="pre">_id</span></tt> field.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for the
first document that has a <tt class="docutils literal"><span class="pre">name</span></tt> field equal to <tt class="docutils literal"><span class="pre">{</span> <span class="pre">first:</span> <span class="pre">'John',</span>
<span class="pre">last:</span> <span class="pre">'McCarthy'</span> <span class="pre">}</span></tt> and replaces all but the <tt class="docutils literal"><span class="pre">_id</span></tt> field in the
document with the fields in the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">'John'</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">'McCarthy'</span> <span class="p">}</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">'Ken'</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">'Iverson'</span> <span class="p">},</span>
     <span class="nx">born</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">'Dec 17, 1941'</span><span class="p">),</span>
     <span class="nx">died</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">'Oct 19, 2004'</span><span class="p">),</span>
     <span class="nx">contribs</span><span class="o">:</span> <span class="p">[</span> <span class="s1">'APL'</span><span class="p">,</span> <span class="s1">'J'</span> <span class="p">],</span>
     <span class="nx">awards</span><span class="o">:</span> <span class="p">[</span>
               <span class="p">{</span> <span class="nx">award</span><span class="o">:</span> <span class="s1">'Turing Award'</span><span class="p">,</span>
                 <span class="nx">year</span><span class="o">:</span> <span class="mi">1979</span><span class="p">,</span>
                 <span class="nx">by</span><span class="o">:</span> <span class="s1">'ACM'</span> <span class="p">},</span>
               <span class="p">{</span> <span class="nx">award</span><span class="o">:</span> <span class="s1">'Harry H. Goode Memorial Award'</span><span class="p">,</span>
                 <span class="nx">year</span><span class="o">:</span> <span class="mi">1975</span><span class="p">,</span>
                 <span class="nx">by</span><span class="o">:</span> <span class="s1">'IEEE Computer Society'</span> <span class="p">},</span>
               <span class="p">{</span> <span class="nx">award</span><span class="o">:</span> <span class="s1">'IBM Fellow'</span><span class="p">,</span>
                 <span class="nx">year</span><span class="o">:</span> <span class="mi">1970</span><span class="p">,</span>
                 <span class="nx">by</span><span class="o">:</span> <span class="s1">'IBM'</span> <span class="p">}</span>
     <span class="p">]</span>
   <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If the update operation requires an update of an element in an array
field:</p>
<ul>
<li><p class="first">The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method can perform
the update using the position of the element and
<a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-dot-notation"><em class="xref std std-term">dot notation</em></a>. Arrays in MongoDB are zero-based.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for
the first document with <tt class="docutils literal"><span class="pre">_id</span></tt> field equal to <tt class="docutils literal"><span class="pre">1</span></tt> and updates the
second element in the <tt class="docutils literal"><span class="pre">contribs</span></tt> array:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'contribs.1'</span><span class="o">:</span> <span class="s1">'ALGOL 58'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method can perform
the update using the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/positional/#_S_" title="$"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$</span></tt></a> positional operator if the
position is not known. The array field must appear in the <tt class="docutils literal"><span class="pre">query</span></tt>
argument in order to determine which array element to update.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for the first
document where the <tt class="docutils literal"><span class="pre">_id</span></tt> field equals <tt class="docutils literal"><span class="pre">3</span></tt> and the <tt class="docutils literal"><span class="pre">contribs</span></tt>
array contains an element equal to <tt class="docutils literal"><span class="pre">compiler</span></tt>. If found, the
<a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method updates the
first matching element in the array to <tt class="docutils literal"><span class="pre">A</span> <span class="pre">compiler</span></tt> in the
document:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">'contribs'</span><span class="o">:</span> <span class="s1">'compiler'</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'contribs.$'</span><span class="o">:</span> <span class="s1">'A compiler'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method can perform
the update of an array that contains subdocuments by using the
positional operator (i.e. <a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/positional/#_S_" title="$"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$</span></tt></a>) and the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-dot-notation"><em class="xref std std-term">dot notation</em></a>.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for the first
document where the <tt class="docutils literal"><span class="pre">_id</span></tt> field equals <tt class="docutils literal"><span class="pre">6</span></tt> and the <tt class="docutils literal"><span class="pre">awards</span></tt>
array contains a subdocument element with the <tt class="docutils literal"><span class="pre">by</span></tt> field equal
to <tt class="docutils literal"><span class="pre">ACM</span></tt>. If found, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method updates the <tt class="docutils literal"><span class="pre">by</span></tt> field in the
first matching subdocument:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">'awards.by'</span><span class="o">:</span> <span class="s1">'ACM'</span>  <span class="p">}</span> <span class="p">,</span>
   <span class="p">{</span> <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'awards.$.by'</span><span class="o">:</span> <span class="s1">'Association for Computing Machinery'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">&lt;options&gt;</span></tt> argument contains the <tt class="docutils literal"><span class="pre">multi</span></tt> option set to
<tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">1</span></tt>, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a>
method updates all documents that match the query.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for all
documents where the <tt class="docutils literal"><span class="pre">awards</span></tt> field contains a subdocument element
with the <tt class="docutils literal"><span class="pre">award</span></tt> field equal to <tt class="docutils literal"><span class="pre">Turing</span></tt> and sets the <tt class="docutils literal"><span class="pre">turing</span></tt>
field to <tt class="docutils literal"><span class="pre">true</span></tt> in the matching documents:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="s1">'awards.award'</span><span class="o">:</span> <span class="s1">'Turing'</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span> <span class="nx">turing</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">},</span>
   <span class="p">{</span> <span class="nx">multi</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If you set the <tt class="docutils literal"><span class="pre">upsert</span></tt> option in the <tt class="docutils literal"><span class="pre">&lt;options&gt;</span></tt> argument to
<tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">1</span></tt> and no existing document match the <tt class="docutils literal"><span class="pre">&lt;query&gt;</span></tt>
argument, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method can
insert a new document into the collection.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for a
document with the <tt class="docutils literal"><span class="pre">_id</span></tt> field equal to <tt class="docutils literal"><span class="pre">11</span></tt> and the <tt class="docutils literal"><span class="pre">name</span></tt>
field equal to <tt class="docutils literal"><span class="pre">{</span> <span class="pre">first:</span> <span class="pre">'James',</span> <span class="pre">last:</span> <span class="pre">'Gosling'}</span></tt>. If the query
selects a document, the operation performs an update operation. If a
document is not found, <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a>
inserts a new document containing the fields and values from
<tt class="docutils literal"><span class="pre">&lt;query&gt;</span></tt> argument with the operations from the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt>
argument applied. <a class="footnote-reference" href="#upsert-update-operators" id="id2">[1]</a></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span>
   <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">'James'</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">'Gosling'</span> <span class="p">}</span> <span class="p">},</span>
   <span class="p">{</span>
     <span class="nx">$set</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">born</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">'May 19, 1955'</span><span class="p">),</span>
              <span class="nx">contribs</span><span class="o">:</span> <span class="p">[</span> <span class="s1">'Java'</span> <span class="p">],</span>
              <span class="nx">awards</span><span class="o">:</span> <span class="p">[</span>
                        <span class="p">{</span> <span class="nx">award</span><span class="o">:</span> <span class="s1">'The Economist Innovation Award'</span><span class="p">,</span>
                          <span class="nx">year</span><span class="o">:</span> <span class="mi">2002</span><span class="p">,</span>
                          <span class="nx">by</span><span class="o">:</span> <span class="s1">'The Economist'</span> <span class="p">},</span>
                        <span class="p">{</span> <span class="nx">award</span><span class="o">:</span> <span class="s1">'Officer of the Order of Canada'</span><span class="p">,</span>
                          <span class="nx">year</span><span class="o">:</span> <span class="mi">2007</span><span class="p">,</span>
                          <span class="nx">by</span><span class="o">:</span> <span class="s1">'Canada'</span> <span class="p">}</span>
             <span class="p">]</span>
          <span class="p">}</span>
   <span class="p">},</span>
   <span class="p">{</span> <span class="nx">upsert</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="http://docs.mongodb.org/manual/applications/create/#crud-create-update"><em>Create with Upsert</em></a>.</p>
</li>
</ul>
<blockquote>
<div><span class="target" id="crud-update-save"></span></div></blockquote>
<table class="docutils footnote" frame="void" id="upsert-update-operators" rules="none">
<colgroup><col class="label"><col></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>If the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt>
argument includes only field and value pairs, the new document
contains the fields and values specified in the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt>
argument. If the <tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument includes only <a class="reference internal" href="http://docs.mongodb.org/manual/reference/operators/#update-operators"><em>update
operators</em></a>, the new document contains the fields
and values from <tt class="docutils literal"><span class="pre">&lt;query&gt;</span></tt> argument with the operations from the
<tt class="docutils literal"><span class="pre">&lt;update&gt;</span></tt> argument applied.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="save">
<h2>Save<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save" title="db.collection.save"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">save()</span></tt></a> method updates an existing
document or inserts a document depending on the <tt class="docutils literal"><span class="pre">_id</span></tt> field of the
document. The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save" title="db.collection.save"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">save()</span></tt></a> method is
analogous to the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update" title="db.collection.update"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">update()</span></tt></a> method
with the <tt class="docutils literal"><span class="pre">upsert</span></tt> option and a <tt class="docutils literal"><span class="pre">&lt;query&gt;</span></tt> argument on the <tt class="docutils literal"><span class="pre">_id</span></tt>
field.</p>
<p>The <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save" title="db.collection.save"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">save()</span></tt></a> method has the
following syntax:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span> <span class="o">&lt;</span><span class="nb">document</span><span class="o">&gt;</span> <span class="p">)</span>
</pre></div>
</div>
<p>Consider the following examples of the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save" title="db.collection.save"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">save()</span></tt></a> method:</p>
<ul>
<li><p class="first">If the <tt class="docutils literal"><span class="pre">&lt;document&gt;</span></tt> argument contains the <tt class="docutils literal"><span class="pre">_id</span></tt> field that exists
in the collection, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save" title="db.collection.save"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">save()</span></tt></a> method
performs an update that replaces the existing document with the
<tt class="docutils literal"><span class="pre">&lt;document&gt;</span></tt> argument.</p>
<p>The following operation queries the <tt class="docutils literal"><span class="pre">bios</span></tt> collection for a
document where the <tt class="docutils literal"><span class="pre">_id</span></tt> equals
<tt class="docutils literal"><span class="pre">ObjectId("507c4e138fada716c89d0014")</span></tt> and replaces the document
with the <tt class="docutils literal"><span class="pre">&lt;document&gt;</span></tt> argument:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span>
   <span class="p">{</span>
     <span class="nx">_id</span><span class="o">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="s2">"507c4e138fada716c89d0014"</span><span class="p">),</span>
     <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">'Martin'</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">'Odersky'</span> <span class="p">},</span>
     <span class="nx">contribs</span><span class="o">:</span> <span class="p">[</span> <span class="s1">'Scala'</span> <span class="p">]</span>
   <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">If no <tt class="docutils literal"><span class="pre">_id</span></tt> field exists or if the <tt class="docutils literal"><span class="pre">_id</span></tt> field exists but does
not match any document in the collection, the <a class="reference internal" href="http://docs.mongodb.org/manual/reference/method/db.collection.save/#db.collection.save" title="db.collection.save"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">save()</span></tt></a> method performs an insert.</p>
<p>The following operation adds the <tt class="docutils literal"><span class="pre">_id</span></tt> field to the document,
assigns to the field a unique <a class="reference internal" href="http://docs.mongodb.org/manual/reference/glossary/#term-objectid"><em class="xref std std-term">ObjectId</em></a>, and
inserts the document into the <tt class="docutils literal"><span class="pre">bios</span></tt> collection:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">bios</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span>
   <span class="p">{</span>
     <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">'Larry'</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">'Wall'</span> <span class="p">},</span>
     <span class="nx">contribs</span><span class="o">:</span> <span class="p">[</span> <span class="s1">'Perl'</span> <span class="p">]</span>
   <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="http://docs.mongodb.org/manual/applications/create/#crud-create-save"><em>Create with Save</em></a>.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="update-operators">
<h2>Update Operators<a class="headerlink" href="#update-operators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fields">
<h3>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/inc/#_S_inc" title="$inc"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$inc</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/rename/#_S_rename" title="$rename"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$rename</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/set/#_S_set" title="$set"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$set</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/unset/#_S_unset" title="$unset"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$unset</span></tt></a></li>
</ul>
</div>
<div class="section" id="array">
<h3>Array<a class="headerlink" href="#array" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/positional/#_S_" title="$"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/addToSet/#_S_addToSet" title="$addToSet"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$addToSet</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/pop/#_S_pop" title="$pop"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$pop</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/pullAll/#_S_pullAll" title="$pullAll"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$pullAll</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/pull/#_S_pull" title="$pull"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$pull</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/pushAll/#_S_pushAll" title="$pushAll"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$pushAll</span></tt></a></li>
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/push/#_S_push" title="$push"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$push</span></tt></a></li>
</ul>
</div>
<div class="section" id="bitwise">
<h3>Bitwise<a class="headerlink" href="#bitwise" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/bit/#_S_bit" title="$bit"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$bit</span></tt></a></li>
</ul>
</div>
<div class="section" id="isolation">
<h3>Isolation<a class="headerlink" href="#isolation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="http://docs.mongodb.org/manual/reference/operator/isolated/#_S_isolated" title="$isolated"><tt class="xref mongodb mongodb-operator docutils literal"><span class="pre">$isolated</span></tt></a></li>
</ul>
</div>
</div>
</div>


<div id="btnv">
<ul id="btnvl">
<li id="btnvpr"><a href="http://docs.mongodb.org/manual/applications/read/" title="Previous Section: Read">&lt; &nbsp; Read</a></li>
<li id="btnvup"><a href="http://docs.mongodb.org/manual/crud/" title="Parent Section: Core MongoDB Operations (CRUD)">/\&nbsp; Core MongoDB Operations (CRUD)</a></li>
<li id="btnvnx"><a href="http://docs.mongodb.org/manual/applications/delete/" title="Next Section: Delete">Delete &nbsp;&gt;</a></li>
</ul>
</div>
</div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3><a href="http://docs.mongodb.org/manual/contents/">MongoDB Manual</a>

<small><a href="http://docs.mongodb.org/manual/genindex/">(Index)</a></small>

</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/installation/">Installing MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/administration/">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/security/">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="http://docs.mongodb.org/manual/crud/">Core MongoDB Operations (CRUD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="http://docs.mongodb.org/manual/crud/#read-and-write-operations-in-mongodb">Read and Write Operations in MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="http://docs.mongodb.org/manual/crud/#document-orientation-concepts">Document Orientation Concepts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="http://docs.mongodb.org/manual/crud/#crud-operations-for-mongodb">CRUD Operations for MongoDB</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="http://docs.mongodb.org/manual/applications/create/">Create</a></li>
<li class="toctree-l3"><a class="reference internal" href="http://docs.mongodb.org/manual/applications/read/">Read</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Update</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#crud-update-update">Update</a></li>
<li class="toctree-l4"><a class="reference internal" href="#save">Save</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-operators">Update Operators</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#fields">Fields</a></li>
<li class="toctree-l5"><a class="reference internal" href="#array">Array</a></li>
<li class="toctree-l5"><a class="reference internal" href="#bitwise">Bitwise</a></li>
<li class="toctree-l5"><a class="reference internal" href="#isolation">Isolation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="http://docs.mongodb.org/manual/applications/delete/">Delete</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="http://docs.mongodb.org/manual/crud/#data-modeling-patterns">Data Modeling Patterns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/aggregation/">Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/indexes/">Indexes</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/replication/">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/sharding/">Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/applications/">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/mongo/">Using the <tt class="docutils literal"><span class="pre">mongo</span></tt> Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/use-cases/">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/tutorial/">MongoDB Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/faq/">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/reference/">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="http://docs.mongodb.org/manual/about/">About MongoDB Documentation</a></li>
</ul>

<h3 style="padding-bottom: 1em;"><a href="http://www.mongodb.org/about/">MongoDB.org</a></h3>
<h3 style="padding-bottom: 1em;"><a href="http://docs.mongodb.org/ecosystem/">MongoDB Ecosystem</a></h3><h3>Formats</h3>
<ul class="this-page-menu">
  <li><a href="http://docs.mongodb.org/master/single/">MongoDB Manual, Single HTML Page</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.pdf" rel="nofollow">MongoDB Manual, PDF Format</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.epub" rel="nofollow">MongoDB Manual, ePub Format</a></li>
</ul><h3>MongoDB Wiki</h3>

<ul>
 <li><strong>Getting Started</strong>
   <ul>
     <li><a href="http://www.mongodb.org/about/introduction">Introduction</a></li>
     <li><a href="http://www.mongodb.org/downloads">Downloads</a></li>
   </ul>
 </li>
 <li><strong><a href="http://www.mongodb.org/about/community">Community</a> and <a href="http://docs.mongodb.org/ecosystem/">Ecosystem</a></strong>
   <ul>
     <li><a href="http://www.10gen.com/">10gen</a></li>
     <li><a href="http://www.10gen.com/events">MongoDB Events</a></li>
     <li><a href="http://planet.mongodb.org/">Planet MongoDB</a></li>
     <li><a href="http://mongodb.org/about/community/masters">MongoDB Masters</a></li>
     <li><a href="http://www.10gen.com/presentations">Slides and Video</a></li>
     <li><a href="http://docs.mongodb.org/ecosystem/platforms/">Hosting Center</a></li>
     <li><a href="http://docs.mongodb.org/ecosystem/platforms/windows">Windows</a></li>
     <li><a href="http://www.10gen.com/products/mms/">MongoDB Monitoring Service</a> (<a href="http://mms.10gen.com/help/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/tools/administration-interfaces/">Administrative Interfaces</a></li>
     <li><a href="http://www.10gen.com/books/">MongoDB Books</a></li>
   </ul>
 </li>
 <li><strong><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers</a></strong>
   <ul>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/javascript">JavaScript</a> (<a href="http://api.mongodb.org/js/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/python">Python</a> (<a href="http://api.mongodb.org/python/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/ruby">Ruby</a> (<a href="http://api.mongodb.org/ruby/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/php">PHP</a> (<a href="http://php.net/mongo/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/perl">Perl</a> (<a href="http://api.mongodb.org/perl/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/java">Java</a> (<a href="http://api.mongodb.org/java/current">docs</a>)</li>
     <li><a href="http://api.mongodb.org/scala/casbah/current/">Scala</a> (<a href="http://api.mongodb.org/scala/casbah/current/">docs</a>)</li>
<!-- <li><a href="http://docs.mongodb.org/ecosystem/drivers/scala">Scala</a> (<a href="http://api.mongodb.org/scala/casbah/current/">docs</a>)</li> -->
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/csharp">C#</a> (<a href="http://api.mongodb.org/csharp/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/c">C</a> (<a href="http://api.mongodb.org/c/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/cpp">C++</a> (<a href="http://api.mongodb.org/cplusplus/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/haskell">Haskell</a> (<a href="http://api.mongodb.org/haskell">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/erlang">Erlang</a> (<a href="http://api.mongodb.org/erlang">docs</a>)</li>
   </ul>
 </li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    <p>
       © <a href="">Copyright</a> 2011-2013, 10gen, Inc. 
       MongoDB®, Mongo®, and the leaf logo are registered trademarks of 10gen, Inc.
    </p>
  </div><script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-7301842-8']);
_gaq.push(['_setDomainName', 'docs.mongodb.org']);
_gaq.push(['_trackPageview']);
(function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
        })();
</script>

<script type="text/javascript">
document.write(unescape("%3Cscript src='" + document.location.protocol + "//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="Update%20%E2%80%94%20MongoDB%20Manual_files/munchkin.htm" type="text/javascript"></script>
<script>try { mktoMunchkin("017-HGS-593"); } catch(e) {}</script><script type="text/javascript">
jQuery.ajax({
    url: "https://jira.mongodb.org/s/en_US-bxctp1/782/6/1.2.4/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=298ba4e7",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS =  {
"triggerFunction": function(showCollectorDialog) {
jQuery("#jirafeedback").click(function(e) {e.preventDefault();showCollectorDialog();});
jQuery("#jirafooter").click(function(e) {e.preventDefault();showCollectorDialog();});
}};
</script>

<table class="gstl_0 gssb_c" style="width: 129px; display: none; top: 70px; left: 879px; position: absolute;" cellpadding="0" cellspacing="0"><tbody><tr><td class="gssb_f"></td><td style="width: 100%;" class="gssb_e"></td></tr></tbody></table><div style="display: none;" id="atlwdg-blanket" class="atlwdg-blanket"></div><div class="atlwdg-popup atlwdg-box-shadow atlwdg-hidden" id="atlwdg-container"></div></body></html>