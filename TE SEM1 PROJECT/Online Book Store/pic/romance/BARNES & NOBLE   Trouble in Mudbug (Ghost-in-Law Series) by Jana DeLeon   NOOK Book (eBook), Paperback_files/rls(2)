BN_YUI.Env._loader.data = (BN_YUI.Env._loader.data || []).concat(["event-key","event-resize","event-outside","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain","overlay","anim-xy","anim-easing","widget-modality","widget-autohide","bn-overlay","swfdetect","video-player","jsonp-url","jsonp","async-semaphore","util-navigation","util-widget","ajax-updater","bnutil-json","render-errors","util-form","ajax-form","bn-event-links","event-base-ie","account-signin-event","account-signin-check","communicator-cookie-messenger","communicator-window-messenger","inter-window-communicator","account-signin-popup","account-signin-base","account-signin","substitute","pen-name-overlay","bag-updater","event-mousewheel","event-touch","event-move","event-flick","event-valuechange","product-image-viewer","widget-lazy-render","styled-inputs","report-as-inappropriate","reviews-wasthishelpful","shared-rotator","scroller-base","selector-css3","selector-css2","scroller-carousel","account-signin-actions","gallery-outside-events","gallery-overlay-extras","anim-scroll","fade-to-more","performance-metrics","form-toolkit","buffer-delayed","buffer-interval","analytics-internaltracking","analytics-comscore","review-form","shared-tooltip","shim-plugin","p13n-preferences","third-party-purchase","enhanced-purchase-options","launch-popup","escape","form-expando","anim-node-plugin","anim-curve","anim-color","scroll-to","querystring-parse","querystring-parse-simple","analytics-coremetrics","shared-menu-item","add-to-list","report-this-review","coremetrics-helper","analytics-visualization","skin-sam-overlay","skin-sam-widget-base","skin-sam-widget-stack","skin-sam-widget-modality","bn-overlay-css","styled-inputs-css","fade-to-more-css","form-expando-css"]);
/*[|y|event-key/event-key-min.js, |y|event-resize/event-resize-min.js, |y|event-outside/event-outside-min.js, |y|widget-stdmod/widget-stdmod-min.js, |y|widget-position/widget-position-min.js, |y|widget-position-align/widget-position-align-min.js, |y|widget-stack/widget-stack-min.js, |y|widget-position-constrain/widget-position-constrain-min.js, |y|overlay/overlay-min.js, |y|anim-xy/anim-xy-min.js, |y|anim-easing/anim-easing-min.js, |y|widget-modality/widget-modality-min.js, |y|widget-autohide/widget-autohide-min.js, /js-min/widgets/shared/bn-overlay.js, |y|swfdetect/swfdetect-min.js, /js-min/widgets/shared/video-player.js, |y|jsonp-url/jsonp-url-min.js, |y|jsonp/jsonp-min.js, /js-min/core/utility/AsyncSemaphore.js, /js-min/widgets/shared/util/navigation.js, /js-min/widgets/shared/util/widget.js, /js-min/widgets/shared/ajax/updater.js, /js-min/core/utility/JSONUtil.js, /js-min/widgets/shared/form/render-errors.js, /js-min/widgets/shared/util/form.js, /js-min/widgets/shared/ajax/form.js, /js-min/widgets/shared/util/bn-event-links.js, |y|event-base-ie/event-base-ie-min.js, /js-min/widgets/account/signin/signin-event.js, /js-min/widgets/account/signin/signin-check.js, /js-min/widgets/shared/communication/cookie-messenger.js, /js-min/widgets/shared/communication/window-messenger.js, /js-min/widgets/shared/communication/inter-window-communicator.js, /js-min/widgets/account/signin/signin-popup.js, /js-min/widgets/account/signin/signin-base.js, /js-min/widgets/account/signin/signin.js, |y|substitute/substitute-min.js, /js-min/widgets/penname/pen-name-overlay.js, /js-min/widgets/bag/bag-updater.js, |y|event-mousewheel/event-mousewheel-min.js, |y|event-touch/event-touch-min.js, |y|event-move/event-move-min.js, |y|event-flick/event-flick-min.js, |y|event-valuechange/event-valuechange-min.js, /js-min/widgets/product-page/product-image-viewer.js, /js-min/core/utility/widget-lazy-render.js, /js-min/widgets/shared/styled-inputs.js, /js-min/widgets/product-page/report-as-inappropriate.js, /js-min/widgets/reviews/reviews-wasthishelpful.js, /js-min/widgets/shared/shared-rotator.js, /js-min/widgets/shared/scroller/scroller-base.js, |y|selector-css3/selector-css3-min.js, |y|selector-css2/selector-css2-min.js, /js-min/widgets/shared/scroller/scroller-carousel.js, /js-min/widgets/account/signin/signin-actions.js, /js-min/vendor/yui-gallery/gallery-outside-events/gallery-outside-events.js, /js-min/vendor/yui-gallery/gallery-overlay-extras/gallery-overlay-extras.js, |y|anim-scroll/anim-scroll-min.js, /js-min/widgets/shared/fade-to-more.js, /js-min/widgets/shared/performance-metrics.js, /js-min/widgets/shared/form-toolkit.js, /js-min/core/analytics/buffer/delayed.js, /js-min/core/analytics/buffer/interval.js, /js-min/core/analytics/provider/internaltracking-provider.js, /js-min/core/analytics/provider/comscore-provider.js, /js-min/widgets/reviews/review-form.js, /js-min/widgets/shared/tooltip.js, |y|shim-plugin/shim-plugin-min.js, /js-min/widgets/p13n/preferences.js, /js-min/widgets/checkout/third-party-purchase.js, /js-min/widgets/checkout/enhanced-purchase-options.js, /js-min/widgets/shared/launch-popup.js, |y|escape/escape-min.js, /js-min/widgets/shared/expando.js, |y|anim-node-plugin/anim-node-plugin-min.js, |y|anim-curve/anim-curve-min.js, |y|anim-color/anim-color-min.js, /js-min/widgets/shared/scroll-to.js, |y|querystring-parse/querystring-parse-min.js, |y|querystring-parse-simple/querystring-parse-simple-min.js, /js-min/core/analytics/provider/coremetrics-provider.js, /js-min/widgets/shared/menu-item.js, /js-min/widgets/shared/add-to-list.js, /js-min/widgets/reviews/reviews-reportthisreview.js, /js-min/core/analytics/coremetrics-helper.js, /js-min/core/analytics/visualization-tool.js]*/
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-key",function(g){var e="+alt",c="+ctrl",d="+meta",b="+shift",a=g.Lang.trim,f={KEY_MAP:{enter:13,esc:27,backspace:8,tab:9,pageup:33,pagedown:34},_typeRE:/^(up|down|press):/,_keysRE:/^(?:up|down|press):|\+(alt|ctrl|meta|shift)/g,processArgs:function(m){var p=m.splice(3,1)[0],o=g.Array.hash(p.match(/\+(?:alt|ctrl|meta|shift)\b/g)||[]),j={type:this._typeRE.test(p)?RegExp.$1:null,mods:o,keys:null},n=p.replace(this._keysRE,""),k,q,h,l;if(n){n=n.split(",");j.keys={};for(l=n.length-1;l>=0;--l){k=a(n[l]);if(!k){continue;}if(+k==k){j.keys[k]=o;}else{h=k.toLowerCase();if(this.KEY_MAP[h]){j.keys[this.KEY_MAP[h]]=o;if(!j.type){j.type="down";}}else{k=k.charAt(0);q=k.toUpperCase();if(o["+shift"]){k=q;}j.keys[k.charCodeAt(0)]=(k===q)?g.merge(o,{"+shift":true}):o;}}}}if(!j.type){j.type="press";}return j;},on:function(n,k,m,j){var h=k._extra,i="key"+h.type,l=h.keys,o=(j)?"delegate":"on";k._detach=n[o](i,function(q){var p=l?l[q.which]:h.mods;if(p&&(!p[e]||(p[e]&&q.altKey))&&(!p[c]||(p[c]&&q.ctrlKey))&&(!p[d]||(p[d]&&q.metaKey))&&(!p[b]||(p[b]&&q.shiftKey))){m.fire(q);}},j);},detach:function(j,h,i){h._detach.detach();}};f.delegate=f.on;f.detachDelegate=f.detach;g.Event.define("key",f,true);},"3.5.1",{requires:["event-synthetic"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-resize",function(a){a.Event.define("windowresize",{on:(a.UA.gecko&&a.UA.gecko<1.91)?function(d,b,c){b._handle=a.Event.attach("resize",function(f){c.fire(f);});}:function(e,c,d){var b=a.config.windowResizeDelay||100;c._handle=a.Event.attach("resize",function(f){if(c._timer){c._timer.cancel();}c._timer=a.later(b,a,function(){d.fire(f);});});},detach:function(c,b){if(b._timer){b._timer.cancel();}b._handle.detach();}});},"3.5.1",{requires:["event-synthetic"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-outside",function(b){var a=["blur","change","click","dblclick","focus","keydown","keypress","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","select","submit"];b.Event.defineOutside=function(e,d){d=d||(e+"outside");var c={on:function(h,f,g){f.handle=b.one("doc").on(e,function(i){if(this.isOutside(h,i.target)){i.currentTarget=h;g.fire(i);}},this);},detach:function(h,f,g){f.handle.detach();},delegate:function(i,g,h,f){g.handle=b.one("doc").delegate(e,function(j){if(this.isOutside(i,j.target)){h.fire(j);}},f,this);},isOutside:function(f,g){return g!==f&&!g.ancestor(function(h){return h===f;});}};c.detachDelegate=c.detach;b.Event.define(d,c);};b.Array.each(a,function(c){b.Event.defineOutside(c);});},"3.5.1",{requires:["event-synthetic"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-stdmod",function(b){var f=b.Lang,q=b.Node,x=b.UA,e=b.Widget,d="",J="hd",G="bd",j="ft",D="header",M="body",K="footer",N="fillHeight",m="stdmod",u="Node",I="Content",C="firstChild",h="childNodes",n="ownerDocument",v="contentBox",z="height",F="offsetHeight",y="auto",l="headerContentChange",B="bodyContentChange",o="footerContentChange",r="fillHeightChange",t="heightChange",O="contentUpdate",w="renderUI",E="bindUI",g="syncUI",H="_applyParsedConfig",s=b.Widget.UI_SRC;function P(L){this._stdModNode=this.get(v);b.before(this._renderUIStdMod,this,w);b.before(this._bindUIStdMod,this,E);b.before(this._syncUIStdMod,this,g);}P.HEADER=D;P.BODY=M;P.FOOTER=K;P.AFTER="after";P.BEFORE="before";P.REPLACE="replace";var k=P.HEADER,A=P.BODY,p=P.FOOTER,a=k+I,c=p+I,i=A+I;P.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:P.BODY,validator:function(L){return this._validateFillHeight(L);}}};P.HTML_PARSER={headerContent:function(L){return this._parseStdModHTML(k);},bodyContent:function(L){return this._parseStdModHTML(A);},footerContent:function(L){return this._parseStdModHTML(p);}};P.SECTION_CLASS_NAMES={header:e.getClassName(J),body:e.getClassName(G),footer:e.getClassName(j)};P.TEMPLATES={header:'<div class="'+P.SECTION_CLASS_NAMES[k]+'"></div>',body:'<div class="'+P.SECTION_CLASS_NAMES[A]+'"></div>',footer:'<div class="'+P.SECTION_CLASS_NAMES[p]+'"></div>'};P.prototype={_syncUIStdMod:function(){var L=this._stdModParsed;if(!L||!L[a]){this._uiSetStdMod(k,this.get(a));}if(!L||!L[i]){this._uiSetStdMod(A,this.get(i));}if(!L||!L[c]){this._uiSetStdMod(p,this.get(c));}this._uiSetFillHeight(this.get(N));},_renderUIStdMod:function(){this._stdModNode.addClass(e.getClassName(m));this._renderStdModSections();this.after(l,this._afterHeaderChange);this.after(B,this._afterBodyChange);this.after(o,this._afterFooterChange);},_renderStdModSections:function(){if(f.isValue(this.get(a))){this._renderStdMod(k);}if(f.isValue(this.get(i))){this._renderStdMod(A);}if(f.isValue(this.get(c))){this._renderStdMod(p);}},_bindUIStdMod:function(){this.after(r,this._afterFillHeightChange);this.after(t,this._fillHeight);this.after(O,this._fillHeight);},_afterHeaderChange:function(L){if(L.src!==s){this._uiSetStdMod(k,L.newVal,L.stdModPosition);}},_afterBodyChange:function(L){if(L.src!==s){this._uiSetStdMod(A,L.newVal,L.stdModPosition);}},_afterFooterChange:function(L){if(L.src!==s){this._uiSetStdMod(p,L.newVal,L.stdModPosition);}},_afterFillHeightChange:function(L){this._uiSetFillHeight(L.newVal);},_validateFillHeight:function(L){return !L||L==P.BODY||L==P.HEADER||L==P.FOOTER;},_uiSetFillHeight:function(R){var Q=this.getStdModNode(R);var L=this._currFillNode;if(L&&Q!==L){L.setStyle(z,d);}if(Q){this._currFillNode=Q;}this._fillHeight();},_fillHeight:function(){if(this.get(N)){var L=this.get(z);if(L!=d&&L!=y){this.fillHeight(this._currFillNode);}}},_uiSetStdMod:function(S,R,L){if(f.isValue(R)){var Q=this.getStdModNode(S,true);this._addStdModContent(Q,R,L);this.set(S+I,this._getStdModContent(S),{src:s});}else{this._eraseStdMod(S);}this.fire(O);},_renderStdMod:function(R){var L=this.get(v),Q=this._findStdModSection(R);if(!Q){Q=this._getStdModTemplate(R);}this._insertStdModSection(L,R,Q);this[R+u]=Q;return this[R+u];},_eraseStdMod:function(Q){var L=this.getStdModNode(Q);if(L){L.remove(true);delete this[Q+u];}},_insertStdModSection:function(L,S,R){var Q=L.get(C);if(S===p||!Q){L.appendChild(R);}else{if(S===k){L.insertBefore(R,Q);}else{var T=this[p+u];if(T){L.insertBefore(R,T);}else{L.appendChild(R);}}}},_getStdModTemplate:function(L){return q.create(P.TEMPLATES[L],this._stdModNode.get(n));},_addStdModContent:function(R,Q,L){switch(L){case P.BEFORE:L=0;break;case P.AFTER:L=undefined;break;default:L=P.REPLACE;}R.insert(Q,L);},_getPreciseHeight:function(R){var L=(R)?R.get(F):0,S="getBoundingClientRect";if(R&&R.hasMethod(S)){var Q=R.invoke(S);if(Q){L=Q.bottom-Q.top;}}return L;},_findStdModSection:function(L){return this.get(v).one("> ."+P.SECTION_CLASS_NAMES[L]);},_parseStdModHTML:function(Q){var L=this._findStdModSection(Q);if(L){if(!this._stdModParsed){this._stdModParsed={};b.before(this._applyStdModParsedConfig,this,H);}this._stdModParsed[Q+I]=1;return L.get("innerHTML");}return null;},_applyStdModParsedConfig:function(S,L,R){var Q=this._stdModParsed;if(Q){Q[a]=!(a in L)&&(a in Q);Q[i]=!(i in L)&&(i in Q);Q[c]=!(c in L)&&(c in Q);}},_getStdModContent:function(L){return(this[L+u])?this[L+u].get(h):null;},setStdModContent:function(R,Q,L){this.set(R+I,Q,{stdModPosition:L});},getStdModNode:function(R,Q){var L=this[R+u]||null;if(!L&&Q){L=this._renderStdMod(R);}return L;},fillHeight:function(Q){if(Q){var V=this.get(v),W=[this.headerNode,this.bodyNode,this.footerNode],L,X,Y=0,T=0,S=false;for(var U=0,R=W.length;U<R;U++){L=W[U];if(L){if(L!==Q){Y+=this._getPreciseHeight(L);}else{S=true;}}}if(S){if(x.ie||x.opera){Q.set(F,0);}X=V.get(F)-parseInt(V.getComputedStyle("paddingTop"),10)-parseInt(V.getComputedStyle("paddingBottom"),10)-parseInt(V.getComputedStyle("borderBottomWidth"),10)-parseInt(V.getComputedStyle("borderTopWidth"),10);if(f.isNumber(X)){T=X-Y;if(T>=0){Q.set(F,T);}}}}}};b.WidgetStdMod=P;},"3.5.1",{requires:["base-build","widget"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position",function(a){var i=a.Lang,l=a.Widget,n="xy",j="position",g="positioned",k="boundingBox",h="relative",m="renderUI",f="bindUI",d="syncUI",c=l.UI_SRC,e="xyChange";function b(o){this._posNode=this.get(k);a.after(this._renderUIPosition,this,m);a.after(this._syncUIPosition,this,d);a.after(this._bindUIPosition,this,f);}b.ATTRS={x:{setter:function(o){this._setX(o);},getter:function(){return this._getX();},lazyAdd:false},y:{setter:function(o){this._setY(o);},getter:function(){return this._getY();},lazyAdd:false},xy:{value:[0,0],validator:function(o){return this._validateXY(o);}}};b.POSITIONED_CLASS_NAME=l.getClassName(g);b.prototype={_renderUIPosition:function(){this._posNode.addClass(b.POSITIONED_CLASS_NAME);},_syncUIPosition:function(){var o=this._posNode;if(o.getStyle(j)===h){this.syncXY();}this._uiSetXY(this.get(n));},_bindUIPosition:function(){this.after(e,this._afterXYChange);},move:function(){var o=arguments,p=(i.isArray(o[0]))?o[0]:[o[0],o[1]];this.set(n,p);},syncXY:function(){this.set(n,this._posNode.getXY(),{src:c});},_validateXY:function(o){return(i.isArray(o)&&i.isNumber(o[0])&&i.isNumber(o[1]));},_setX:function(o){this.set(n,[o,this.get(n)[1]]);},_setY:function(o){this.set(n,[this.get(n)[0],o]);},_getX:function(){return this.get(n)[0];},_getY:function(){return this.get(n)[1];},_afterXYChange:function(o){if(o.src!=c){this._uiSetXY(o.newVal);}},_uiSetXY:function(o){this._posNode.setXY(o);}};a.WidgetPosition=b;},"3.5.1",{requires:["base-build","node-screen","widget"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position-align",function(a){var f=a.Lang,d="align",b="alignOn",g="visible",i="boundingBox",e="offsetWidth",j="offsetHeight",h="region",k="viewportRegion";function c(l){if(!this._posNode){a.error("WidgetPosition needs to be added to the Widget, "+"before WidgetPositionAlign is added");}a.after(this._bindUIPosAlign,this,"bindUI");a.after(this._syncUIPosAlign,this,"syncUI");}c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:false,value:false},alignOn:{value:[],validator:a.Lang.isArray}};c.TL="tl";c.TR="tr";c.BL="bl";c.BR="br";c.TC="tc";c.RC="rc";c.BC="bc";c.LC="lc";c.CC="cc";c.prototype={_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles();},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange);this.after("alignOnChange",this._afterAlignOnChange);this.after("visibleChange",this._syncUIPosAlign);},_syncUIPosAlign:function(){var l=this.get(d);this._uiSetVisiblePosAlign(this.get(g));if(l){this._uiSetAlign(l.node,l.points);}},align:function(m,l){if(arguments.length){this.set(d,{node:m,points:l});}else{this._syncUIPosAlign();}return this;},centered:function(l){return this.align(l,[c.CC,c.CC]);},_setAlignCenter:function(l){if(l){this.set(d,{node:l===true?null:l,points:[c.CC,c.CC]});}return l;},_uiSetAlign:function(o,n){if(!f.isArray(n)||n.length!==2){a.error("align: Invalid Points Arguments");return;}var m=this._getRegion(o),l,p,q;if(!m){return;}l=n[0];p=n[1];switch(p){case c.TL:q=[m.left,m.top];break;case c.TR:q=[m.right,m.top];break;case c.BL:q=[m.left,m.bottom];break;case c.BR:q=[m.right,m.bottom];break;case c.TC:q=[m.left+Math.floor(m.width/2),m.top];break;case c.BC:q=[m.left+Math.floor(m.width/2),m.bottom];break;case c.LC:q=[m.left,m.top+Math.floor(m.height/2)];break;case c.RC:q=[m.right,m.top+Math.floor(m.height/2)];break;case c.CC:q=[m.left+Math.floor(m.width/2),m.top+Math.floor(m.height/2)];break;default:break;}if(q){this._doAlign(l,q[0],q[1]);}},_uiSetVisiblePosAlign:function(l){if(l){this._attachPosAlignUIHandles();}else{this._detachPosAlignUIHandles();}},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles){return;}var n=this.get(i),m=a.bind(this._syncUIPosAlign,this),l=[];a.Array.each(this.get(b),function(r){var q=r.eventName,p=a.one(r.node)||n;if(q){l.push(p.on(q,m));}});this._posAlignUIHandles=l;},_detachPosAlignUIHandles:function(){var l=this._posAlignUIHandles;if(l){new a.EventHandle(l).detach();this._posAlignUIHandles=null;}},_doAlign:function(m,l,p){var o=this._posNode,n;switch(m){case c.TL:n=[l,p];break;case c.TR:n=[l-o.get(e),p];break;case c.BL:n=[l,p-o.get(j)];break;case c.BR:n=[l-o.get(e),p-o.get(j)];break;case c.TC:n=[l-(o.get(e)/2),p];break;case c.BC:n=[l-(o.get(e)/2),p-o.get(j)];break;case c.LC:n=[l,p-(o.get(j)/2)];break;case c.RC:n=[l-o.get(e),p-(o.get(j)/2)];break;case c.CC:n=[l-(o.get(e)/2),p-(o.get(j)/2)];break;default:break;}if(n){this.move(n);}},_getRegion:function(m){var l;if(!m){l=this._posNode.get(k);}else{m=a.Node.one(m);if(m){l=m.get(h);}}return l;},_afterAlignChange:function(l){var m=l.newVal;if(m){this._uiSetAlign(m.node,m.points);}},_afterAlignOnChange:function(l){this._detachPosAlignUIHandles();if(this.get(g)){this._attachPosAlignUIHandles();}}};a.WidgetPositionAlign=c;},"3.5.1",{requires:["widget-position"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-stack",function(e){var m=e.Lang,s=e.UA,B=e.Node,f=e.Widget,A="zIndex",o="shim",y="visible",C="boundingBox",v="renderUI",g="bindUI",r="syncUI",p="offsetWidth",d="offsetHeight",l="parentNode",a="firstChild",w="ownerDocument",h="width",u="height",k="px",n="shimdeferred",D="shimresize",x="visibleChange",c="widthChange",j="heightChange",z="shimChange",b="zIndexChange",i="contentUpdate",q="stacked";function t(E){this._stackNode=this.get(C);this._stackHandles={};e.after(this._renderUIStack,this,v);e.after(this._syncUIStack,this,r);e.after(this._bindUIStack,this,g);}t.ATTRS={shim:{value:(s.ie==6)},zIndex:{value:0,setter:"_setZIndex"}};t.HTML_PARSER={zIndex:function(E){return this._parseZIndex(E);}};t.SHIM_CLASS_NAME=f.getClassName(o);t.STACKED_CLASS_NAME=f.getClassName(q);t.SHIM_TEMPLATE='<iframe class="'+t.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';t.prototype={_syncUIStack:function(){this._uiSetShim(this.get(o));this._uiSetZIndex(this.get(A));},_bindUIStack:function(){this.after(z,this._afterShimChange);this.after(b,this._afterZIndexChange);},_renderUIStack:function(){this._stackNode.addClass(t.STACKED_CLASS_NAME);},_parseZIndex:function(E){var F;if(!E.inDoc()||E.getStyle("position")==="static"){F="auto";}else{F=E.getComputedStyle("zIndex");}return F==="auto"?null:F;},_setZIndex:function(E){if(m.isString(E)){E=parseInt(E,10);}if(!m.isNumber(E)){E=0;}return E;},_afterShimChange:function(E){this._uiSetShim(E.newVal);},_afterZIndexChange:function(E){this._uiSetZIndex(E.newVal);},_uiSetZIndex:function(E){this._stackNode.setStyle(A,E);},_uiSetShim:function(E){if(E){if(this.get(y)){this._renderShim();}else{this._renderShimDeferred();}if(s.ie==6){this._addShimResizeHandlers();}}else{this._destroyShim();}},_renderShimDeferred:function(){this._stackHandles[n]=this._stackHandles[n]||[];var F=this._stackHandles[n],E=function(G){if(G.newVal){this._renderShim();}};F.push(this.on(x,E));},_addShimResizeHandlers:function(){this._stackHandles[D]=this._stackHandles[D]||[];var F=this.sizeShim,E=this._stackHandles[D];E.push(this.after(x,F));E.push(this.after(c,F));E.push(this.after(j,F));E.push(this.after(i,F));},_detachStackHandles:function(E){var F=this._stackHandles[E],G;if(F&&F.length>0){while((G=F.pop())){G.detach();}}},_renderShim:function(){var E=this._shimNode,F=this._stackNode;if(!E){E=this._shimNode=this._getShimTemplate();F.insertBefore(E,F.get(a));this._detachStackHandles(n);this.sizeShim();}},_destroyShim:function(){if(this._shimNode){this._shimNode.get(l).removeChild(this._shimNode);this._shimNode=null;this._detachStackHandles(n);this._detachStackHandles(D);}},sizeShim:function(){var F=this._shimNode,E=this._stackNode;if(F&&s.ie===6&&this.get(y)){F.setStyle(h,E.get(p)+k);F.setStyle(u,E.get(d)+k);}},_getShimTemplate:function(){return B.create(t.SHIM_TEMPLATE,this._stackNode.get(w));}};e.WidgetStack=t;},"3.5.1",{requires:["base-build","widget"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position-constrain",function(c){var f="constrain",d="constrain|xyChange",b="constrainChange",n="preventOverlap",e="align",o="",g="bindUI",i="xy",a="x",m="y",j=c.Node,p="viewportRegion",l="region",k;function h(q){if(!this._posNode){c.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");}c.after(this._bindUIPosConstrained,this,g);}h.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:false}};k=h._PREVENT_OVERLAP={x:{"tltr":1,"blbr":1,"brbl":1,"trtl":1},y:{"trbr":1,"tlbl":1,"bltl":1,"brtr":1}};h.prototype={getConstrainedXY:function(t,s){s=s||this.get(f);var r=this._getRegion((s===true)?null:s),q=this._posNode.get(l);return[this._constrain(t[0],a,q,r),this._constrain(t[1],m,q,r)];},constrain:function(u,r){var t,q,s=r||this.get(f);if(s){t=u||this.get(i);q=this.getConstrainedXY(t,s);if(q[0]!==t[0]||q[1]!==t[1]){this.set(i,q,{constrained:true});}}},_setConstrain:function(q){return(q===true)?q:j.one(q);},_constrain:function(q,r,z,s){if(s){if(this.get(n)){q=this._preventOverlap(q,r,z,s);}var v=(r==a),y=(v)?s.width:s.height,u=(v)?z.width:z.height,t=(v)?s.left:s.top,w=(v)?s.right-u:s.bottom-u;if(q<t||q>w){if(u<y){if(q<t){q=t;}else{if(q>w){q=w;}}}else{q=t;}}}return q;},_preventOverlap:function(r,s,C,t){var w=this.get(e),B=(s===a),z,v,u,y,A,q;if(w&&w.points&&k[s][w.points.join(o)]){v=this._getRegion(w.node);if(v){z=(B)?C.width:C.height;u=(B)?v.left:v.top;y=(B)?v.right:v.bottom;A=(B)?v.left-t.left:v.top-t.top;q=(B)?t.right-v.right:t.bottom-v.bottom;}if(r>u){if(q<z&&A>z){r=u-z;}}else{if(A<z&&q>z){r=y;}}}return r;},_bindUIPosConstrained:function(){this.after(b,this._afterConstrainChange);this._enableConstraints(this.get(f));},_afterConstrainChange:function(q){this._enableConstraints(q.newVal);},_enableConstraints:function(q){if(q){this.constrain();this._cxyHandle=this._cxyHandle||this.on(d,this._constrainOnXYChange);}else{if(this._cxyHandle){this._cxyHandle.detach();this._cxyHandle=null;}}},_constrainOnXYChange:function(q){if(!q.constrained){q.newVal=this.getConstrainedXY(q.newVal);}},_getRegion:function(q){var r;if(!q){r=this._posNode.get(p);}else{q=j.one(q);if(q){r=q.get(l);}}return r;}};c.WidgetPositionConstrain=h;},"3.5.1",{requires:["widget-position"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("overlay",function(a){a.Overlay=a.Base.create("overlay",a.Widget,[a.WidgetStdMod,a.WidgetPosition,a.WidgetStack,a.WidgetPositionAlign,a.WidgetPositionConstrain]);},"3.5.1",{requires:["widget","widget-stdmod","widget-position","widget-stack","widget-position-align","widget-position-constrain"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-xy",function(b){var a=Number;b.Anim.behaviors.xy={set:function(f,d,i,h,c,g,e){f._node.setXY([e(c,a(i[0]),a(h[0])-a(i[0]),g),e(c,a(i[1]),a(h[1])-a(i[1]),g)]);},get:function(c){return c._node.getXY();}};},"3.5.1",{requires:["anim-base","node-screen"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-easing",function(b){var a={easeNone:function(f,e,h,g){return h*f/g+e;},easeIn:function(f,e,h,g){return h*(f/=g)*f+e;},easeOut:function(f,e,h,g){return -h*(f/=g)*(f-2)+e;},easeBoth:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f+e;}return -h/2*((--f)*(f-2)-1)+e;},easeInStrong:function(f,e,h,g){return h*(f/=g)*f*f*f+e;},easeOutStrong:function(f,e,h,g){return -h*((f=f/g-1)*f*f*f-1)+e;},easeBothStrong:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+e;}return -h/2*((f-=2)*f*f*f-2)+e;},elasticIn:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return -(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;},elasticOut:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return f*Math.pow(2,-10*g)*Math.sin((g*j-h)*(2*Math.PI)/i)+k+e;},elasticBoth:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j/2)===2){return e+k;}if(!i){i=j*(0.3*1.5);}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}if(g<1){return -0.5*(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;}return f*Math.pow(2,-10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i)*0.5+k+e;},backIn:function(f,e,i,h,g){if(g===undefined){g=1.70158;}if(f===h){f-=0.001;}return i*(f/=h)*f*((g+1)*f-g)+e;},backOut:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+e;},backBoth:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+e;}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+e;},bounceIn:function(f,e,h,g){return h-b.Easing.bounceOut(g-f,0,h,g)+e;},bounceOut:function(f,e,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+e;}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+e;}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+e;}}}return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+e;},bounceBoth:function(f,e,h,g){if(f<g/2){return b.Easing.bounceIn(f*2,0,h,g)*0.5+e;}return b.Easing.bounceOut(f*2-g,0,h,g)*0.5+h*0.5+e;}};b.Easing=a;},"3.5.1",{requires:["anim-base"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-modality",function(c){var p="widget",q="renderUI",f="bindUI",k="syncUI",u="boundingBox",m="contentBox",r="visible",e="zIndex",l="Change",i=c.Lang.isBoolean,s=c.ClassNameManager.getClassName,j="maskShow",a="maskHide",t="clickoutside",n="focusoutside",d=(function(){
/*! IS_POSITION_FIXED_SUPPORTED - Juriy Zaytsev (kangax) - http://yura.thinkweb2.com/cft/ */
var y=c.config.doc,w=null,x,v;if(y.createElement){x=y.createElement("div");if(x&&x.style){x.style.position="fixed";x.style.top="10px";v=y.body;if(v&&v.appendChild&&v.removeChild){v.appendChild(x);w=(x.offsetTop===10);v.removeChild(x);}}}return w;}());function o(v){}var h="modal",b="mask",g={modal:s(p,h),mask:s(p,b)};o.ATTRS={maskNode:{getter:"_getMaskNode",readOnly:true},modal:{value:false,validator:i},focusOn:{valueFn:function(){return[{eventName:t},{eventName:n}];},validator:c.Lang.isArray}};o.CLASSES=g;o._GET_MASK=function(){var v=c.one(".yui3-widget-mask")||null,w=c.one("window");if(v){return v;}else{v=c.Node.create("<div></div>");v.addClass(g.mask);if(d){v.setStyles({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",display:"block"});}else{v.setStyles({position:"absolute",width:w.get("winWidth")+"px",height:w.get("winHeight")+"px",top:"0",left:"0",display:"block"});}return v;}};o.STACK=[];o.prototype={initializer:function(){c.after(this._renderUIModal,this,q);c.after(this._syncUIModal,this,k);c.after(this._bindUIModal,this,f);},destructor:function(){this._uiSetHostVisibleModal(false);},_uiHandlesModal:null,_renderUIModal:function(){var v=this.get(u);this._repositionMask(this);v.addClass(g.modal);},_bindUIModal:function(){this.after(r+l,this._afterHostVisibleChangeModal);this.after(e+l,this._afterHostZIndexChangeModal);this.after("focusOnChange",this._afterFocusOnChange);if(!d||(c.UA.ios&&c.UA.ios<5)||(c.UA.android&&c.UA.android<3)){c.one("win").on("scroll",this._resyncMask,this);}},_syncUIModal:function(){this._uiSetHostVisibleModal(this.get(r));this._uiSetHostZIndexModal(this.get(e));},_focus:function(w){var x=this.get(u),v=x.get("tabIndex");x.set("tabIndex",v>=0?v:0);this.focus();},_blur:function(){this.blur();},_getMaskNode:function(){return o._GET_MASK();},_uiSetHostVisibleModal:function(A){var v=o.STACK,y=this.get("maskNode"),z=this.get("modal"),x,w;if(A){c.Array.each(v,function(B){B._detachUIHandlesModal();B._blur();});v.unshift(this);this._repositionMask(this);this._uiSetHostZIndexModal(this.get(e));if(z){y.show();c.later(1,this,"_attachUIHandlesModal");this._focus();}}else{w=c.Array.indexOf(v,this);if(w>=0){v.splice(w,1);}this._detachUIHandlesModal();this._blur();if(v.length){x=v[0];this._repositionMask(x);x._uiSetHostZIndexModal(x.get(e));if(x.get("modal")){c.later(1,x,"_attachUIHandlesModal");x._focus();}}else{if(y.getStyle("display")==="block"){y.hide();}}}},_uiSetHostZIndexModal:function(v){if(this.get("modal")){this.get("maskNode").setStyle(e,v||0);}},_attachUIHandlesModal:function(){if(this._uiHandlesModal||o.STACK[0]!==this){return;}var C=this.get(u),z=this.get("maskNode"),B=this.get("focusOn"),w=c.bind(this._focus,this),x=[],y,v,A;for(y=0,v=B.length;y<v;y++){A={};A.node=B[y].node;A.ev=B[y].eventName;A.keyCode=B[y].keyCode;if(!A.node&&!A.keyCode&&A.ev){x.push(C.on(A.ev,w));}else{if(A.node&&!A.keyCode&&A.ev){x.push(A.node.on(A.ev,w));}else{if(A.node&&A.keyCode&&A.ev){x.push(A.node.on(A.ev,w,A.keyCode));}else{c.Log('focusOn ATTR Error: The event with name "'+A.ev+'" could not be attached.');}}}}if(!d){x.push(c.one("win").on("scroll",c.bind(function(D){z.setStyle("top",z.get("docScrollY"));},this)));}this._uiHandlesModal=x;},_detachUIHandlesModal:function(){c.each(this._uiHandlesModal,function(v){v.detach();});this._uiHandlesModal=null;},_afterHostVisibleChangeModal:function(v){this._uiSetHostVisibleModal(v.newVal);},_afterHostZIndexChangeModal:function(v){this._uiSetHostZIndexModal(v.newVal);},isNested:function(){var w=o.STACK.length,v=(w>1)?true:false;return v;},_repositionMask:function(v){var y=this.get("modal"),x=v.get("modal"),z=this.get("maskNode"),A,w;if(y&&!x){z.remove();this.fire(a);}else{if((!y&&x)||(y&&x)){z.remove();this.fire(a);A=v.get(u);w=A.get("parentNode")||c.one("body");w.insert(z,w.get("firstChild"));this.fire(j);}}},_resyncMask:function(A){var B=A.currentTarget,v=B.get("docScrollX"),C=B.get("docScrollY"),y=B.get("innerWidth")||B.get("winWidth"),z=B.get("innerHeight")||B.get("winHeight"),x=this.get("maskNode");x.setStyles({"top":C+"px","left":v+"px","width":y+"px","height":z+"px"});},_afterFocusOnChange:function(v){this._detachUIHandlesModal();if(this.get(r)){this._attachUIHandlesModal();}}};c.WidgetModality=o;},"3.5.1",{requires:["base-build","event-outside","widget"],skinnable:true});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-autohide",function(a){var o="widgetAutohide",m="autohide",k="clickoutside",c="focusoutside",l="document",e="key",p="esc",f="bindUI",n="syncUI",i="rendered",j="boundingBox",h="visible",d="Change",b=a.ClassNameManager.getClassName;function g(q){a.after(this._bindUIAutohide,this,f);a.after(this._syncUIAutohide,this,n);if(this.get(i)){this._bindUIAutohide();this._syncUIAutohide();}}g.ATTRS={hideOn:{validator:a.Lang.isArray,valueFn:function(){return[{node:a.one(l),eventName:e,keyCode:p}];}}};g.prototype={_uiHandlesAutohide:null,destructor:function(){this._detachUIHandlesAutohide();},_bindUIAutohide:function(){this.after(h+d,this._afterHostVisibleChangeAutohide);this.after("hideOnChange",this._afterHideOnChange);},_syncUIAutohide:function(){this._uiSetHostVisibleAutohide(this.get(h));},_uiSetHostVisibleAutohide:function(q){if(q){a.later(1,this,"_attachUIHandlesAutohide");}else{this._detachUIHandlesAutohide();}},_attachUIHandlesAutohide:function(){if(this._uiHandlesAutohide){return;}var w=this.get(j),u=a.bind(this.hide,this),r=[],q=this,s=this.get("hideOn"),t=0,v={node:undefined,ev:undefined,keyCode:undefined};for(;t<s.length;t++){v.node=s[t].node;v.ev=s[t].eventName;v.keyCode=s[t].keyCode;if(!v.node&&!v.keyCode&&v.ev){r.push(w.on(v.ev,u));}else{if(v.node&&!v.keyCode&&v.ev){r.push(v.node.on(v.ev,u));}else{if(v.node&&v.keyCode&&v.ev){r.push(v.node.on(v.ev,u,v.keyCode));}else{}}}}this._uiHandlesAutohide=r;},_detachUIHandlesAutohide:function(){a.each(this._uiHandlesAutohide,function(q){q.detach();});this._uiHandlesAutohide=null;},_afterHostVisibleChangeAutohide:function(q){this._uiSetHostVisibleAutohide(q.newVal);},_afterHideOnChange:function(q){this._detachUIHandlesAutohide();if(this.get(h)){this._attachUIHandlesAutohide();}}};a.WidgetAutohide=g;},"3.5.1",{requires:["base-build","widget","event-outside","event-key"]});
YUI.add("bn-overlay",function(h){var f="bn-overlay",d;
var c=h.Base.create("WidgetStdModContentSetter",h.Object,[h.WidgetStdMod],{setContent:function(o){var j=null,k=["id","class","data-bntrack","data-bntrack-root"],l,n;
if(o instanceof h.Node){j=o
}else{if(h.Lang.isString(o)&&h.Lang.trim(o).length>0){j=h.Node.create(o)
}}if(j){for(l=0,n=k.length;
l<n;
l++){var m=k[l],p=j.get(m);
if(p){this.get("contentBox").set(m,p)
}}h.Array.each([h.WidgetStdMod.HEADER,h.WidgetStdMod.BODY,h.WidgetStdMod.FOOTER],function(q){var i=j.one("."+h.WidgetStdMod.SECTION_CLASS_NAMES[q])||h.Node.create("<div></div>");
this.setStdModContent(q,i.getContent(),h.WidgetStdMod.REPLACE)
},this);
this.fire("widget:contentUpdate")
}return this
}});
var a=h.Base.create("OverlayDimensionAnimPlugin",h.Plugin.Base,[],{initializer:function(i){var k=i.host,l=k.get("boundingBox"),m=k.get("contentBox"),j={node:l,duration:i.duration||0.2,on:{tween:function(n){k.align()
}}};
this.set("boxDimDiffs.height",l.get("offsetHeight")-m.get("offsetHeight"));
this.set("boxDimDiffs.width",l.get("offsetWidth")-m.get("offsetWidth"));
if(this.get("boxDimDiffs.height")<0){this.set("boxDimDiffs.height",0)
}if(this.get("boxDimDiffs.width")<0){this.set("boxDimDiffs.width",0)
}this.set("animHeight",new h.Anim(j));
this.get("animHeight").on("tween",function(){k._fillHeight()
});
this.set("animWidth",new h.Anim(j));
this.beforeHostMethod("_uiSetDim",this._beforeUiSetDim,this);
this.afterHostMethod("_uiSetStdMod",this._afterUiSetStdMod,this)
},_beforeUiSetDim:function(m,n,k){var j=this.get("host");
if(j.get("rendered")&&j.get("visible")&&!k){var o={},l=m.charAt(0).toUpperCase()+m.slice(1),i=this.get("anim"+l);
if(i.get("running")){i.stop(true)
}o[m]=n;
i.set("to",o);
i.run();
return new h.Do.Prevent("")
}},_afterUiSetStdMod:function(){var j=this.get("fitTimer"),i=this;
if(j){window.clearTimeout(j)
}this.set("fitTimer",window.setTimeout(function(){i.fit();
i.set("fitTimer",null)
},50))
},_fit:function(m){var l=this.get("host"),j=l.get("contentBox"),i=l.getStdModNode(l.get("fillHeight")),k="offset"+m.substring(0,1).toUpperCase()+m.substring(1);
j.setStyle(m,"auto");
j.setStyle("max-"+m,null);
j.setStyle("display","inline-block");
if(i){i.setStyle(m,null)
}l.set(m,j.get(k)+this.get("boxDimDiffs")[m]);
j.setStyle("display",null);
j.setStyle(m,"100%")
},fit:function(){var i=arguments.length===0||h.Array.indexOf(arguments,"height")!==-1,j=h.Array.indexOf(arguments,"width")!==-1;
if(i){this._fit("height")
}if(j){this._fit("width")
}}},{NS:"dimAnim",ATTRS:{boxDimDiffs:{value:{width:0,height:0}},animHeight:{value:null},animWidth:{value:null},fitTimer:{value:null}}});
var e=function(i){h.WidgetModality.call(this,h.mix(i||{},{modal:true}))
};
e.prototype=h.WidgetModality.prototype;
for(d in h.WidgetModality){if(h.WidgetModality.hasOwnProperty(d)){e[d]=h.WidgetModality[d]
}}var g={};
var b=h.Base.create("BNOverlay",h.Overlay,[e,h.WidgetAutohide,c],{_beforeShow:function(){if(!this.get("rendered")){this.plug(h.Plugin.WidgetAnim);
this.anim.get("animShow").on("end",function(){this.fire("widget:show")
},this);
this.anim.get("animHide").on("end",function(){this.fire("widget:hide")
},this);
h.Do.before(function(){var j=this.get("visible");
this.hide();
if(this.anim){this.anim.get("animHide").on("end",this.destroy,this)
}if(j){return new h.Do.Prevent()
}},this,"destroy",this);
this.render(h.one("body"));
var i=this.get("contentBox");
if(i){if(!this.get("height")){this.set("height",i.get("offsetHeight"))
}if(!this.get("width")){this.set("width",i.get("offsetWidth"))
}}this.plug(a);
h.one("window").on("windowresize",function(){this.fit();
this._checkFillHeight(this.get("height"))
},this)
}},_visibleChange:function(){if(b.topOverlay&&b.topOverlay.get("visible")){b.topOverlay.hide()
}b.topOverlay=this
},_checkFillHeight:function(j){var k=h.DOM.winHeight(),i=j>=k&&this.get("contentBox").get("offsetHeight")>=k;
if(i){this.get("contentBox").setStyle("max-height","98%")
}this.set("fillHeight",i?null:"body")
},initializer:function(i){if(this.get("srcNode")){g[this.get("srcNode").get("id").replace(/bn-overlay-/,"")]=this
}this.publish("widget:show");
this.publish("widget:hide");
this.set("originalParent",this.get("srcNode").get("parentNode"));
if(i.visible){this._visibleChange()
}this.on("visibleChange",function(j){if(j.newVal===true){this._visibleChange()
}},this);
h.Do.before(this._beforeShow,this,"show",this)
},fit:function(){if(this.dimAnim){this.align();
this.dimAnim.fit()
}},renderUI:function(){var i=this.get("contentBox"),j=this.get("boundingBox");
j.setAttribute("hidefocus",true);
if(this.get("close")&&!this.get("requireResponse")&&!i.one("span.close.styled-close")){j.insert('<div class="close styled-close"></span>',0)
}if(this.get("visible")){this.fire("widget:show")
}},bindUI:function(){if(!this.get("requireResponse")&&this.get("close")){this.set("hideOn",[{node:h.one("document"),eventName:"key",keyCode:"esc"},{eventName:"clickoutside"}])
}else{this.set("hideOn",[{}])
}this.get("boundingBox").delegate("click",function(i){i.preventDefault();
this.hide()
},".close,.close-overlay",this);
this.get("contentBox").delegate("click",function(i){this.hide()
},".close-continue, .close-overlay-continue",this);
this.on("heightChange",function(j){var i=h.DOM.winHeight();
if(j.newVal>i){j.newVal=i
}this._checkFillHeight(j.newVal)
},this);
h.on("ajax:start",function(j){var i=(this.get("originalParent")||h.one("body")).ancestor(function(k){return k==j.currentTarget.get("srcNode")
},true);
if(i){this.destroy()
}},this);
h.on(["ajax-form:success","ajax-form:error"],function(j){var i=this.get("contentBox"),k=j.currentTarget.formCfg.node.ancestor(function(l){return l==i
},true);
if(k){h.later(25,this.dimAnim,"fit")
}},this)
},syncUI:function(){}},{CSS_PREFIX:f,ATTRS:{fillHeight:{value:"body"},originalParent:{value:null},close:{value:true},visible:{value:false,broadcast:2,lazyAdd:false},render:{value:false},modal:{value:true,validator:h.Lang.isBoolean},centered:{value:true},constrain:{value:false},width:{value:550},requireResponse:{value:false}},HTML_PARSER:{zIndex:function(i){return 10000
}},topOverlay:null,fillTopOverlay:function(j){var i=b.topOverlay;
if(i&&i.get("visible")){i.setContent(j)
}else{(new b({})).on("init",function(){i=this;
this.setContent(j);
h.later(250,this,"show")
})
}return i
},getById:function(i){return g[i]
}});
h.namespace("Shared").BNOverlay=b;
h.namespace("Plugin").OverlayDimensionAnim=a
},"@VERSION@",{requires:["base-build","plugin","event-base","event-custom","event-resize","anim-base","anim-xy","anim-easing","overlay","widget-modality","widget-autohide","widget-anim","yui-throttle","bn-overlay-css"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("swfdetect",function(c){var k=0,i=c.UA,f=c.Lang,n="ShockwaveFlash",b,h,d,o,a;function m(e){return parseInt(e,10);}function g(e){if(f.isNumber(m(e[0]))){i.flashMajor=e[0];}if(f.isNumber(m(e[1]))){i.flashMinor=e[1];}if(f.isNumber(m(e[2]))){i.flashRev=e[2];}}if(i.gecko||i.webkit||i.opera){if((b=navigator.mimeTypes["application/x-shockwave-flash"])){if((h=b.enabledPlugin)){d=h.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split(".");g(d);}}}else{if(i.ie){try{o=new ActiveXObject(n+"."+n+".6");o.AllowScriptAccess="always";}catch(j){if(o!==null){k=6;}}if(k===0){try{a=new ActiveXObject(n+"."+n);d=a.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(",");g(d);}catch(l){}}}}c.SWFDetect={getFlashVersion:function(){return(String(i.flashMajor)+"."+String(i.flashMinor)+"."+String(i.flashRev));},isFlashVersionAtLeast:function(r,t,s){var p=m(i.flashMajor),q=m(i.flashMinor),e=m(i.flashRev);r=m(r||0);t=m(t||0);s=m(s||0);if(r===p){if(t===q){return s<=e;}return t<q;}return r<p;}};},"3.5.1",{requires:["yui-base"]});
YUI.add("video-player",function(e){var d=null;
var c=false;
var a='<div class="bn-video-player-wrapper" >&nbsp;</div>';
var f=null;
var b={"default-default":{width:"608",height:"379",source:"default",padx:20,pady:20,objtemplate:'<object type="application/x-shockwave-flash" id="mediasuite_Appstudio_231743" data="http://appassets.kickstatic.com/compiled%PLAYERID%" width="%WIDTH%" height="%HEIGHT%" ><param name="movie" value="http://appassets.kickstatic.com/compiled%PLAYERID%"> </param><param name="pluginspage" value="http://www.adobe.com/go/getflashplayer"> </param><param name="align" value="middle"> </param><param name="allowscriptAccess" value="always"> </param><param name="quality" value="high"> </param><param name="allowFullScreen" value="true"> </param><param name="wmode" value="transparent"> </param><param name="bgcolor" value="#FFFFFF"> </param><param name="menu" value="false"> </param><param name="FlashVars" value="%FLASHVARS%"></param></object>',html5template:'<video width="%WIDTH%" height="%HEIGHT%" controls autoplay="autoplay"  preload="none"><!-- MP4 must be first for iPad! --><source src="%VIDEOURL%" type="video/mp4" /><!-- WebKit video --></video>'},"ooyala-default":{width:"800",height:"534",padx:20,pady:14,source:"ooyala",objtemplate:"http://player.ooyala.com/player.js?playerId=ooplayerdiv&playerContainerId=ooplayer%ASSETID%&width=%WIDTH%&height=%HEIGHT%&embedCode=%ASSETID%&version=2",pcode:"43Y3Y6G5cQeLfnCyD655LkR7eFC9"},"ooyala-wide":{width:"800",height:"534",padx:14,pady:98,source:"ooyala",objtemplate:"http://player.ooyala.com/player.js?playerId=ooplayerdiv&playerContainerId=ooplayer%ASSETID%&width=%WIDTH%&height=%HEIGHT%&embedCode=%ASSETID%&version=2",pcode:"43Y3Y6G5cQeLfnCyD655LkR7eFC9"},"ooyala-tall":{width:"336",height:"575",padx:14,pady:98,source:"ooyala",objtemplate:"http://player.ooyala.com/player.js?playerId=ooplayerdiv&playerContainerId=ooplayer%ASSETID%&width=%WIDTH%&height=%HEIGHT%&embedCode=%ASSETID%&version=2",pcode:"43Y3Y6G5cQeLfnCyD655LkR7eFC9"}};
e.namespace("Shared").VideoPlayer={_getOverlay:function(){if(d===null){var g=this.width+"px";
if(this.source!==""){g=(parseInt(this.width,10)+20)+"px"
}d=new e.Shared.BNOverlay({bodyContent:a,width:g,height:this.height+"px"});
d.after("widget:hide",function(){d.setStdModContent("body",a,"replace")
});
d.get("contentBox").addClass("bn-video-player-container")
}return d
},initLinks:function(){if(null===f){f=e.delegate("click",this.play,".bn-videos",".bn-video-tile a",this)
}},play:function(g){if(g){g.preventDefault()
}this._loadPlayerPreferences(g.currentTarget);
var h=this._getOverlay();
h.once("widget:show",function(i){h.set("height",(parseInt(this.height,10)+this.pady+4)+"px")
},this);
h.setStdModContent("body",this._getEmbedHTMLSnippet(this.stem,this.assetId),"replace");
h.show()
},_loadPlayerPreferences:function(j){var m=j.getAttribute("data-bn-video-asset-id"),n=j.getAttribute("data-bn-video-stem"),k=j.getAttribute("data-bn-video-source"),l=j.getAttribute("data-bn-video-skin"),i=j.getAttribute("data-bn-video-width"),g=j.getAttribute("data-bn-video-height");
k=(k===null||k==="")?"default":k;
l=(l!==null&&l!=="")?l:"default";
var h=(l!==null&&l!=="")?k+"-"+l:k;
this.assetId=m;
this.source=b[h].source;
this.stem=n;
this.css_prefix=h;
this.padx=b[h].padx;
this.pady=b[h].pady;
this.width=(i===null||i==="")?b[h].width:i;
this.height=(g===null||g==="")?b[h].height:g;
this.skin=l;
this.objtemplate=b[h].objtemplate;
this.html5template=b[h].html5template;
this.pcode=b[h].pcode;
this.stem=n
},_clearStyles:function(g){var h=g.get("boundingBox");
h.removeClass("ooyala-tall");
h.removeClass("ooyala-wide")
},_getEmbedHTMLSnippet:function(k,j){var i="";
var g=this._isHTML5VideoSupported();
var h=this._isVideoCodecSupported();
if(this.source=="ooyala"){i=this._objEmbedOoyalaDigitalPlayer(j)
}else{if(e.SWFDetect.isFlashVersionAtLeast(10,0,0)){i=this._flashEmbedKitDigitalPlayer(k,j)
}else{if(g&&h){if(k){i=this._html5VideoPlayerTag(k,j)
}else{i=this._kitDigitalPlayerIframe(k,j)
}}else{i='<h2>This player requires either Flash or HTML5.</h2><p>Please download <a href="http://get.adobe.com/flashplayer/" alt="Adobe Flash Player" target="_blank">Flash Player</a> or upgrade your browser to support HTML5 H.264 videos.</p>'
}}}return'<div class="bn-video-player-wrapper">'+i+"</div>"
},_flashEmbedKitDigitalPlayer:function(k,i){var g="";
var j="";
var l="&autoPlay=true&revision=1&scaleMODE=letterbox&width="+this.width+"&height="+this.height;
var h="";
if(k){g="/mediasuite_STATIC_3732/AppShell_m97826p2.swf";
h=(k+i);
j="mediaURL="+h+l
}else{g="/mediasuite_3732/AppShell_lu8l0r86.swf";
j="mediaSuiteURL=http://player.multicastmedia.com/ws/get_asset_project/asset/"+i+"/stream/api_f4d84551-2e85-103a-a1ba-00e08655b9fc/apiv_3.5/gft_0/"+i+".xml"+l+"&getEmbed=http://mediasuite.multicastmedia.com/ws/get_appstudio_embed/v1/vodproject/project_uuid/kvv27swx.xml&src=http://api.mediasuite.multicastmedia.com/templates/AppStudio/CustomPlayer/3/7/3732/lu8l0r86/lu8l0r86.json&"
}return this._tokenizeTemplate(this.objtemplate,{WIDTH:this.width,HEIGHT:this.height,PLAYERID:g,FLASHVARS:j})
},_objEmbedOoyalaDigitalPlayer:function(i){var g='<div id="ooplayer'+i+'" class="ooplayer" style="width:'+this.width+"px; height:"+this.height+'px;"></div>';
var h=null;
this._clearStyles(d);
d.get("boundingBox").addClass(this.css_prefix);
d.set("width",(parseInt(this.width,10)+this.padx)+"px");
d.set("height",(parseInt(this.height,10)+this.pady)+"px");
d.before("widget:hide",function(j){if(h){h.destroy()
}});
d.after("widget:show",function(j){h=window.OO.Player.create("ooplayer"+i,i,{autoplay:true})
});
return g
},_kitDigitalPlayerIframe:function(m,l){var h="";
var j="";
var g="";
var i="&autoPlay=true&revision=1&scaleMODE=letterbox&width="+this.width+"&height="+this.height;
var k=encodeURIComponent;
if(m){j="mediaUrl="+(m+l)+i
}else{g="http://player.multicastmedia.com/ws/get_asset_project/asset/"+l+"/stream/api_f4d84551-2e85-103a-a1ba-00e08655b9fc/apiv_3.5/gft_0/"+l+".xml";
j="mediaSuiteURL="+k(g)+i+"&getEmbed="+k("http://mediasuite.multicastmedia.com/ws/get_appstudio_embed/v1/vodproject/project_uuid/kvv27swx.xml")+"&widgetId=lu8l0r86&widgetHost=serve.a-widget.com&src="+k("http://player.multicastmedia.com/ws/get_appstudio_player_json/callback/KickUtils.scriptLoadCallbacks[0]/lu8l0r86.json")
}h='<iframe src="http://serve.a-widget.com/kickFlash/js/compiler/mediasuite/iframe.html?affiliateSiteId=mediasuite_73&'+j+"&referralUrl="+k(window.location.href)+'" height="'+this.height+'" width="'+this.width+'" frameborder="0" scrolling="no"style="border:none;overflow:hidden;width:'+this.width+"px;height:"+this.height+'px"></iframe>';
return h
},_html5VideoPlayerTag:function(i,h){var j="";
var g="";
if(i){g=(i+h);
j=this._tokenizeTemplate(this.html5template,{WIDTH:this.width,HEIGHT:this.height,VIDEOURL:decodeURIComponent(g)})
}return j
},_isHTML5VideoSupported:function(){var g=false;
var h=document.createElement("video");
if(h&&typeof h.canPlayType=="function"){g=true
}return g
},_isVideoCodecSupported:function(){var g=false;
var h=document.createElement("video");
if(h&&typeof h.canPlayType=="function"){if(h.canPlayType('video/mp4; codecs="avc1.42E01E"')||h.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')){g=true
}}return g
},_tokenizeTemplate:function(g,l){var k=g,h=null,j=null;
for(h in l){if(l.hasOwnProperty(h)){j=new RegExp("%"+h+"%","g");
k=k.replace(j,l[h])
}}return k
},stem:"",width:"608",height:"379",padx:"20",pady:"20",css_prefix:"",source:"default",assetId:"",swftemplate:"",objtemplate:"",html5template:"",pcode:""}
},"@VERSION",{requires:["node","bn-overlay","swfdetect"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("jsonp-url",function(d){var a=d.JSONPRequest,c=d.Object.getValue,b=function(){};d.mix(a.prototype,{_pattern:/\bcallback=(.*?)(?=&|$)/i,_template:"callback={callback}",_defaultCallback:function(g){var f=g.match(this._pattern),j=[],h=0,e,k,l;if(f){e=f[1].replace(/\[(['"])(.*?)\1\]/g,function(m,i,n){j[h]=n;return".@"+(h++);}).replace(/\[(\d+)\]/g,function(m,i){j[h]=parseInt(i,10)|0;return".@"+(h++);}).replace(/^\./,"");if(!/[^\w\.\$@]/.test(e)){k=e.split(".");for(h=k.length-1;h>=0;--h){if(k[h].charAt(0)==="@"){k[h]=j[parseInt(k[h].substr(1),10)];}}l=c(d.config.win,k)||c(d,k)||c(d,k.slice(1));}}return l||b;},_format:function(e,g){var h=this._template.replace(/\{callback\}/,g),f;if(this._pattern.test(e)){return e.replace(this._pattern,h);}else{f=e.slice(-1);if(f!=="&"&&f!=="?"){e+=(e.indexOf("?")>-1)?"&":"?";}return e+h;}}},true);},"3.5.1",{requires:["jsonp"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("jsonp",function(c){var b=c.Lang.isFunction;function a(){this._init.apply(this,arguments);}a.prototype={_init:function(d,f){this.url=d;this._requests={};this._timeouts={};f=(b(f))?{on:{success:f}}:f||{};var e=f.on||{};if(!e.success){e.success=this._defaultCallback(d,f);}this._config=c.merge({context:this,args:[],format:this._format,allowCache:false},f,{on:e});},_defaultCallback:function(){},send:function(){var d=this,g=c.Array(arguments,0,true),f=d._config,h=d._proxy||c.guid(),e;if(f.allowCache){d._proxy=h;}if(d._requests[h]===undefined){d._requests[h]=0;}if(d._timeouts[h]===undefined){d._timeouts[h]=0;}d._requests[h]++;g.unshift(d.url,"YUI.Env.JSONP."+h);e=f.format.apply(d,g);if(!f.on.success){return d;}function i(k,j){return(b(k))?function(n){var m=true,l="_requests";if(j){++d._timeouts[h];--d._requests[h];}else{if(!d._requests[h]){m=false;l="_timeouts";}--d[l][h];}if(!d._requests[h]&&!d._timeouts[h]){delete YUI.Env.JSONP[h];}if(m){k.apply(f.context,[n].concat(f.args));}}:null;}YUI.Env.JSONP[h]=i(f.on.success);c.Get.script(e,{onFailure:i(f.on.failure),onTimeout:i(f.on.timeout,true),timeout:f.timeout,charset:f.charset,attributes:f.attributes});return d;},_format:function(d,e){return d.replace(/\{callback\}/,e);}};c.JSONPRequest=a;c.jsonp=function(d,f){var e=new c.JSONPRequest(d,f);return e.send.apply(e,c.Array(arguments,2,true));};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"3.5.1",{requires:["get","oop"]});
YUI.add("async-semaphore",function(b){var a="AsyncSemaphore";
b.namespace("Util")[a]=b.Base.create(a,b.Base,[b.EventTarget],{acquire:function(){this.semaphoreCount++;
return this
},release:function(){this.semaphoreCount--;
this.checkAvailability();
return this
},start:function(){this.ready=true;
this.checkAvailability();
return this
},stop:function(){this.ready=false;
return this
},checkAvailability:function(){if(this.semaphoreCount===0&&this.ready===true){this.fire("asem:available");
return true
}return false
},initializer:function(c){this.semaphoreCount=(c&&c.startCount>0)?c.startCount:0;
this.ready=(c&&c.startReady===true)?true:false;
this.publish("asem:available",{emitFacade:true,fireOnce:true});
this.on("asem:acquire",this.acquire);
this.on("asem:release",this.relase);
this.on("asem:start",this.start);
this.on("asem:stop",this.stop)
}},{})
},"@VERSION",{requires:["base-build","event-custom-base","event-custom-complex"]});
YUI.add("util-navigation",function(a){a.namespace("util")["navigation"]={redirectToUrl:function(b){window.location.href=b;
return b
},process:function(b){if(b.clientSideNavigation&&b.clientSideNavigation.redirectUrl){return this.redirectToUrl(b.clientSideNavigation.redirectUrl)
}else{return false
}}}
},"@VERSION",{});
YUI.add("util-widget",function(a){a.namespace("util")["widget"]={getName:function(b){if(b&&b.get){return b.getAttribute("data-bn-widget-name")
}return null
},getID:function(b){if(b&&b.get){return b.getAttribute("id")
}return null
},isAnimated:function(b){return b.hasClass("animated")
}}
},"@VERSION",["node"]);
YUI.add("ajax-updater",function(d){var c={},a="ajax:autoUpdate";
d.publish("fiveFinger:update",{emitFacade:true,broadcast:2});
d.publish(a,{emitFacade:true,broadcast:2});
d.namespace("Ajax").AutoUpdate=function(e){if(e){d.fire(a,{type:e})
}};
d.namespace("Ajax").UpdaterPlugin=d.Base.create("UpdaterPlugin",d.Plugin.Base,[],{initializer:function(e){var f,g;
this.host=e.host;
if(!this.get("defaultParams").widget&&e.host.get("id")){this.set("defaultParams.widget",e.host.get("id"))
}this._bindEvents();
if(this.get("autoUpdateOn")){f=e.host.getAttribute("id");
g=this.get("autoUpdateOn");
d.on(a,function(h){if(d.Lang.isString(g)&&(g==h.type)){d.log("Auto-update "+f+" (trigger: "+h.type+")","info","Ajax.UpdaterPlugin");
this.update()
}else{if(d.Lang.isArray(g)&&(d.Array.indexOf(g,h.type)!=-1)){d.log("Auto-update "+f+" (trigger: "+h.type+")","info","Ajax.UpdaterPlugin");
this.update()
}}},this)
}},_bindEvents:function(){this.publish("ajax:updated",{emitFacade:true,broadcast:2});
this.publish("ajax:failure",{emitFacade:true,broadcast:2});
this.publish("ajax:start",{emitFacade:true,broadcast:2});
this.publish("ajax:end",{emitFacade:true,broadcast:2});
this.on("ajax:start",function(){if(!this.host.hasClass("suppress-ajax-loading")){this.host.addClass("ajax-loading")
}},this);
this.after(["ajax:updated","ajax:failure"],function(){this.host.removeClass("ajax-loading");
this.host.removeClass("suppress-ajax-loading")
},this);
d.on("fiveFinger:update",function(f){if(f.widgetID==d.util.widget.getID(this.host)){this.renderResponse(f.responseObject).on("asem:available",function(){this.fire("ajax:updated");
try{d.one("window").simulate("scroll")
}catch(g){}},this)
}},this)
},renderResponse:function(e){var g=new d.Util.AsyncSemaphore(),f=new d.Util.AsyncSemaphore();
if(e.jsExternal&&e.jsExternal.length>0){g.acquire();
d.Get.script(e.jsExternal,{context:g,onEnd:g.release})
}if(e.cssExternal&&e.cssExternal.length>0){g.acquire();
if(d.one("link[href="+e.cssExternal+"]")){g.release()
}else{d.Get.css(e.cssExternal,{context:g,onEnd:g.release,onTimeout:g.release,timeout:1500})
}}f.acquire();
g.on("asem:available",function(h){d.BN.Lang.Dom.handleInlineCss(e.cssInline);
this.host.setContent(e.html);
d.BN.Lang.Dom.handleInlineJs(e.jsInline);
f.start().release()
},this);
g.start();
return f
},_queueWidgetFireUpdateAll:function(j,h,e){var g,f,i=this;
if((typeof e==="undefined")||j==0){this.set("requestUrl",h);
this._updateAll(h,e);
return
}g=h.replace(/widget=[^&]*&{0,1}/gi,"");
g=g.replace(/[?]&/,"?");
g=g.replace(/[?&]$/,"");
if(typeof c[g]==="undefined"){if(this.host.getAttribute("id")){c[g]=[this.host.getAttribute("id")]
}setTimeout(function(){f=g+"";
if(c[g]){f=f+(g.indexOf("?")===-1?"?":"&")+"widget="+c[g].join("&widget=");
delete c[g]
}i.set("requestUrl",h);
i._updateAll(f)
},j)
}else{c[g].push(this.host.getAttribute("id"))
}this.fire("ajax:start")
},_updateAll:function(f,e){e=d.merge({context:this,on:{success:function(g){var h;
this.fire("ajax:end");
if(d.util.navigation.process(g)){return
}if(g.html){this.renderResponse(g)
}else{for(h in g){if(g.hasOwnProperty(h)){d.fire("fiveFinger:update",{widgetID:h,responseObject:g[h]})
}}}},failure:function(){this.fire("ajax:end");
this.fire("ajax:failure")
},timeout:function(){this.fire("ajax:end");
this.fire("ajax:failure")
}}},e);
d.jsonp(f,e)
},_getDefaultURL:function(){var f=window.location;
var e=f.protocol+"//"+f.host+f.pathname+f.search;
return e.replace(/errids=[^&]+/,"errids=filtered")
},update:function(){var g=d.Array(arguments,0,true),f=null,j=null,k="",h=this,i=this.get("defaultParams"),e=null;
if(g[0] instanceof d.Node){h.fire("ajax:start");
h.fire("ajax:end");
h.setContent(g[0].getContent());
h.fire("ajax:updated");
return this
}else{if(d.Lang.isString(g[0])){f=g[0];
if(d.Lang.isObject(g[1])){j=g[1]
}if(d.Lang.isObject(g[2])){e=g[2]
}}else{if(d.Lang.isObject(g[0])){j=g[0]
}}}f=f||this._getDefaultURL();
if(j){j=d.mix(j,i)
}else{j=i
}k=d.QueryString.stringify(j);
if(k.length>0){f=f+(f.indexOf("?")===-1?"?":"&")+k
}h._queueWidgetFireUpdateAll(50,f,e);
return this
},updateByUrl:function(e){this.update(e)
},updateWithParams:function(e){this.update(e)
}},{NS:"ajax",ATTRS:{autoUpdateOn:{value:null},defaultParams:{value:{}},requestUrl:{value:null}}});
var b=d.namespace("Ajax.UpdaterPluginExtensions");
b.LazyLoader=d.Base.create("LazyLoader",d.Ajax.UpdaterPlugin,[],{initializer:function(e){d.after("domready",function(){this.update()
},this)
}},{NS:"ajax"});
b.Loader=d.Base.create("Loader",d.Ajax.UpdaterPlugin,[],{initializer:function(f){var k=this.get("host"),e=f.triggerName||d.util.widget.getName(k),j=["load","close","reload"],h;
this.set("triggerName",e);
for(h=0,ii=j.length;
h<ii;
h++){var g=j[h];
d.publish("ajax-"+g+":"+e,{emitFacade:true,broadcast:2});
d.on("ajax-"+g+":"+e,this[g],this);
if(f.triggerList&&f.triggerList[g]){d.Array.each(f.triggerList[g],function(i){d.on(i,this[g],this)
},this)
}}},load:function(g){var f=this.get("host");
g=g||{};
if(f&&f.getDOMNode()&&!f.hasClass(this.constructor.STRINGS.loadedClass)){this.update(g.params).once("ajax:updated",function(h){f.addClass(this.constructor.STRINGS.loadedClass)
},this)
}return this
},close:function(g){var f=this.get("host");
if(f&&f.getDOMNode()&&f.hasClass(this.constructor.STRINGS.loadedClass)){f.removeClass(this.constructor.STRINGS.loadedClass);
f.empty()
}return this
},reload:function(f){this.close(f);
this.load(f);
return this
}},{NS:"ajax",ATTRS:{triggerName:{value:null}},STRINGS:{loadedClass:"ajax-loaded",unloadingAnimClass:"ajax-unloading"}})
},"@VERSION@",{requires:["base","node","plugin","widget-base","event-custom","querystring-stringify-simple","get","jsonp-url","async-semaphore","lang-dom","util-navigation","util-widget","node-event-simulate"]});
YUI.add("bnutil-json",function(a){a.namespace("BNUtil")["JSON"]={parse:function(b){try{return a.JSON.parse(b)
}catch(c){a.log(c);
return null
}},stringify:function(b){try{return a.JSON.stringify(b)
}catch(c){a.log(c);
return null
}}}
},"@VERSION",{requries:["json-parse","json-stringify"]});
YUI.add("render-errors",function(e){var d=".styledinput-display, label, input, textarea",c=e.namespace("Errors"),b=".error-box",a="errors:displayAjaxErrors";
c.ErrorLinkPopupPlugin=e.Base.create("ErrorLinkPopupPlugin",e.Plugin.Base,[],{initializer:function(f){if(f&&f.host){this.set("host",f.host);
this.bindUI()
}},_openLinkInPopup:function(f){f.preventDefault();
window.open(f.target.get("href"),"popup","width=700, height=500")
},bindUI:function(){var f=this.get("host");
f.delegate("click",this._openLinkInPopup,"a.popup-link",this)
}},{NS:"errorLinkPopup"});
c.DisplayErrors=e.Base.create("Errors",e.Plugin.Base,[],{findErrorMessageContainerNode:function(){var f=this.node.one(b);
if(!f){f=this.node.previous(b)
}return f
},wipeErrors:function(){var f=this.findErrorMessageContainerNode();
if(f){f.empty();
f.addClass("hidden")
}this.node.all(d).removeClass("error");
return f
},displayErrors:function(g){var i=this.wipeErrors();
if(g&&g.errors){var f=this.node,j=g.errors,h="";
e.Object.each(j,function(m,l,o){if(m!=""){h+=m+", "
}if(i){i.append("<p>"+m.join("</p><p>")+"</p>")
}var k=f.one('[name="'+l+'"]');
if(!k){k=f.one(".highlight-any-error")
}if(k){k.addClass("error");
var n=k.previous();
if(n){n.addClass("error")
}}},this);
if(h){if(i){i.removeClass("hidden")
}e.fire(a,g.errors)
}i.plug(c.ErrorLinkPopupPlugin)
}},updateErrors:function(f){if(f.responseData){this.displayErrors(f.responseData)
}else{if(f.response){try{var g=e.JSON.parse(f.response);
this.displayErrors(g)
}catch(h){}}}},initializer:function(f){this.publish(a,{emitFacade:true,broadcast:2});
this.node=f.host
},destructor:function(){}},{NS:"formErrors",ATTRS:{}})
});
YUI.add("util-form",function(a){a.namespace("util")["form"]={disableButton:function(b){if(b){b.setAttribute("disabled","true")
}},enableButton:function(b){if(b){b.removeAttribute("disabled")
}},reset:function(b){b.all("form").each(function(c){c.reset()
})
},wipeErrorMessages:function(b){b.empty();
b.addClass("hidden")
},wipeAllErrorMessages:function(b){if(b){if(b.hasClass("error-box")){this.wipeErrorMessages(b)
}else{b.all(".error-box").each(this.wipeErrorMessages,this)
}}},hasErrors:function(b){if((!b)||(b.errors&&!a.Object.isEmpty(b.errors))||(b.status&&typeof b.status.success!=="undefined"&&b.status.success!==true)){return true
}return false
}}
},"@VERSION");
YUI.add("ajax-form",function(a){a.namespace("Ajax")["Form"]=a.Base.create("Form",a.Base,[],{initializer:function(b){this.processConfig(b);
this.publish("ajax-form:start",{fireOnce:true,async:true});
this.publish("ajax-form:end",{fireOnce:true});
this.publish("ajax-form:failure",{fireOnce:true});
this.publish("ajax-form:success",{broadcast:2,fireOnce:true});
this.publish("ajax-form:error",{broadcast:2,fireOnce:true})
},_handleResponse:function(f,b,c){var e=null;
if(b&&b.responseText){e=a.BNUtil.JSON.parse(b.responseText)
}if(e){if(a.util.navigation.process(e)){return
}if(e.html){var d=this.formCfg.container||this.formCfg.node;
d.plug(a.Ajax.UpdaterPlugin);
d.ajax.renderResponse(e).once("asem:available",function(){if(e.widgetOnError===true){this._raiseEvent("ajax-form:error",e)
}else{this._raiseEvent("ajax-form:success",e)
}},this)
}else{if(a.util.form.hasErrors(e)){this._raiseEvent("ajax-form:error",e)
}else{this._raiseEvent("ajax-form:success",e)
}}this.formCfg.node.plug(a.Errors.DisplayErrors);
this.formCfg.node.formErrors.updateErrors({responseData:e})
}},enableButtons:function(){if(this.formCfg.actionButtons){this.formCfg.actionButtons.each(a.util.form.enableButton)
}},_handleFailure:function(d,b,c){this._raiseEvent("ajax-form:failure",b)
},_raiseEvent:function(b,c,d){if(d!==false){this.after(b,this.enableButtons)
}this.fire(b,c)
},_handleEnd:function(d,b,c){this._raiseEvent("ajax-form:end",b,false)
},_handleStart:function(d,b,c){this.fire("ajax-form:start");
if(this.formCfg.actionButtons){this.formCfg.actionButtons.each(a.util.form.disableButton)
}},submitForm:function(){if(this.formCfg.node&&this.formCfg.actionURL){var b=a.merge({method:"POST",form:{id:this.formCfg.node,useDisabled:true}},this.formCfg.ioConfig);
return a.io(this.formCfg.actionURL,a.merge({headers:{Accept:"application/json"},on:{start:this._handleStart,success:this._handleResponse,failure:this._handleFailure,end:this._handleEnd},context:this},b))
}else{this._handleFailure("form node undefined")
}},processConfig:function(b){this.formCfg=a.merge({},b);
if(!this.formCfg.node&&this.formCfg.id){this.formCfg.node=a.one("#"+this.formCfg.id)
}if(!this.formCfg.actionURL&&this.formCfg.node){this.formCfg.actionURL=this.formCfg.node.get("action")
}}},{submit:function(c){var b=new a.Ajax.Form(c);
b.submitForm();
return b
},ATTRS:{SERVICE_FAILURE_MESSAGE:{value:"There was a problem processing your request"}}})
},"@VERSION",{requires:["node","base","io-base","io-form","event-custom","bnutil-json","render-errors","ajax-updater","util-navigation","util-form"]});
YUI.add("bn-event-links",function(b){var a="";
b.namespace("Util").EventLinksPlugin=b.Base.create("EventLinksPlugin",b.Plugin.Base,[],{initializer:function(c){this.srcNode=c.host;
this.eventSubscribeHandle=this.srcNode.on("click",this.fireEvent,this)
},fireEvent:function(g){g.preventDefault();
if(g.target){var c=g.target.get("href");
if(c){var d=c.indexOf("#");
if(d>0){var f=g.target.getAttribute("data-bn-event-link-data");
b.Array.each(c.substr(d+1).split("|"),function(i,h,e){b.fire(i,f)
},this)
}}}},destructor:function(){this.eventSubscribeHandle.detach()
}},{NS:"bneventlinks",ATTRS:{}})
},"@VERSION@",{requires:["node","event-base","plugin"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
(function(){var b,f=YUI.Env,d=YUI.config,g=d.doc,c=g&&g.documentElement,e="onreadystatechange",a=d.pollInterval||40;if(c.doScroll&&!f._ieready){f._ieready=function(){f._ready();};
/*! DOMReady: based on work by: Dean Edwards/John Resig/Matthias Miller/Diego Perini */
if(self!==self.top){b=function(){if(g.readyState=="complete"){f.remove(g,e,b);f.ieready();}};f.add(g,e,b);}else{f._dri=setInterval(function(){try{c.doScroll("left");clearInterval(f._dri);f._dri=null;f._ieready();}catch(h){}},a);}}})();YUI.add("event-base-ie",function(c){function h(){c.DOM2EventFacade.apply(this,arguments);}function i(n){var l=c.config.doc.createEventObject(n),m=i.prototype;l.hasOwnProperty=function(){return true;};l.init=m.init;l.halt=m.halt;l.preventDefault=m.preventDefault;l.stopPropagation=m.stopPropagation;l.stopImmediatePropagation=m.stopImmediatePropagation;c.DOM2EventFacade.apply(l,arguments);return l;}var a=c.config.doc&&c.config.doc.implementation,b=c.config.lazyEventFacade,j={0:1,4:2,2:3},d={mouseout:"toElement",mouseover:"fromElement"},k=c.DOM2EventFacade.resolve,f={init:function(){h.superclass.init.apply(this,arguments);var o=this._event,m,r,p,l,q,n;this.target=k(o.srcElement);if(("clientX" in o)&&(!m)&&(0!==m)){m=o.clientX;r=o.clientY;p=c.config.doc;l=p.body;q=p.documentElement;m+=(q.scrollLeft||(l&&l.scrollLeft)||0);r+=(q.scrollTop||(l&&l.scrollTop)||0);this.pageX=m;this.pageY=r;}if(o.type=="mouseout"){n=o.toElement;}else{if(o.type=="mouseover"){n=o.fromElement;}}this.relatedTarget=k(n||o.relatedTarget);this.which=this.button=o.keyCode||j[o.button]||o.button;},stopPropagation:function(){this._event.cancelBubble=true;this._wrapper.stopped=1;this.stopped=1;},stopImmediatePropagation:function(){this.stopPropagation();this._wrapper.stopped=2;this.stopped=2;},preventDefault:function(e){this._event.returnValue=e||false;this._wrapper.prevented=1;this.prevented=1;}};c.extend(h,c.DOM2EventFacade,f);c.extend(i,c.DOM2EventFacade,f);i.prototype.init=function(){var l=this._event,m=this._wrapper.overrides,p=i._define,o=i._lazyProperties,n;this.altKey=l.altKey;this.ctrlKey=l.ctrlKey;this.metaKey=l.metaKey;this.shiftKey=l.shiftKey;this.type=(m&&m.type)||l.type;this.clientX=l.clientX;this.clientY=l.clientY;this.keyCode=this.charCode=l.keyCode;this.which=this.button=l.keyCode||j[l.button]||l.button;for(n in o){if(o.hasOwnProperty(n)){p(this,n,o[n]);}}if(this._touch){this._touch(l,this._currentTarget,this._wrapper);}};i._lazyProperties={target:function(){return k(this._event.srcElement);},relatedTarget:function(){var m=this._event,l=d[m.type]||"relatedTarget";return k(m[l]||m.relatedTarget);},currentTarget:function(){return k(this._currentTarget);},wheelDelta:function(){var l=this._event;if(l.type==="mousewheel"||l.type==="DOMMouseScroll"){return(l.detail)?(l.detail*-1):Math.round(l.wheelDelta/80)||((l.wheelDelta<0)?-1:1);}},pageX:function(){var n=this._event,p=n.pageX,m,o,l;if(p===undefined){m=c.config.doc;o=m.body&&m.body.scrollLeft;l=m.documentElement.scrollLeft;p=n.clientX+(l||o||0);}return p;},pageY:function(){var n=this._event,p=n.pageY,m,o,l;if(p===undefined){m=c.config.doc;o=m.body&&m.body.scrollTop;l=m.documentElement.scrollTop;p=n.clientY+(l||o||0);}return p;}};i._define=function(m,n,e){function l(o){var p=(arguments.length)?o:e.call(this);delete m[n];Object.defineProperty(m,n,{value:p,configurable:true,writable:true});return p;}Object.defineProperty(m,n,{get:l,set:l,configurable:true});};if(a&&(!a.hasFeature("Events","2.0"))){if(b){try{Object.defineProperty(c.config.doc.createEventObject(),"z",{});}catch(g){b=false;}}c.DOMEventFacade=(b)?i:h;}},"3.5.1",{after:["event-base"],requires:["node-base"]});
YUI.add("account-signin-event",function(b){var a=b.namespace("Account");
a.SIGNED_IN="signin:signedIn";
a.NOT_SIGNED_IN="signin:notSignedIn";
a.FORGOT_PASSWORD="signin:forgotPassword";
a.CREATE_ACCOUNT="signin:createAccount";
a.SIGNIN_STATUS_CHANGE="signin:statusChange";
a.SIGNED_OUT="signin:signedOut";
a.CLOSE_SIGNIN_REGISTRATION="signin:close";
a.SIGNIN_MESSAGE_NAME="bn-signin";
a.SignInEvent=b.Base.create("SignInEvent",b.Base,[b.EventTarget],{initializer:function(d){var c={fireOnce:true,emitFacade:false,broadcast:1};
this.publish(a.SIGNED_IN,c);
this.publish(a.NOT_SIGNED_IN,c);
this.publish(a.SIGNED_OUT,c);
this.publish(a.FORGOT_PASSWORD,c);
this.publish(a.CREATE_ACCOUNT,c);
this.publish(a.SIGNIN_STATUS_CHANGE,{fireOnce:false,broadcast:1})
},process:function(c,d){this.fire(c,d)
},signedIn:function(c){this.process(a.SIGNED_IN,c)
},notSignedIn:function(c){this.process(a.NOT_SIGNED_IN,c)
},signedOut:function(c){this.process(a.SIGNED_OUT,c)
},createAccount:function(c){this.process(a.CREATE_ACCOUNT,c)
},forgotPassword:function(c){this.process(a.FORGOT_PASSWORD,c)
},statusChanged:function(c){this.process(a.SIGNIN_STATUS_CHANGE,c)
}},{})
},"@VERSION",{requires:["event-custom","base-build"]});
YUI.add("account-signin-check",function(b){var a=b.namespace("Account");
a.DEFAULT_SIGNIN_URLS=b.merge({checkUserSignedInUrl:"/signin/check",checkUserSignedInJsonpUrl:"/signin/check/jsonp?callback={callback}",useJSONP:false},a.DEFAULT_SIGNIN_URLS);
a.SignInCheck=b.Base.create("SignInCheck",b.Base,[],{isUserSignedIn:function(c){var f=new a.SignInEvent();
var d=null;
this.set("signinEvent",f);
if(this.get("useJSONP")||a.DEFAULT_SIGNIN_URLS.useJSONP){d=this.get("checkUserSignedInJsonpUrl")||a.DEFAULT_SIGNIN_URLS.checkUserSignedInJsonpUrl;
b.jsonp(d,{on:{success:this._handleSignedInCheckResponse,failure:this._handleSigninCheckFailure},context:this,args:c,allowCache:true})
}else{try{d=this.get("checkUserSignedInUrl")||a.DEFAULT_SIGNIN_URLS.checkUserSignedInUrl;
if(window.location.protocol.indexOf("s")!==-1){d+="/secure"
}b.io(d,{data:{ts:(new Date()).getTime()},sync:true,context:this,on:{complete:this._parseAndHandleResponse,failure:this._handleSigninCheckFailure},"arguments":c})
}catch(g){}}return f
},_parseAndHandleResponse:function(h,c,d){var f=null;
if(c&&c.responseText){try{f=b.JSON.parse(c.responseText)
}catch(g){}}this._handleSignedInCheckResponse(f,d)
},_handleSignedInCheckResponse:function(f,d){var e,c;
e=this.get("signinEvent");
if(e){if(f&&f.isSignedIn&&f.isSignedIn.success===true){e.signedIn();
c=true;
if(d&&d.triggerStatusChange){e.statusChanged()
}}else{this._notSignedIn();
c=false
}this._updateSignedInStatus(c)
}},_handleSigninCheckFailure:function(e,c,d){this._notSignedIn()
},_notSignedIn:function(){var c=this.get("signinEvent");
if(c){c.notSignedIn();
c.on(a.SIGNED_IN,this._updateSignedInStatus,this,true)
}},_updateSignedInStatus:function(d){var c=this.get("signedInStatus");
var e=null;
if(c!==d){this.set("signedInStatus",d);
if(c!==null){e=this.get("signinEvent");
if(e){e.statusChanged()
}}}}},{ATTRS:{checkUserSignedInUrl:{value:null},checkUserSignedInJsonpUrl:{value:null},signedInStatus:{value:null},useJSONP:{value:false}}})
},"@VERSION",{requires:["io-base","account-signin-event","base-build","json-parse","querystring-stringify-simple"]});
YUI.add("communicator-cookie-messenger",function(a){a.namespace("Communication")["CookieMessenger"]=a.Base.create("CookieMessenger",a.Base,[a.EventTarget],{initializer:function(b){if(b){if(b.cookieName){this.set("cookieName",b.cookieName)
}if(b.pollTimeout){this.set("pollTimeout",b.pollTimeout)
}if(b.messageNames){this.set("messageNames",b.messageNames)
}}},listen:function(){if(this.get("messageNames").length===0||this.get("poller")){return
}var b=(new Date()).getTime();
var c=this.get("cookieName");
if(a.Cookie.exists(c)){a.log("SOME OTHER MESSAGING IS ALREADY TAKING PLACE!");
this._check(b);
a.Cookie.remove(c)
}this.set("poller",a.later(this.get("pollInterval"),this,this._check,b,true))
},_check:function(d){var f=false;
var g=this.get("cookieName");
var c=a.Cookie.getSubs(g);
if(c){var b=this.get("messageNames");
var e=a.Array.reject(b,function(h){if(c[h]){this.receive(h,c[h]);
a.Cookie.removeSub(g,h,this._getCookieOptions());
return true
}return false
},this);
if(e.length===0){f=true
}else{if(b.length!==e.length){this.set("messageNames",e)
}}}if(f===true||((new Date()).getTime()-d)>this.get("pollTimeout")){this.stop()
}},receive:function(c,f){var d=f;
try{d=a.JSON.parse(f)
}catch(g){}var b="inter-window-message:"+c;
this.publish(b,{broadcast:1});
this.fire(b,d)
},send:function(c,d){var b=a.JSON.stringify(d);
a.Cookie.setSub(this.get("cookieName"),c,b,this._getCookieOptions())
},stop:function(){var b=this.get("poller");
if(b){b.cancel()
}this.reset("poller")
},_getCookieOptions:function(){return{path:this.get("cookiePath"),domain:this.get("cookieDomain")}
},destructor:function(){this.stop()
}},{ATTRS:{cookieName:{value:"bn-comm"},cookieDomain:{valueFn:function(){return"."+window.location.hostname.split(".").slice(-2).join(".")
}},cookiePath:{value:"/"},pollInterval:{value:200},pollTimeout:{value:300000},poller:{value:null},messageNames:{value:null}}})
},"@VERSION",["base-build","event-custom","cookie","json","yui-later","array-extras"]);
YUI.add("communicator-window-messenger",function(a){a.namespace("Communication")["WindowMessenger"]=a.Base.create("WindowMessenger",a.Base,[a.EventTarget],{initializer:function(b){if(b){if(b.otherWindow){this.addWindow(b.otherWindow)
}if(b.messageNames){this.set("messageNames",b.messageNames)
}}},listen:function(){var b=a.one("window").on("message",function(c){if(c&&c._event){if(c._event.data){this._check(this._parseIncomingMessage(c._event.data))
}}},this);
this.set("listenerHandle",b)
},_check:function(f){var e=false;
if(f&&f.name){var c=f.name;
var b=this.get("messageNames");
var d=a.Array.reject(b,function(g){if(g===c){this.receive(c,f.message);
return true
}else{return false
}},this);
if(d.length===0){e=true
}else{if(b.length!==d.length){this.set("messageNames",d)
}}}if(e){this.stop()
}},_parseIncomingMessage:function(d){var b=d;
if(a.Lang.isString(d)){try{b=a.JSON.parse(d)
}catch(c){}}return b
},receive:function(c,d){var b="inter-window-message:"+c;
this.publish(b,{broadcast:1});
this.fire(b,d)
},send:function(b,c){var d={name:b,message:c};
var g=d;
if(a.UA.gecko<6){g="";
try{g=a.JSON.stringify(d)
}catch(f){}}a.each(this.get("allOtherWindows"),function(e){e.postMessage(g,this.get("safeDomain"))
},this)
},stop:function(){var b=this.get("listenerHandle");
if(b){b.detach()
}},addWindow:function(b){if(b){var c=this.get("allOtherWindows");
if(!c){c=[]
}c.push(b);
this.set("allOtherWindows",c)
}},destructor:function(){this.stop()
}},{ATTRS:{messageNames:{value:null},safeDomain:{value:"*"},listenerHandle:{}}})
},"@VERSION",["base-build","node-base","event-custom","array-extras","json"]);
YUI.add("inter-window-communicator",function(a){a.namespace("Communication")["InterWindowCommunicator"]={isWindowMessageSupported:function(){return((a.UA.ie===0)&&window.postMessage)?true:false
},getMessenger:function(b){var c=null;
if(a.Communication.InterWindowCommunicator.isWindowMessageSupported()){c=new a.Communication.WindowMessenger(b)
}else{c=new a.Communication.CookieMessenger(b)
}return c
}}
},"@VERSION",{requires:["communicator-cookie-messenger","communicator-window-messenger","node-base"]});
YUI.add("account-signin-popup",function(c){var a=c.namespace("Account");
a.DEFAULT_SIGNIN_URLS=c.merge({popupUrl:"/signin/popup"},a.DEFAULT_SIGNIN_URLS);
var b=null;
a.SignInPopup=c.Base.create("SignInPopup",c.Base,[],{initializer:function(d){var e=null;
if(d){if(d.signinEvent){d.signinEvent.before([a.SIGNED_IN,a.FORGOT_PASSWORD,a.CREATE_ACCOUNT,a.CLOSE_SIGNIN_REGISTRATION],this.closePopup,this);
this.set("signinEvent",d.signinEvent)
}if(d.popupUrl){this.set("popupUrl",d.popupUrl)
}if(d.customPopupCfg){e=this.get("popupCfg");
e=c.merge(e,d.customPopupCfg);
this.set("popupCfg",e)
}}},openPopup:function(){var e=null;
var g=this.get("popupCfg"),d="";
c.each(g,function(i,h){d=d+h+"="+g[h]+","
});
d=d.substring(0,d.length-1);
e=window.open(this.get("popupUrl")||a.DEFAULT_SIGNIN_URLS.popupUrl,this.get("popupName"),d);
if(this._hasPopupOpened(e)){e.focus();
var f="inter-window-message:"+a.SIGNIN_MESSAGE_NAME;
if(b){b.detachAll(f);
b.destroy();
b=null
}b=c.Communication.InterWindowCommunicator.getMessenger({otherWindow:e});
b.set("messageNames",[a.SIGNIN_MESSAGE_NAME]);
b.on(f,this._handleMessage,this);
b.listen()
}this.set("popup",e)
},closePopup:function(g){var f=(g&&g.eventName)?g.eventName.replace("signin:",""):null,d;
if(f===null||(typeof a.DEFAULT_PAGE_ACTIONS[f]==="undefined"||a.DEFAULT_PAGE_ACTIONS[f])){d=this.get("popup");
if(d&&!d.closed){d.close()
}}},_hasPopupOpened:function(d){if(!d||d.closed||typeof d=="undefined"||typeof d.closed=="undefined"){return false
}return true
},_handleMessage:function(d){this.get("signinEvent").process(d.eventName,d)
}},{ATTRS:{popupCfg:{value:{scrollbars:"yes",menubar:0,height:440,width:600,resizable:1,toolbar:0,location:0,status:1}},popupUrl:{value:null},popupName:{value:"signinPopup"},popup:{}}})
},"@VERSION",{requires:["base-build","account-signin-event","inter-window-communicator"]});
YUI.add("account-signin-base",function(c){var a="SignIn";
var b=c.namespace("Account");
b[a]=c.Base.create(a,c.Base,[c.EventTarget],{initializer:function(d){this.set("signinCheck",new b.SignInCheck())
},signInUser:function(d){if(!c.Lang.isObject(d,true)){d={}
}var f=this.get("signinCheck");
var e=f.isUserSignedIn(d);
d.signinEvent=e;
e.once(b.NOT_SIGNED_IN,this.openPopup,this,d);
return e
},signOut:function(){var d=new b.SignInEvent();
c.io(this.get("signoutUrl"),{sync:true,context:this,on:{success:function(){d.signedOut();
d.statusChanged()
}}});
return d
},openPopup:function(f,d){if(!c.Lang.isObject(d,true)){d={}
}if(!d.signinEvent){d.signinEvent=new b.SignInEvent()
}var e=new b.SignInPopup(d);
e.openPopup();
return d.signinEvent
}},{ATTRS:{signoutUrl:{value:"/signout"},signinCheck:{value:null}}})
},"@VERSION@",{requires:["base-build","event-custom","cookie","json-stringify","async-semaphore","account-signin-check","account-signin-event","account-signin-popup"]});
YUI.add("account-signin",function(d){var a=d.namespace("Account");
var c=null;
var b=function(){if(!c){c=new d.Account.SignIn()
}return c
};
a.signInUser=function(){var e=b();
return e.signInUser.apply(e,arguments)
};
a.signOut=function(){var e=b();
return e.signOut.apply(e,arguments)
};
a.DEFAULT_PAGE_ACTIONS=a.DEFAULT_PAGE_ACTIONS||{};
a.setDefaultPageActions=function(e){a.DEFAULT_PAGE_ACTIONS=d.merge(a.DEFAULT_PAGE_ACTIONS,e);
return a.DEFAULT_PAGE_ACTIONS
};
a.DEFAULT_SIGNIN_URLS=a.DEFAULT_SIGNIN_URLS||{};
a.setDefaultSignInUrls=function(e){var f={};
if(e){a.DEFAULT_SIGNIN_URLS=d.merge(a.DEFAULT_SIGNIN_URLS,e);
d.each(e,function(h,g){f[g.replace(/Url$/,"")]=(h)?true:false
});
a.setDefaultPageActions(f)
}return a.DEFAULT_SIGNIN_URLS
}
},"@VERSION",{requires:["account-signin-base"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("substitute",function(c){var g=c.Lang,e="dump",h=" ",b="{",i="}",j=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,d=/\{RBRACE\}/g,f=function(B,m,u,l){var r,q,p,z,y,A,x=[],n,t,w=B.length;for(;;){r=B.lastIndexOf(b,w);if(r<0){break;}q=B.indexOf(i,r);if(r+1>=q){break;}n=B.substring(r+1,q);z=n;A=null;p=z.indexOf(h);if(p>-1){A=z.substring(p+1);z=z.substring(0,p);}y=m[z];if(u){y=u(z,y,A);}if(g.isObject(y)){if(!c.dump){y=y.toString();}else{if(g.isArray(y)){y=c.dump(y,parseInt(A,10));}else{A=A||"";t=A.indexOf(e);if(t>-1){A=A.substring(4);}if(y.toString===Object.prototype.toString||t>-1){y=c.dump(y,parseInt(A,10));}else{y=y.toString();}}}}else{if(g.isUndefined(y)){y="~-"+x.length+"-~";x.push(n);}}B=B.substring(0,r)+y+B.substring(q+1);if(!l){w=r-1;}}return B.replace(j,function(s,o,k){return b+x[parseInt(k,10)]+i;}).replace(a,b).replace(d,i);};c.substitute=f;g.substitute=f;},"3.5.1",{optional:["dump"],requires:["yui-base"]});
YUI.add("pen-name-overlay",function(d){var b=function(f){var e=f||false;
this.checkPenName={endpoint:"/reviews/checkpenname?penname={penname}",verb:"GET"};
this.setPenName={endpoint:"/reviews/setpenname?penname={penname}",verb:"GET"};
this.io={cfg:{headers:{"Content-Type":"application/json; charset=UTF-8"},timeout:5000}}
};
b.prototype={check:function(e,h,g){var i,f;
i=d.substitute(this.checkPenName.endpoint,{penname:e});
f=d.merge(this.cfg,{method:this.checkPenName.verb,on:h,context:g});
d.log("Request: "+i,"info","PenNameIO");
d.io(i,f)
},set:function(e,h,g){var i,f;
i=d.substitute(this.setPenName.endpoint,{penname:e});
f=d.merge(this.cfg,{method:this.setPenName.verb,on:h,context:g});
d.log("Request: "+i,"info","PenNameIO");
if(!this.isTestMode){d.io(i,f)
}}};
var a=function(f,e){this.PenNameIO=f;
this.currentPanel="createAPenName-check";
this.currentPenName="";
this.currentFlow="penName";
this.overlayName="pen-name-overlay";
this.overlayID=e;
this.rootNode=null;
this.errorNode=null;
this.overlay=null;
d.on("contentready",function(){this.init()
},this.overlayID,this)
};
a.NAME="PenNameOverlay";
a.prototype={init:function(){var g=this;
this.overlay=d.Shared.BNOverlay.getById("pen-name-overlay");
this.rootNode=d.one(this.overlayID);
this.errorNode=d.one("#createAPenName-errors");
d.publish("penname:execute",{broadcast:2});
d.publish("penname:success",{broadcast:2});
d.publish("penname:set",{broadcast:2});
d.on("penname:execute",function(l){var k=g.hasPenName();
d.log("penname:execute [isAnonymous="+l.isAnonymous+", hasPenName="+k+"]","info",a.NAME);
if(k||l.isAnonymous){d.fire("penname:success",{penName:g.currentPenName,isAnonymous:l.isAnonymous,type:l.type});
return
}g.currentFlow=l.type;
g.reset();
g.overlay.show()
});
d.on("penname:set",function(){d.log("penname:set","info",a.NAME);
var k=this.currentPenName;
var l={};
g.PenNameIO.set(k,{success:function(p,n,m){d.log("penname:set SUCCESS","info",a.NAME);
l=d.JSON.parse(n.response||n.responseText);
l=l.penname;
if(l.success){d.one("#createAPenName-continue .penNameAttempted").setContent(k);
this.showPanel("createAPenName-continue")
}else{d.fire("penname:unavailable",l)
}},failure:function(p,n,m){d.log(d.JSON.parse(n.response||n.responseText),"info",a.NAME);
d.log("penname:set FAILURE","info",a.NAME)
}},this)
},this);
d.on("penname:check",function(l){d.log("penname:check","info",a.NAME);
var k,m={},n={};
if(l!==undefined){k=l.penName||d.one("#createAPenNameValue").get("value")
}else{k=d.one("#createAPenNameValue").get("value")
}g.PenNameIO.check(k,{success:function(r,q,p){d.log("penname:check SUCCESS","info",a.NAME);
m=d.JSON.parse(q.response||q.responseText);
n=g.extractErrors(m);
m=m.penname;
m.penName=k;
if(m.success){d.fire("penname:available",m)
}else{if(n.length>0){g.showErrors(n)
}else{d.fire("penname:unavailable",m)
}}},failure:function(r,q,p){d.log(d.JSON.parse(q.response||q.responseText),"warn","SERVICE CALL FAILED");
d.log("penname:check FAILURE","info",a.NAME)
}},this)
},this);
d.on("penname:unavailable",function(n){d.log("penname:unavailable","info",a.NAME);
var m=n.suggestedPenNames,r=n.penName,s=d.one("#penNameRadioTemplate").get("innerHTML"),u=d.one("#penNameRadioSelections"),k=d.Node.create("<div></div>"),t=null,q=null,l=null,p=null,o;
g.currentPenName=r;
u.setContent("");
if(m){for(o=0;
o<m.length;
o++){t=m[o];
q=d.substitute(s,{id:"penName"+o,name:"penNameSelection",value:t,tabIndex:o});
l=d.Node.create(q);
k.appendChild(l)
}}u.appendChild(k).plug(d.StyledInputs.Plugin.Form);
d.one("#createAPenName-unavailable .penNameAttempted").setContent(r);
p=d.one("#penName0");
p.set("checked",true);
g.showPanel("createAPenName-unavailable");
g.overlay.fit()
});
d.on("penname:available",function(l){d.log("penname:available","info",a.NAME);
var k=l.penName;
g.currentPenName=k;
d.one("#createAPenName-available .penNameAttempted").setContent(k);
g.showPanel("createAPenName-available")
});
d.on("penname:check-suggested",function(l){d.log("penname:check-suggested","info",a.NAME);
var k=d.one("#createAPenNameUnavailable .styledradiobutton-selected").next("input").get("value");
if(k==="OTHER"){k=d.one("#createAPenNameOtherField").get("value")
}d.fire("penname:check",{penName:k});
d.log("penname:check-suggested selected="+k,"info",a.NAME)
});
var h=d.one("#createAPenNameBtnCheck");
h.on("click",function(){d.log("createAPenNameBtnCheck:click","info",a.NAME);
h.set("disabled",true);
d.after("penname:check",function(){d.log("after penname:check; remove disabled");
h.set("disabled",false)
});
d.fire("penname:check")
},this);
var e=d.one("#createAPenNameBtnUnavailCheck");
e.on("click",function(){d.log("createAPenNameBtnUnavailCheck:click","info",a.NAME);
e.set("disabled",true);
d.after("penname:check-suggested",function(){d.log("after penname:check-suggested; remove disabled");
e.set("disabled",false)
});
d.fire("penname:check-suggested")
},this);
var f=d.one("#createAPenNameBtnUsePenName");
f.on("click",function(){d.log("createAPenNameBtnUsePenName:click","info",a.NAME);
f.set("disabled",true);
d.after("penname:set",function(){d.log("after penname:set; remove disabled");
f.set("disabled",false)
});
d.fire("penname:set")
},this);
var j=d.one("#createAPenNameBtnContinue");
j.on("click",function(){d.Shared.BNOverlay.getById("pen-name-overlay").hide();
d.fire("penname:success",{penName:this.currentPenName,isAnonymous:false,type:this.currentFlow})
},this);
var i=d.one("#createAPenNameBtnFindDifferent");
i.on("click",function(){d.log("createAPenNameBtnFindDifferent:click","info",a.NAME);
d.one("#createAPenNameValue").set("value","");
this.showPanel("createAPenName-check")
},this);
d.delegate("click",function(k){k.halt();
d.Shared.BNOverlay.getById("pen-name-overlay").hide();
d.fire("penname:success",{penName:this.currentPenName,isAnonymous:true,type:this.currentFlow})
},"body",".createAPenNameAnonLink",this);
d.log("CreatePenName initialized","info",a.NAME)
},hasPenName:function(){this.currentPenName=d.one("#usersPenNameValue").get("value");
if(d.Lang.isValue(this.currentPenName)&&this.currentPenName!==""){return true
}return false
},showPanel:function(e){this.hideErrors();
d.one("#"+this.currentPanel).toggleClass("hide");
d.one("#"+e).toggleClass("hide");
this.currentPanel=e
},reset:function(){this.showPanel("createAPenName-check");
this.hideErrors();
this.overlay.fit()
},extractErrors:function(e){return(e.errors)?e.errors.global:[]
},showErrors:function(h){var g="",f,e;
for(f=0,e=h.length;
f<e;
f++){g+="<p>"+h[f]+"</p>"
}this.errorNode.setContent(g);
this.errorNode.removeClass("hidden");
if(this.overlay.get("visible")){this.overlay.fit()
}},hideErrors:function(){this.errorNode.addClass("hidden");
if(this.overlay.get("visible")){this.overlay.fit()
}}};
var c=d.namespace("PenName");
c.Overlay=a;
c.IO=b;
d.log("Loaded","info",a.NAME)
},"@VERSION@",{requires:["event-custom","event-delegate","ajax-updater","account-signin","io-form","node","substitute","json-parse","bn-overlay"]});
YUI.add("bag-updater",function(b){var a="bag:stale";
b.publish(a,{emitFacade:true,broadcast:2});
b.namespace("Bag").Stale=function(){b.fire(a)
};
b.namespace("Bag").ActionAttribute="data-bn-bag-action";
b.namespace("Bag").ScrollParameter={scrollTo:"#static-sub-head-1"};
b.namespace("Bag").UpdaterPlugin=b.Base.create("UpdaterPlugin",b.Plugin.Base,[],{initializer:function(c){b.on(a,function(f){var d=this.get("onStale");
if(typeof d==="function"){d.call(this)
}else{if(c.host&&c.host.ajax&&c.host.ajax.update&&(typeof c.host.ajax.update==="function")){c.host.ajax.update()
}}},this)
},stale:function(){b.Bag.Stale()
}},{NS:"bag",ATTRS:{onStale:{value:null}}})
},"@VERSION@",{requires:["ajax-updater","base-build","node","plugin","widget-base","event-custom"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-mousewheel",function(c){var b="DOMMouseScroll",a=function(e){var d=c.Array(e,0,true),f;if(c.UA.gecko){d[0]=b;f=c.config.win;}else{f=c.config.doc;}if(d.length<3){d[2]=f;}else{d.splice(2,0,f);}return d;};c.Env.evt.plugins.mousewheel={on:function(){return c.Event._attach(a(arguments));},detach:function(){return c.Event.detach.apply(c.Event,a(arguments));}};},"3.5.1",{requires:["node-base"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-touch",function(d){var c="scale",a="rotation",b="identifier";d.DOMEventFacade.prototype._touch=function(n,m,o){var g,f,h,k,j;if(n.touches){this.touches=[];j={};for(g=0,f=n.touches.length;g<f;++g){k=n.touches[g];j[d.stamp(k)]=this.touches[g]=new d.DOMEventFacade(k,m,o);}}if(n.targetTouches){this.targetTouches=[];for(g=0,f=n.targetTouches.length;g<f;++g){k=n.targetTouches[g];h=j&&j[d.stamp(k,true)];this.targetTouches[g]=h||new d.DOMEventFacade(k,m,o);}}if(n.changedTouches){this.changedTouches=[];for(g=0,f=n.changedTouches.length;g<f;++g){k=n.changedTouches[g];h=j&&j[d.stamp(k,true)];this.changedTouches[g]=h||new d.DOMEventFacade(k,m,o);}}if(c in n){this[c]=n[c];}if(a in n){this[a]=n[a];}if(b in n){this[b]=n[b];}};if(d.Node.DOM_EVENTS){d.mix(d.Node.DOM_EVENTS,{touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1});}},"3.5.1",{requires:["node-base"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-move",function(e){var j=((e.config.win&&("ontouchstart" in e.config.win))&&!(e.UA.chrome&&e.UA.chrome<6))?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},x="start",C="move",h="end",l="gesture"+C,a=l+h,i=l+x,B="_msh",m="_mh",w="_meh",r="_dmsh",o="_dmh",c="_dmeh",g="_ms",s="_m",z="minTime",t="minDistance",u="preventDefault",b="button",v="ownerDocument",n="currentTarget",p="target",q="nodeType",k=function(H,F,G){var D=(G)?4:3,E=(F.length>D)?e.merge(F.splice(D,1)[0]):{};if(!(u in E)){E[u]=H.PREVENT_DEFAULT;}return E;},f=function(E,D){return D._extra.root||(E.get(q)===9)?E:E.get(v);},y=function(D,F,E){D.pageX=F.pageX;D.pageY=F.pageY;D.screenX=F.screenX;D.screenY=F.screenY;D.clientX=F.clientX;D.clientY=F.clientY;D[p]=D[p]||F[p];D[n]=D[n]||F[n];D[b]=(E&&E[b])||1;},A=function(E,D){if(D){if(!D.call||D(E)){E.preventDefault();}}},d=e.Event.define;d(i,{on:function(E,D,F){D[B]=E.on(j[x],this._onStart,this,E,D,F);},delegate:function(F,E,H,D){var G=this;E[r]=F.delegate(j[x],function(I){G._onStart(I,F,E,H,true);},D);},detachDelegate:function(F,E,H,D){var G=E[r];if(G){G.detach();E[r]=null;}},detach:function(E,D,G){var F=D[B];if(F){F.detach();D[B]=null;}},processArgs:function(D,E){var F=k(this,D,E);if(!(z in F)){F[z]=this.MIN_TIME;}if(!(t in F)){F[t]=this.MIN_DISTANCE;}return F;},_onStart:function(J,E,P,D,L){if(L){E=J[n];}var F=P._extra,O=true,G=F[z],N=F[t],H=F.button,I=F[u],M=f(E,P),K;if(J.touches){if(J.touches.length===1){y(J,J.touches[0],F);}else{O=false;}}else{O=(H===undefined)||(H===J.button);}if(O){A(J,I);if(G===0||N===0){this._start(J,E,D,F);}else{K=[J.pageX,J.pageY];if(G>0){F._ht=e.later(G,this,this._start,[J,E,D,F]);F._hme=M.on(j[h],e.bind(function(){this._cancel(F);},this));}if(N>0){F._hm=M.on(j[C],e.bind(function(Q){if(Math.abs(Q.pageX-K[0])>N||Math.abs(Q.pageY-K[1])>N){this._start(J,E,D,F);}},this));}}}},_cancel:function(D){if(D._ht){D._ht.cancel();D._ht=null;}if(D._hme){D._hme.detach();D._hme=null;}if(D._hm){D._hm.detach();D._hm=null;}},_start:function(F,D,E,G){if(G){this._cancel(G);}F.type=i;D.setData(g,F);E.fire(F);},MIN_TIME:0,MIN_DISTANCE:0,PREVENT_DEFAULT:false});d(l,{on:function(F,E,H){var D=f(F,E),G=D.on(j[C],this._onMove,this,F,E,H);E[m]=G;},delegate:function(F,E,H,D){var G=this;E[o]=F.delegate(j[C],function(I){G._onMove(I,F,E,H,true);},D);},detach:function(E,D,G){var F=D[m];if(F){F.detach();D[m]=null;}},detachDelegate:function(F,E,H,D){var G=E[o];if(G){G.detach();E[o]=null;}},processArgs:function(D,E){return k(this,D,E);},_onMove:function(J,H,G,I,F){if(F){H=J[n];}var D=G._extra.standAlone||H.getData(g),E=G._extra.preventDefault;if(D){if(J.touches){if(J.touches.length===1){y(J,J.touches[0]);}else{D=false;}}if(D){A(J,E);J.type=l;I.fire(J);}}},PREVENT_DEFAULT:false});d(a,{on:function(G,F,H){var E=f(G,F),D=E.on(j[h],this._onEnd,this,G,F,H);F[w]=D;},delegate:function(F,E,H,D){var G=this;E[c]=F.delegate(j[h],function(I){G._onEnd(I,F,E,H,true);},D);},detachDelegate:function(F,E,H,D){var G=E[c];if(G){G.detach();E[c]=null;}},detach:function(F,E,G){var D=E[w];if(D){D.detach();E[w]=null;}},processArgs:function(D,E){return k(this,D,E);},_onEnd:function(J,H,F,I,E){if(E){H=J[n];}var G=F._extra.standAlone||H.getData(s)||H.getData(g),D=F._extra.preventDefault;if(G){if(J.changedTouches){if(J.changedTouches.length===1){y(J,J.changedTouches[0]);}else{G=false;}}if(G){A(J,D);J.type=a;I.fire(J);H.clearData(g);H.clearData(s);}}},PREVENT_DEFAULT:false});},"3.5.1",{requires:["node-base","event-touch","event-synthetic"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-flick",function(c){var i=((c.config.win&&("ontouchstart" in c.config.win))&&!(c.UA.chrome&&c.UA.chrome<6))?{start:"touchstart",end:"touchend",move:"touchmove"}:{start:"mousedown",end:"mouseup",move:"mousemove"},j="start",m="end",d="move",b="ownerDocument",k="minVelocity",f="minDistance",a="preventDefault",e="_fs",g="_fsh",n="_feh",h="_fmh",l="nodeType";c.Event.define("flick",{on:function(p,o,r){var q=p.on(i[j],this._onStart,this,p,o,r);o[g]=q;},detach:function(q,p,s){var r=p[g],o=p[n];if(r){r.detach();p[g]=null;}if(o){o.detach();p[n]=null;}},processArgs:function(o){var p=(o.length>3)?c.merge(o.splice(3,1)[0]):{};if(!(k in p)){p[k]=this.MIN_VELOCITY;}if(!(f in p)){p[f]=this.MIN_DISTANCE;}if(!(a in p)){p[a]=this.PREVENT_DEFAULT;}return p;},_onStart:function(u,r,x,p){var o=true,w,q,v,t=x._extra.preventDefault,s=u;if(u.touches){o=(u.touches.length===1);u=u.touches[0];}if(o){if(t){if(!t.call||t(u)){s.preventDefault();}}u.flick={time:new Date().getTime()};x[e]=u;w=x[n];v=(r.get(l)===9)?r:r.get(b);if(!w){w=v.on(i[m],c.bind(this._onEnd,this),null,r,x,p);x[n]=w;}x[h]=v.once(i[d],c.bind(this._onMove,this),null,r,x,p);}},_onMove:function(r,p,o,q){var s=o[e];if(s&&s.flick){s.flick.time=new Date().getTime();}},_onEnd:function(C,w,D,s){var A=new Date().getTime(),q=D[e],o=!!q,E=C,r,v,B,y,z,p,x,u,t=D[h];if(t){t.detach();delete D[h];}if(o){if(C.changedTouches){if(C.changedTouches.length===1&&C.touches.length===0){E=C.changedTouches[0];}else{o=false;}}if(o){y=D._extra;B=y[a];if(B){if(!B.call||B(C)){C.preventDefault();}}r=q.flick.time;A=new Date().getTime();v=A-r;z=[E.pageX-q.pageX,E.pageY-q.pageY];if(y.axis){u=y.axis;}else{u=(Math.abs(z[0])>=Math.abs(z[1]))?"x":"y";}p=z[(u==="x")?0:1];x=(v!==0)?p/v:0;if(isFinite(x)&&(Math.abs(p)>=y[f])&&(Math.abs(x)>=y[k])){C.type="flick";C.flick={time:v,distance:p,velocity:x,axis:u,start:q};s.fire(C);}D[e]=null;}}},MIN_VELOCITY:0,MIN_DISTANCE:0,PREVENT_DEFAULT:false});},"3.5.1",{requires:["node-base","event-touch","event-synthetic"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-valuechange",function(e){var c="_valuechange",d="value",a,b={POLL_INTERVAL:50,TIMEOUT:10000,_poll:function(k,g){var i=k._node,j=g.e,f=i&&i.value,l=k._data&&k._data[c],h,m;if(!i||!l){b._stopPolling(k);return;}m=l.prevVal;if(f!==m){l.prevVal=f;h={_event:j,currentTarget:(j&&j.currentTarget)||k,newVal:f,prevVal:m,target:(j&&j.target)||k};e.Object.each(l.notifiers,function(n){n.fire(h);});b._refreshTimeout(k);}},_refreshTimeout:function(g,f){if(!g._node){return;}var h=g.getData(c);b._stopTimeout(g);h.timeout=setTimeout(function(){b._stopPolling(g,f);},b.TIMEOUT);},_startPolling:function(h,g,f){if(!h.test("input,textarea")){return;}var i=h.getData(c);if(!i){i={prevVal:h.get(d)};h.setData(c,i);}i.notifiers||(i.notifiers={});if(i.interval){if(f.force){b._stopPolling(h,g);}else{i.notifiers[e.stamp(g)]=g;return;}}i.notifiers[e.stamp(g)]=g;i.interval=setInterval(function(){b._poll(h,i,f);},b.POLL_INTERVAL);b._refreshTimeout(h,g);},_stopPolling:function(g,f){if(!g._node){return;}var h=g.getData(c)||{};clearInterval(h.interval);delete h.interval;b._stopTimeout(g);if(f){h.notifiers&&delete h.notifiers[e.stamp(f)];}else{h.notifiers={};}},_stopTimeout:function(f){var g=f.getData(c)||{};clearTimeout(g.timeout);delete g.timeout;},_onBlur:function(g,f){b._stopPolling(g.currentTarget,f);},_onFocus:function(h,g){var f=h.currentTarget,i=f.getData(c);if(!i){i={};f.setData(c,i);}i.prevVal=f.get(d);b._startPolling(f,g,{e:h});},_onKeyDown:function(g,f){b._startPolling(g.currentTarget,f,{e:g});},_onKeyUp:function(g,f){if(g.charCode===229||g.charCode===197){b._startPolling(g.currentTarget,f,{e:g,force:true});}},_onMouseDown:function(g,f){b._startPolling(g.currentTarget,f,{e:g});},_onSubscribe:function(k,h,j,g){var l,i,f;i={blur:b._onBlur,focus:b._onFocus,keydown:b._onKeyDown,keyup:b._onKeyUp,mousedown:b._onMouseDown};l=j._valuechange={};if(g){l.delegated=true;l.getNodes=function(){return k.all("input,textarea").filter(g);};l.getNodes().each(function(m){if(!m.getData(c)){m.setData(c,{prevVal:m.get(d)});}});j._handles=e.delegate(i,k,g,null,j);}else{if(!k.test("input,textarea")){return;}if(!k.getData(c)){k.setData(c,{prevVal:k.get(d)});}j._handles=k.on(i,null,null,j);}},_onUnsubscribe:function(h,g,f){var i=f._valuechange;f._handles&&f._handles.detach();if(i.delegated){i.getNodes().each(function(j){b._stopPolling(j,f);});}else{b._stopPolling(h,f);}}};a={detach:b._onUnsubscribe,on:b._onSubscribe,delegate:b._onSubscribe,detachDelegate:b._onUnsubscribe,publishConfig:{emitFacade:true}};e.Event.define("valuechange",a);e.Event.define("valueChange",a);e.ValueChange=b;},"3.5.1",{requires:["event-focus","event-synthetic"]});
YUI.add("product-image-viewer",function(c){var b=null;
var a=1;
c.namespace("Product").ImageViewer=c.Base.create("ProductImageViewer",c.Widget,[],{renderUI:function(){var d=this.get("imageListItems");
if(d){d.each(function(e){var f=e.one("img");
f.setAttribute("src",f.getAttribute("data-bn-src-url"))
});
b=new c.Overlay({srcNode:this.get("srcNode"),zIndex:10,visible:false,render:true,align:{node:this.get("hostNode"),points:["tl","tr"]},plugins:[c.Plugin.WidgetAnim,c.Plugin.OverlayKeepaligned]});
this.get("paginationNode").one(".total").setContent(this.get("imageListItems").size())
}},bindUI:function(){this.get("hostNode").all(".product-expand-view").on("click",this.showOverlay,this);
b.getStdModNode("header").all(".close").on("click",this.hideOverlay,this);
if(this.get("nextButtonNode")){this.get("nextButtonNode").on("click",this.pageImages,this,"n")
}if(this.get("prevButtonNode")){this.get("prevButtonNode").on("click",this.pageImages,this,"p")
}this.handleKeys()
},setImageIndex:function(f,d){var e=parseInt(f,10);
a=c.Lang.isNumber(e)?e:1;
if(d){a+=1
}this.get("paginationNode").one(".index").setContent(a)
},displayIndexedImage:function(){this.get("imageListItems").hide();
this.getIndexedItemNode().show();
this.centerImageVertically();
this.setItemDimensions()
},getIndexedItemNode:function(){return this.get("viewerContentNode").one('li[data-bn-index="'+a+'"]')
},pageImages:function(g,f){g.preventDefault();
var d=this.get("imageListItems").size();
if(f=="n"){this.setImageIndex(a+1<=d?a+1:1)
}else{this.setImageIndex(a-1>0?a-1:d)
}this.displayIndexedImage()
},centerImageVertically:function(){var e=parseInt(this.get("viewerContentNode").getComputedStyle("height"),10);
var f=this.getIndexedItemNode().one("img");
var d=parseInt(f.getComputedStyle("height"),10);
if(c.Lang.isNumber(e)&&c.Lang.isNumber(d)&&d<e){f.setStyle("position","relative");
f.setStyle("top",e/2-d/2)
}},setItemDimensions:function(){var d=this.getIndexedItemNode();
var e=this.get("viewerContentNode");
d.setStyle("height",e.getComputedStyle("height"));
d.setStyle("width",e.getComputedStyle("width"))
},handleKeys:function(){var d=this;
var e=this.get("srcNode");
e.on("key",function(f){if(b.get("visible")){d.hideOverlay(f)
}},"down:27");
e.on("key",function(f){if(b.get("visible")){d.pageImages(f,"n")
}},"down:39");
e.on("key",function(f){if(b.get("visible")){d.pageImages(f,"p")
}},"down:37")
},showOverlay:function(f){f.preventDefault();
var d=f.currentTarget;
this.get("srcNode").removeClass("hide");
b.show();
b.getStdModNode("body").focus();
if(d.hasClass("thumb-action")){this.setImageIndex(d.one("img").getAttribute("src").split("=")[1])
}else{if(d.hasClass("more")){this.setImageIndex(d.one("a").getAttribute("href").split("=")[1],true)
}else{if(d.hasClass("product-image")&&d.hasClass("img")){this.setImageIndex(1)
}}}this.displayIndexedImage()
},hideOverlay:function(d){d.preventDefault();
b.getStdModNode("body").blur();
b.hide();
this.setImageIndex(1)
}},{ATTRS:{render:{value:true},hostNode:{value:null},paginationNode:{value:null},imageListItems:{value:null},viewerContentNode:{value:null},nextButtonNode:{value:null},prevButtonNode:{value:null}},HTML_PARSER:{paginationNode:".product-view-pagination",imageListItems:["li.viewer-image-item"],viewerContentNode:".product-viewer-content",nextButtonNode:".next",prevButtonNode:".previous"}})
},"@VERSION@",{requires:["node","base-build","widget-base","overlay"]});
YUI.add("widget-lazy-render",function(c){var b=[];
function a(){for(var d=0;
d<b.length;
d++){var f=b[d],e=f.get("srcNode");
if(!e.inDoc()){f._removeFromList()
}else{if(c.DOM.inViewportRegion(e._node)){f.render()
}}}}c.one("window").on(["load","windowresize","scroll"],c.throttle(a,25));
c.WidgetLazyRender=c.Base.create("WidgetLazyRender",c.Base,[],{_removeFromList:function(){var d=c.Array.indexOf(b,this);
if(d!==-1){b.splice(d,1)
}},initializer:function(d){if(!this.get("rendered")){b.push(this)
}this.after(["render","destroy"],this._removeFromList,this);
if(d.srcNode){this.addTarget(d.srcNode)
}}},{ATTRS:{render:{valueFn:function(){return YUI.Env.windowLoaded&&c.DOM.inViewportRegion(this.get("srcNode")._node)
}}}})
},"@VERSION@",{requires:["base-build","node","yui-throttle","event-resize"]});
YUI.add("styled-inputs",function(c){var d="boundingBox",q="contentBox",k="displayBox",m="selected",g="display",e=c.namespace("StyledInputs"),a=c.namespace("StyledInputs.Plugin"),n=function(){this.constructor.superclass.bindUI.apply(this,arguments);
c.Do.after(function(){if(arguments&&arguments[0]==="checked"){this.syncUI()
}},this.get(q),"set",this)
},o=function(){var l=this.get(k);
var i=this.get(q);
if(l&&l.getDOMNode()&&i&&i.getDOMNode()){l[i.get("checked")?"addClass":"removeClass"](this.getClassName(m));
return true
}else{return false
}};
e.Base=c.Base.create("Base",c.Widget,[c.WidgetLazyRender],{DISPLAY_TEMPLATE:'<div class="styledinput-display"></div>',initializer:function(i){c.Do.after(this._syncErrors,this,"syncUI",this)
},_syncErrors:function(){var i="error";
if(this.get(q).hasClass(i)){this.get(d).addClass(i);
this.get(k).addClass(i)
}},renderUI:function(){var l=this.get(d),i=this.get(q);
i.addClass(e.Base.CSS_PREFIX+"-content");
if(!this.get(k)){this.set(k,l.insertBefore(this.DISPLAY_TEMPLATE,i).addClass(this.getClassName(g)))
}},bindUI:function(){var i=this.get(q),l=i.get("form")||i.ancestor("form");
i.on(["click","change","keyup"],this.syncUI,this);
if(l){l.on("reset",function(){window.setTimeout(this.syncUI,50)
},this)
}},syncUI:function(){}},{ATTRS:{displayBox:{value:null},render:{value:true}},HTML_PARSER:{displayBox:function(i){return i.previous("."+this.getClassName(g))
}},CSS_PREFIX:"styledinput"});
e.Checkbox=c.Base.create("Checkbox",e.Base,[],{bindUI:n,syncUI:o},{CSS_PREFIX:"styledcheckbox"});
e.Radiobutton=c.Base.create("Radiobutton",e.Base,[],{initializer:function(i){var l=i.srcNode.get("name");
if(!e.Radiobutton._siblingMap[l]){e.Radiobutton._siblingMap[l]=[]
}e.Radiobutton._siblingMap[l].push(this)
},destructor:function(){var i=this.get(q).get("name"),l=e.Radiobutton._siblingMap[i];
l.splice(c.indexOf(l,this),0)
},bindUI:n,syncUI:function(){var i=this.get(q).get("name");
var l=c.Array.filter(e.Radiobutton._siblingMap[i],function(p){return o.apply(p,arguments)
});
e.Radiobutton._siblingMap[i]=l
}},{CSS_PREFIX:"styledradiobutton",_siblingMap:{}});
e.Select=c.Base.create("Select",e.Base,[],{DISPLAY_TEMPLATE:'<div class="styledinput-display"><div class="arrow"></div><div class="text"></div></div>',initializer:function(i){c.Do.after(function(){this.set("textBox",this.get(k).one(".text"))
},this,"renderUI",this)
},syncUI:function(){var i=this.get(q),l=i.all("option").item(i.get("selectedIndex"))||i.one("option");
if(l){this.get("textBox").set("text",l.get("text"))
}}},{ATTRS:{textBox:{value:null}},CSS_PREFIX:"styledselect"});
var r=["Checkbox","Radiobutton","Select"];
var j=function(i){return c.Base.create(i,c.Plugin.Base,[],{initializer:function(l){var p=l.host.get("parentNode"),s=p.hasClass(e[i].CSS_PREFIX)?p:null;
new e[i]({srcNode:l.host,boundingBox:s})
}},{NS:"styled"})
};
for(var h=0,f=r.length;
h<f;
h++){var b=r[h];
a[b]=j(b)
}a.Form=c.Base.create("Form",c.Plugin.Base,[],{initializer:function(i){var l=i.host;
l.all('input[type="radio"]').plug(a.Radiobutton);
l.all('input[type="checkbox"]').plug(a.Checkbox);
l.all("select").plug(a.Select)
}},{NS:"styled"})
},"@VERSION@",{requires:["base-build","node","event-custom","widget-base","widget-htmlparser","widget-lazy-render","plugin","styled-inputs-css","array-extras"]});
YUI.add("report-as-inappropriate",function(a){var f="ReportAsInappropriate",i,b,g,d,e,h,c;
a.namespace("Shared")[f]=a.Base.create(f,a.Widget,[],{initializer:function(){i=this;
e=this.get("ean");
h=this.get("host");
c=this.get("overlay");
b=c.node.one("form");
b.on("submit",i.sendReport);
h.one(".note a").on("click",i.handleReportOpen)
},handleReportOpen:function(j){j.preventDefault();
c.instance=a.Shared.BNOverlay.getById(c.id);
if(!c.instance){return
}g=c.node.one("textarea");
d={head:{processing:"Submitting your report ...",success:"Thank you",failure:"We're sorry"},body:{processing:"",success:"We appreciate your feedback and will review this title in accordance with our content policy.",failure:"We are experiencing technical difficulties at this time. Please reload this page later and try again."}};
c.node.one("form").plug(a.StyledInputs.Plugin.Form);
g.on("keyup",i.limitComments);
c.instance.show()
},sendReport:function(n){n.preventDefault();
var k,l,o,m,j;
k=b.getAttribute("action");
l=b.one('[name="reason"]').get("options").item(b.one('[name="reason"]').get("selectedIndex")).getAttribute("value");
o=g.get("value");
m=function(p){i.updateMessaging("failure")
};
i.updateMessaging("processing");
h.setStyle("visibility","hidden");
j={method:"POST",data:{ean:e,menuSelection:l,userNote:o},timeout:i.get("timeout"),on:{success:function(p,t){try{var q=a.JSON.parse(t.responseText);
if(q&&q.productreport&&q.productreport.success&&q.productreport.success===true){i.updateMessaging("success")
}else{m(t)
}}catch(s){m(t)
}},failure:function(p,q){m(q)
}}};
a.io(k,j)
},updateMessaging:function(j){c.node.one(".shadow-bar-header").setContent(d.head[j]);
c.instance.setStdModContent("body",d.body[j],"replace")
},limitComments:function(l){var j=g.get("value"),k=i.get("commentMax");
if(j&&j.length&&j.length>k){l.preventDefault();
g.set("value",(j.substr(0,k)))
}}},{ATTRS:{ean:{value:""},timeout:{value:20000},commentMax:{value:500},host:{value:null},overlay:{value:null}}})
},"@VERSION@",{requires:["base-build","widget-base","io-base","io-form","styled-inputs","json-parse","bn-overlay"]});
YUI.add("reviews-wasthishelpful",function(f){var a="",c="There was a problem with your submission.";
var d=function(g){f.all(".was-this-helpful.reviewId-"+g+" .submitted").setStyle("display","inline");
f.all(".was-this-helpful.reviewId-"+g+" .default").setStyle("display","none");
return true
};
var b=function(g,i,j,h){if(h){h.acquire()
}f.io(g,{method:"POST",arguments:{option:i,reviewid:j,lock:h},data:"option="+i+"&reviewid="+j,on:{start:function(l,k){},success:function(n,m,k){var l=f.JSON.parse(m.responseText);
if(l.reviewvote&&l.reviewvote.success==true){if(k.lock){k.lock.release();
k.lock=null
}}else{f.all(".was-this-helpful.reviewId-"+j+" .submitted").setContent("<span class='error'>"+c+"</span>")
}d(j)
},failure:function(m,l,k){f.all(".was-this-helpful.reviewId-"+j+" .submitted").setContent("<span class='error'>"+c+"</span>");
d(j)
}}});
return
};
var e=function(g){f.use("cookie",function(i){var h=new Date();
h.setFullYear(h.getFullYear()+1);
i.Cookie.setSub("votedFor",g,"1",{expires:h})
});
return
};
f.namespace("Reviews").WasThisHelpful=function(h,g,j,i){b(h,(g=="Yes"?1:0),j,i);
e(j)
}
});
YUI.add("shared-rotator",function(c){var b,a;
c.namespace("Shared").Rotator=c.Base.create("Rotator",c.Widget,[],{CONTENT_TEMPLATE:null,initializer:function(d){var f=this,e=f.get("boundingBox"),g=this.get("cssInitClass");
f.render();
if(g){e.addClass(g)
}},renderUI:function(){var e=this,d=e.get("boundingBox");
this.promos=d.all("li");
if(this.promos.size()>1){this.promos.setStyles({opacity:0,zIndex:0,visibility:"visible"});
this.promos.item(this.promoIndex).setStyles({opacity:1,zIndex:1});
e.timer=c.later(this.get("rotationInterval"),this,this.rotate,null,true);
this.timeoutInMinutes(function(){e.timer.cancel()
},this.get("timeoutMinutes"))
}},bindUI:function(){var e=this,d=e.get("boundingBox");
d.on("hover",function(){e.interrupt=true
},function(){e.interrupt=false
})
},rotate:function(){var d=this.promos.item(this.promoIndex);
if(this.interrupt){return
}b=new c.Anim({node:d,duration:this.get("transitionDuration"),to:{opacity:0,zIndex:0},from:{opacity:1}});
b.run();
this.promoIndex=((this.promoIndex+1)>=this.promos.size()?0:this.promoIndex+1);
d=this.promos.item(this.promoIndex);
a=new c.Anim({node:d,duration:this.get("transitionDuration"),to:{opacity:1,zIndex:1},from:{opacity:0}});
a.run()
},timeoutInMinutes:function(d,f){var g=1,h,e=this;
h=setInterval(function(){if(g>=f){d.call(e);
clearInterval(h)
}g++
},60000)
},interrupt:false,promoIndex:0,promos:null,timer:null},{ATTRS:{transitionDuration:{value:0.5},rotationInterval:{setter:function(d){return d*1000
},value:5000},cssInitClass:{value:null},timeoutMinutes:{setter:function(d){return d
},value:10},boundingBox:{value:"boundingBox"}}})
});
YUI.add("scroller-base",function(b){var a="marginLeft";
b.namespace("Scroller").Basic=b.Base.create("ScrollerBasic",b.Widget,[b.WidgetLazyRender],{_contentWidth:1,_itemWidth:1,_itemsPerPage:1,_createTriggerIfMissing:function(e){var c="scrollTrigger"+e.substring(0,1).toUpperCase()+e.slice(1),d=null;
if(!this.get(c)){d=b.Node.create('<div class="scroll-trigger '+e+'"></div>');
this.get("boundingBox").append(d);
this.set(c,d)
}},_disableScrollTriggers:function(){this.get("scrollTriggerLeft").toggleClass("disabled",this.get("pageIndex")===0);
this.get("scrollTriggerRight").toggleClass("disabled",this.get("pageIndex")===this.get("totalPages")-1)
},_getScrollOffset:function(c){var d=c*this.get("pageWidth");
return -1*d
},_pageIndexChange:function(c){if(c.prevVal<=-1||c.prevVal>=this.get("totalPages")){this._setScrollTo(c.newVal)
}else{this.scroll(c.newVal)
}},_incrementPageIndex:function(c,d){this.set("pageIndex",this.get("pageIndex")+d)
},_setScrollTo:function(c){this.get("list").setStyle(a,this._getScrollOffset(c))
},_updateItems:function(){var c=this.get("items"),d=this.get("boundingBox").all(c._query);
if(c.size()!=d.size()){this.set("items",d);
this.syncUI()
}},_executeSwipe:function(c){this._incrementPageIndex(c,parseInt(c.flick.distance,10)<0?1:-1)
},scroll:function(c){var d=this.get("scrollAnim"),e={};
e[a]=this._getScrollOffset(c);
if(d.get("running")){d.stop(true)
}d.set("to",e);
d.run()
},initializer:function(c){var d=this.get("list");
this.set("scrollAnim",new b.Anim({node:d,duration:0.65,easing:"easeBoth"}));
this.after("pageIndexChange",this._pageIndexChange,this);
this.after("pageIndexChange",this._disableScrollTriggers,this)
},renderUI:function(){this.get("contentBox").setStyle("overflow","hidden");
this._createTriggerIfMissing("left");
this._createTriggerIfMissing("right")
},bindUI:function(){var d=this.get("list"),c=this.get("items");
b.Do.after(this._updateItems,d,"_insert",this);
b.Do.after(this._updateItems,c,"remove",this);
c.each(function(e){b.Do.after(this._updateItems,e,"remove",this)
},this);
this.get("scrollTriggerLeft").on("click",this._incrementPageIndex,this,-1);
this.get("scrollTriggerRight").on("click",this._incrementPageIndex,this,+1);
d.on("flick",this._executeSwipe,{minDistance:50,minVelocity:1,preventDefault:b.UA.ios,axis:"x"},this);
if(b.UA.android>=4&&b.UA.android<4.1){d.on("touchmove",function(f){f.preventDefault()
})
}b.one("window").on("windowresize",this.syncUI,this)
},syncUI:function(){var c=this.get("contentBox"),d=this.get("items");
this._contentWidth=c.get("offsetWidth")||1;
this._itemWidth=d.size()>0?d.item(0).get("offsetWidth"):1;
this._itemsPerPage=Math.round(this._contentWidth/this._itemWidth);
this.setAttrs({pageWidth:this._itemsPerPage*this._itemWidth,totalPages:Math.ceil(d.size()/this._itemsPerPage)});
this._disableScrollTriggers()
},destructor:function(){b.one("window").detach("windowresize",this.syncUI,this)
}},{ATTRS:{list:{value:null},items:{value:null,broadcast:2},scrollTriggerLeft:{value:null},scrollTriggerRight:{value:null},pageIndex:{value:0,validator:function(c){return !(c<0||c>=this.get("totalPages"))
}},pageWidth:{value:1},totalPages:{value:1},scrollAnim:{value:null}},HTML_PARSER:{list:".content ol",items:[".content ol li"],scrollTriggerLeft:"div.scroll-trigger.left",scrollTriggerRight:"div.scroll-trigger.right",boundingBox:function(c){return c
},contentBox:".content"}})
},"@VERSION@",{requires:["base-build","node","event-custom","event-resize","event-gestures","widget-base","widget-htmlparser","widget-lazy-render","anim-base","anim-easing"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("selector-css3",function(a){a.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/;a.Selector._getNth=function(d,o,q,h){a.Selector._reNth.test(o);var m=parseInt(RegExp.$1,10),c=RegExp.$2,j=RegExp.$3,k=parseInt(RegExp.$4,10)||0,p=[],l=a.DOM._children(d.parentNode,q),f;if(j){m=2;f="+";c="n";k=(j==="odd")?1:0;}else{if(isNaN(m)){m=(c)?1:0;}}if(m===0){if(h){k=l.length-k+1;}if(l[k-1]===d){return true;}else{return false;}}else{if(m<0){h=!!h;m=Math.abs(m);}}if(!h){for(var e=k-1,g=l.length;e<g;e+=m){if(e>=0&&l[e]===d){return true;}}}else{for(var e=l.length-k,g=l.length;e>=0;e-=m){if(e<g&&l[e]===d){return true;}}}return false;};a.mix(a.Selector.pseudos,{"root":function(b){return b===b.ownerDocument.documentElement;},"nth-child":function(b,c){return a.Selector._getNth(b,c);},"nth-last-child":function(b,c){return a.Selector._getNth(b,c,null,true);},"nth-of-type":function(b,c){return a.Selector._getNth(b,c,b.tagName);},"nth-last-of-type":function(b,c){return a.Selector._getNth(b,c,b.tagName,true);},"last-child":function(c){var b=a.DOM._children(c.parentNode);return b[b.length-1]===c;},"first-of-type":function(b){return a.DOM._children(b.parentNode,b.tagName)[0]===b;},"last-of-type":function(c){var b=a.DOM._children(c.parentNode,c.tagName);return b[b.length-1]===c;},"only-child":function(c){var b=a.DOM._children(c.parentNode);return b.length===1&&b[0]===c;},"only-of-type":function(c){var b=a.DOM._children(c.parentNode,c.tagName);return b.length===1&&b[0]===c;},"empty":function(b){return b.childNodes.length===0;},"not":function(b,c){return !a.Selector.test(b,c);},"contains":function(b,c){var d=b.innerText||b.textContent||"";return d.indexOf(c)>-1;},"checked":function(b){return(b.checked===true||b.selected===true);},enabled:function(b){return(b.disabled!==undefined&&!b.disabled);},disabled:function(b){return(b.disabled);}});a.mix(a.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"});a.Selector.combinators["~"]={axis:"previousSibling"};},"3.5.1",{requires:["selector-native","selector-css2"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("selector-css2",function(g){var h="parentNode",d="tagName",e="attributes",a="combinator",f="pseudos",c=g.Selector,b={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:true,_isXML:(function(){var i=(g.config.doc.createElement("div").tagName!=="DIV");return i;}()),shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(j,i){return g.DOM.getAttribute(j,i)!=="";},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(i){return g.DOM._children(i[h])[0]===i;}},_bruteQuery:function(n,r,t){var o=[],i=[],q=c._tokenize(n),m=q[q.length-1],s=g.DOM._getDoc(r),k,j,p,l;if(m){j=m.id;p=m.className;l=m.tagName||"*";if(r.getElementsByTagName){if(j&&(r.all||(r.nodeType===9||g.DOM.inDoc(r)))){i=g.DOM.allById(j,r);}else{if(p){i=r.getElementsByClassName(p);}else{i=r.getElementsByTagName(l);}}}else{k=r.firstChild;while(k){if(k.tagName&&(l==="*"||k.tagName===l)){i.push(k);}k=k.nextSibling||k.firstChild;}}if(i.length){o=c._filterNodes(i,q,t);}}return o;},_filterNodes:function(u,q,s){var z=0,y,A=q.length,t=A-1,p=[],w=u[0],D=w,B=g.Selector.getters,o,x,m,r,k,v,l,C;for(z=0;(D=w=u[z++]);){t=A-1;r=null;testLoop:while(D&&D.tagName){m=q[t];l=m.tests;y=l.length;if(y&&!k){while((C=l[--y])){o=C[1];if(B[C[0]]){v=B[C[0]](D,C[0]);}else{v=D[C[0]];if(C[0]==="tagName"&&!c._isXML){v=v.toUpperCase();}if(typeof v!="string"&&v!==undefined&&v.toString){v=v.toString();}else{if(v===undefined&&D.getAttribute){v=D.getAttribute(C[0],2);}}}if((o==="="&&v!==C[2])||(typeof o!=="string"&&o.test&&!o.test(v))||(!o.test&&typeof o==="function"&&!o(D,C[0],C[2]))){if((D=D[r])){while(D&&(!D.tagName||(m.tagName&&m.tagName!==D.tagName))){D=D[r];}}continue testLoop;}}}t--;if(!k&&(x=m.combinator)){r=x.axis;D=D[r];while(D&&!D.tagName){D=D[r];}if(x.direct){r=null;}}else{p.push(w);if(s){return p;}break;}}}w=D=null;return p;},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:true},"+":{axis:"previousSibling",direct:true}},_parsers:[{name:e,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(l,m){var k=l[2]||"",i=c.operators,j=(l[3])?l[3].replace(/\\/g,""):"",n;if((l[1]==="id"&&k==="=")||(l[1]==="className"&&g.config.doc.documentElement.getElementsByClassName&&(k==="~="||k==="="))){m.prefilter=l[1];l[3]=j;m[l[1]]=(l[1]==="id")?l[3]:j;}if(k in i){n=i[k];if(typeof n==="string"){l[3]=j.replace(c._reRegExpTokens,"\\$1");n=new RegExp(n.replace("{val}",l[3]));}l[2]=n;}if(!m.last||m.prefilter!==l[1]){return l.slice(1);}}},{name:d,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(j,k){var i=j[1];if(!c._isXML){i=i.toUpperCase();}k.tagName=i;if(i!=="*"&&(!k.last||k.prefilter)){return[d,"=",i];}if(!k.prefilter){k.prefilter="tagName";}}},{name:a,re:/^\s*([>+~]|\s)\s*/,fn:function(i,j){}},{name:f,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(i,j){var k=c[f][i[1]];if(k){if(i[2]){i[2]=i[2].replace(/\\/g,"");}return[i[2],k];}else{return false;}}}],_getToken:function(i){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]};},_tokenize:function(l){l=l||"";l=c._parseSelector(g.Lang.trim(l));var k=c._getToken(),q=l,p=[],r=false,n,o,m,j;outer:do{r=false;for(m=0;(j=c._parsers[m++]);){if((n=j.re.exec(l))){if(j.name!==a){k.selector=l;}l=l.replace(n[0],"");if(!l.length){k.last=true;}if(c._attrFilters[n[1]]){n[1]=c._attrFilters[n[1]];}o=j.fn(n,k);if(o===false){r=false;break outer;}else{if(o){k.tests.push(o);}}if(!l.length||j.name===a){p.push(k);k=c._getToken(k);if(j.name===a){k.combinator=g.Selector.combinators[n[1]];}}r=true;}}}while(r&&l.length);if(!r||l.length){p=[];}return p;},_replaceMarkers:function(i){i=i.replace(/\[/g,"\uE003");i=i.replace(/\]/g,"\uE004");i=i.replace(/\(/g,"\uE005");i=i.replace(/\)/g,"\uE006");return i;},_replaceShorthand:function(i){var j=g.Selector.shorthand,k;for(k in j){if(j.hasOwnProperty(k)){i=i.replace(new RegExp(k,"gi"),j[k]);}}return i;},_parseSelector:function(i){var j=g.Selector._replaceSelector(i),i=j.selector;i=g.Selector._replaceShorthand(i);i=g.Selector._restore("attr",i,j.attrs);i=g.Selector._restore("pseudo",i,j.pseudos);i=g.Selector._replaceMarkers(i);i=g.Selector._restore("esc",i,j.esc);return i;},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(j,i){return g.DOM.getAttribute(j,i);},id:function(j,i){return g.DOM.getId(j);}}};g.mix(g.Selector,b,true);g.Selector.getters.src=g.Selector.getters.rel=g.Selector.getters.href;if(g.Selector.useNative&&g.config.doc.querySelector){g.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]";}},"3.5.1",{requires:["selector-native"]});
YUI.add("scroller-carousel",function(b){var a=b.namespace("Scroller");
a.Carousel=b.Base.create("ScrollerCarousel",a.Basic,[],{_disableScrollTriggers:function(){var c=(this.get("totalPages")===1);
this.get("scrollTriggerLeft").toggleClass("disabled",c);
this.get("scrollTriggerRight").toggleClass("disabled",c)
},_shimScrollOffset:function(c){if(this.get("leftShim")){return new b.Do.AlterArgs("Shimmed",[c+1])
}},_updateShim:function(c){var f=c.attrName.indexOf("left")!==-1,d=this.get("list"),e=d[f?"prepend":"append"];
if(c.prevVal){c.prevVal.remove(true)
}if(c.newVal){if(f){c.newVal._nodes.reverse()
}c.newVal.each(e,d)
}},_checkForCircularity:function(){var c=this.get("pageIndex"),d=this.get("totalPages");
if(c<=-1){this.set("pageIndex",d-1)
}else{if(c>=d){this.set("pageIndex",0)
}}},initializer:function(c){b.Do.before(this._shimScrollOffset,this,"_getScrollOffset",this);
this.after(["leftShimChange","rightShimChange"],this._updateShim,this);
this.get("scrollAnim").on("end",this._checkForCircularity,this)
},syncUI:function(){this.constructor.superclass.syncUI.apply(this,arguments);
var d=this.get("items"),c=null,e=d.size()%this._itemsPerPage||this._itemsPerPage;
if(d.size()>0){d.item(d.size()-1).setStyle("marginRight",(this._itemsPerPage-e)*this._itemWidth)
}c=this.get("boundingBox").cloneNode(true).all(d._query).addClass("shim");
if(d.size()>this._itemsPerPage){this.setAttrs({rightShim:c.slice("0",this._itemsPerPage),leftShim:c.slice(-e)})
}else{this.setAttrs({rightShim:null,leftShim:null})
}this._setScrollTo(this.get("pageIndex"));
this._checkForCircularity()
}},{ATTRS:{pageIndex:{value:0,validator:function(c){return this.get("totalPages")!==1
}},leftShim:{value:null},rightShim:{value:null}},HTML_PARSER:{items:[".content ol li:not(.shim)"]}})
},"@VERSION@",{requires:["base-build","scroller-base","event-custom","selector-css3"]});
YUI.add("account-signin-actions",function(b){var a=b.namespace("Account");
a.DEFAULT_SIGNIN_URLS=b.merge({createAccountUrl:"https://www.barnesandnoble.com/register",forgotPasswordUrl:"https://cart2.barnesandnoble.com/account/op.asp?step=forgotPassword"},a.DEFAULT_SIGNIN_URLS);
a.DEFAULT_PAGE_ACTIONS=b.merge({createAccount:true,forgotPassword:true},a.DEFAULT_PAGE_ACTIONS);
a.SignInActions=b.Base.create("SignInActions",b.Base,[],{initializer:function(c){b.after(a.CREATE_ACCOUNT,this._goToPage,this,"createAccount");
b.after(a.FORGOT_PASSWORD,this._goToPage,this,"forgotPassword");
b.after(a.SIGNIN_STATUS_CHANGE,function(){b.Ajax.AutoUpdate("signin")
})
},_goToPage:function(g,d){var f;
var c=(g&&g.signinEventName)?g.signinEventName.replace("signin:",""):d;
if(c&&(typeof a.DEFAULT_PAGE_ACTIONS[c]==="undefined"||a.DEFAULT_PAGE_ACTIONS[c])){f=this._getActionUrl(c,g);
if(f){if(g&&g.email){f+=((f.indexOf("?")>0)?"&":"?")+"email="+encodeURIComponent(g.email)
}window.location.href=f
}}},_getActionUrl:function(e,c){if(e){var d=e+"Url";
if(c&&c[d]){return c[d]
}else{if(this.get(d)){return this.get(d)
}else{if(a.DEFAULT_SIGNIN_URLS[d]){return a.DEFAULT_SIGNIN_URLS[d]
}}}}return null
}},{ATTRS:{createAccountUrl:{value:null},forgotPasswordUrl:{value:null}}})
},"@VERSION",{requires:["base-build","account-signin-event","event-custom","ajax-updater"]});
YUI.add("gallery-outside-events",function(b){var a=["blur","change","click","dblclick","focus","keydown","keypress","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","select","submit"];
b.Event.defineOutside=function(d,c){c=c||d+"outside";
b.Event.define(c,{on:function(g,e,f){e.onHandle=b.one("doc").on(d,function(h){if(this.isOutside(g,h.target)){f.fire(h)
}},this)
},detach:function(g,e,f){e.onHandle.detach()
},delegate:function(h,f,g,e){f.delegateHandle=b.one("doc").delegate(d,function(i){if(this.isOutside(h,i.target)){g.fire(i)
}},e,this)
},detachDelegate:function(h,f,g,e){f.delegateHandle.detach()
},isOutside:function(e,f){return f!==e&&!f.ancestor(function(g){return g===e
})
}})
};
b.each(a,function(c){b.Event.defineOutside(c)
})
},"gallery-2010.08.18-17-12",{requires:["event-focus","event-synthetic"]});
YUI.add("gallery-overlay-extras",function(c){
/*!
	 * Overlay Extras
	 *
	 * Oddnut Software
	 * Copyright (c) 2009-2011 Eric Ferraiuolo - http://oddnut.com
	 * YUI BSD License - http://developer.yahoo.com/yui/license.html
	 */
var i="overlay",q="host",o="renderUI",f="bindUI",l="syncUI",b="rendered",s="boundingBox",p="visible",e="zIndex",h="align",m="Change",j=c.Lang.isBoolean,r=c.ClassNameManager.getClassName,d=(function(){
/*! IS_POSITION_FIXED_SUPPORTED - Juriy Zaytsev (kangax) - http://yura.thinkweb2.com/cft/ */
var u=null,v,t;
if(document.createElement){v=document.createElement("div");
if(v&&v.style){v.style.position="fixed";
v.style.top="10px";
t=document.body;
if(t&&t.appendChild&&t.removeChild){t.appendChild(v);
u=(v.offsetTop===10);
t.removeChild(v)
}}}return u
}()),a,k,n,g;
(function(){var w="overlayModal",v="modal",u="mask",t={modal:r(i,v),mask:r(i,u)};
a=c.Base.create(w,c.Plugin.Base,[],{_maskNode:null,_uiHandles:null,initializer:function(x){this.afterHostMethod(o,this.renderUI);
this.afterHostMethod(f,this.bindUI);
this.afterHostMethod(l,this.syncUI);
if(this.get(q).get(b)){this.renderUI();
this.bindUI();
this.syncUI()
}},destructor:function(){if(this._maskNode){this._maskNode.remove(true)
}this._detachUIHandles();
this.get(q).get(s).removeClass(t.modal)
},renderUI:function(){var y=this.get(q).get(s),x=y.get("parentNode")||c.one("body");
this._maskNode=c.Node.create("<div></div>");
this._maskNode.addClass(t.mask);
this._maskNode.setStyles({position:d?"fixed":"absolute",width:"100%",height:"100%",top:"0",left:"0",display:"none"});
x.insert(this._maskNode,x.get("firstChild"));
y.addClass(t.modal)
},bindUI:function(){this.afterHostEvent(p+m,this._afterHostVisibleChange);
this.afterHostEvent(e+m,this._afterHostZIndexChange)
},syncUI:function(){var x=this.get(q);
this._uiSetHostVisible(x.get(p));
this._uiSetHostZIndex(x.get(e))
},_focus:function(){var y=this.get(q),z=y.get(s),x=z.get("tabIndex");
z.set("tabIndex",x>=0?x:0);
y.focus();
z.set("tabIndex",x)
},_blur:function(){this.get(q).blur()
},_getMaskNode:function(){return this._maskNode
},_uiSetHostVisible:function(x){if(x){c.later(1,this,"_attachUIHandles");
this._maskNode.setStyle("display","block");
this._focus()
}else{this._detachUIHandles();
this._maskNode.setStyle("display","none");
this._blur()
}},_uiSetHostZIndex:function(x){this._maskNode.setStyle(e,x||0)
},_attachUIHandles:function(y){if(this._uiHandles){return
}var x=this.get(q),z=x.get(s);
this._uiHandles=[z.on("clickoutside",c.bind(this._focus,this)),z.on("focusoutside",c.bind(this._focus,this))];
if(!d){this._uiHandles.push(c.one("win").on("scroll",c.bind(function(B){var A=this._maskNode;
A.setStyle("top",A.get("docScrollY"))
},this)))
}},_detachUIHandles:function(){c.each(this._uiHandles,function(x){x.detach()
});
this._uiHandles=null
},_afterHostVisibleChange:function(x){this._uiSetHostVisible(x.newVal)
},_afterHostZIndexChange:function(x){this._uiSetHostZIndex(x.newVal)
}},{NS:v,ATTRS:{maskNode:{getter:"_getMaskNode",readOnly:true}},CLASSES:t})
}());
(function(){var u="overlayKeepaligned",t="keepaligned";
k=c.Base.create(u,c.Plugin.Base,[],{_uiHandles:null,initializer:function(v){this.afterHostMethod(f,this.bindUI);
this.afterHostMethod(l,this.syncUI);
if(this.get(q).get(b)){this.bindUI();
this.syncUI()
}},destructor:function(){this._detachUIHandles()
},bindUI:function(){this.afterHostEvent(p+m,this._afterHostVisibleChange)
},syncUI:function(){this._uiSetHostVisible(this.get(q).get(p))
},syncAlign:function(){this.get(q)._syncUIPosAlign()
},_uiSetHostVisible:function(v){if(v){this._attachUIHandles()
}else{this._detachUIHandles()
}},_attachUIHandles:function(){if(this._uiHandles){return
}var v=c.bind(this.syncAlign,this);
this._uiHandles=[c.on("windowresize",v),c.on("scroll",v)]
},_detachUIHandles:function(){c.each(this._uiHandles,function(v){v.detach()
});
this._uiHandles=null
},_afterHostVisibleChange:function(v){this._uiSetHostVisible(v.newVal)
}},{NS:t})
}());
(function(){var w="overlayAutohide",u="autohide",v="clickedOutside",x="focusedOutside",t="pressedEscape";
n=c.Base.create(w,c.Plugin.Base,[],{_uiHandles:null,initializer:function(y){this.afterHostMethod(f,this.bindUI);
this.afterHostMethod(l,this.syncUI);
if(this.get(q).get(b)){this.bindUI();
this.syncUI()
}},destructor:function(){this._detachUIHandles()
},bindUI:function(){this.afterHostEvent(p+m,this._afterHostVisibleChange)
},syncUI:function(){this._uiSetHostVisible(this.get(q).get(p))
},_uiSetHostVisible:function(y){if(y){c.later(1,this,"_attachUIHandles")
}else{this._detachUIHandles()
}},_attachUIHandles:function(){if(this._uiHandles){return
}var A=this.get(q),B=A.get(s),z=c.bind(A.hide,A),y=[];
if(this.get(v)){y.push(B.on("clickoutside",z))
}if(this.get(x)){y.push(B.on("focusoutside",z))
}if(this.get(t)){y.push(B.on("key",z,"down:27"))
}this._uiHandles=y
},_detachUIHandles:function(){c.each(this._uiHandles,function(y){y.detach()
});
this._uiHandles=null
},_afterHostVisibleChange:function(y){this._uiSetHostVisible(y.newVal)
}},{NS:u,ATTRS:{clickedOutside:{value:true,validator:j},focusedOutside:{value:true,validator:j},pressedEscape:{value:true,validator:j}}})
}());
(function(){var w="overlayPointer",u="pointer",v="pointing",t={pointer:r(i,u),pointing:r(i,v)};
g=c.Base.create(w,c.Plugin.Base,[],{_pointerNode:null,initializer:function(x){this.afterHostMethod(o,this.renderUI);
this.afterHostMethod(f,this.bindUI);
this.afterHostMethod(l,this.syncUI);
if(this.get(q).get(b)){this.renderUI();
this.bindUI();
this.syncUI()
}},destructor:function(){var y=this.get(q),z=y.get(s),A=y.get(h),x=this._pointerNode;
z.removeClass(t.pointing);
if(A&&A.points){z.removeClass(r(i,v,A.points[0]))
}if(x){x.remove(true)
}},renderUI:function(){this._pointerNode=c.Node.create("<span></span>").addClass(t.pointer);
this.get(q).get(s).append(this._pointerNode)
},bindUI:function(){this.afterHostEvent(h+m,this._afterHostAlignChange)
},syncUI:function(){this._uiSetHostAlign(this.get(q).get(h))
},_getPointerNode:function(){return this._pointerNode
},_uiSetHostAlign:function(y,x){var A=this.get(q),B=A.get(s),z=this._pointerNode;
if(x&&x.points){B.removeClass(r(i,v,x.points[0]));
B.removeClass(r(i,v,x.points[0],x.points[1]))
}if(y&&y.node&&y.points[0]!==c.WidgetPositionAlign.CC){B.addClass(t.pointing);
B.addClass(r(i,v,y.points[0]));
B.addClass(r(i,v,y.points[0],y.points[1]));
z.show()
}else{z.hide();
B.removeClass(t.pointing)
}A._syncUIPosAlign()
},_afterHostAlignChange:function(x){this._uiSetHostAlign(x.newVal,x.prevVal)
}},{NS:u,ATTRS:{pointerNode:{getter:"_getPointerNode",readOnly:true}},CLASSES:t})
}());
c.Plugin.OverlayModal=a;
c.Plugin.OverlayKeepaligned=k;
c.Plugin.OverlayAutohide=n;
c.Plugin.OverlayPointer=g
},"gallery-2011.05.04-20-03",{supersedes:["gallery-overlay-modal"],requires:["overlay","plugin","event-resize","gallery-outside-events"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-scroll",function(b){var a=Number;b.Anim.behaviors.scroll={set:function(f,g,i,j,k,e,h){var d=f._node,c=([h(k,a(i[0]),a(j[0])-a(i[0]),e),h(k,a(i[1]),a(j[1])-a(i[1]),e)]);if(c[0]){d.set("scrollLeft",c[0]);}if(c[1]){d.set("scrollTop",c[1]);}},get:function(d){var c=d._node;return[c.get("scrollLeft"),c.get("scrollTop")];}};},"3.5.1",{requires:["anim-base"]});
YUI.add("fade-to-more",function(b){var a="FadeToMore";
b.namespace("Shared")[a]=b.Base.create(a,b.Widget,[b.WidgetLazyRender],{renderUI:function(e){var l=this,c=l.get("boundingBox"),i=l.get("expandable")["enabled"],k=(c.getComputedStyle("height").replace(/px/,"")*1),j=l.get("maxHeight"),g=b.one(c.getAttribute("data-bn-match-height")),d=null,f,h;
if(g){if(g.get("offsetHeight")>j){j=g.get("offsetHeight")-30;
l.set("maxHeight",j)
}}if(k>j){c.setStyle("maxHeight",j);
if(l.get("fadeToMore")){c.append('<div class="'+a+'" style="bottom: 0;left: 0;"></div>');
d=c.one("."+a)
}if(i){f=b.Node.create(l.get("expandable")["more"]);
h=b.Node.create(l.get("expandable")["less"]);
h.setStyle("display","none");
f.setAttribute("data-bntrack","ReadMore");
h.setAttribute("data-bntrack","ReadLess");
c.insert(f,"after");
c.insert(h,"after");
l._showOverflow(c,f,h,d,k);
l._hideOverflow(c,f,h,d)
}else{c.insert(l.get("expandable")["more"],"after")
}}if(!i){c.all(".read-more").setAttribute("href","#product-commentaries-1")
}},_showOverflow:function(g,f,e,h,c){var d=this;
f.on("click",function(i){g.setStyle("overflow","visible");
g.setStyle("maxHeight",c);
f.setStyle("display","none");
e.setStyle("display","inline");
if(d.get("fadeToMore")&&h){h.setStyle("display","none")
}})
},_hideOverflow:function(f,e,d,g){var c=this;
d.on("click",function(h){f.setStyle("overflow","hidden");
f.setStyle("maxHeight",c.get("maxHeight"));
d.setStyle("display","none");
e.setStyle("display","inline");
if(c.get("fadeToMore")&&g){g.setStyle("display","block")
}c._adjustScroll(f.getXY()[1]-50,"less")
})
},_adjustScroll:function(e,f){if(f==="less"){if(e<(document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop)){var d=new b.Anim({node:b.one(window),duration:0.25,easing:b.Easing.easeOutCubic,to:{scroll:[0,e]}});
d.run()
}}else{if(e>(document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop)){var c=new b.Anim({node:b.one(window),duration:0.25,easing:b.Easing.easeOutCubic,to:{scroll:[0,e]}});
c.run()
}}},CONTENT_TEMPLATE:null},{NAME:"FADER",ATTRS:{maxHeight:{value:60},showHeight:{value:80},expandable:{value:{enabled:false,more:'<a class="read-more">Read More</a>',less:'<a class="read-less">Read Less</a>'}},fadeToMore:{value:false}}})
},"@VERSION@",{requires:["base-build","node","widget-base","anim-base","anim-easing","anim-scroll","widget-lazy-render","fade-to-more-css"]});
YUI.add("performance-metrics",function(b){var a="Metrics";
b.namespace("Performance")[a]=b.Base.create(a,b.Base,[],{_loadMetrics:function(k){if(window.performance===undefined){b.log("Performance Metrics should not be executed in a browser that does not have a native window.performance object","error","_load")
}var h=window.performance,l=navigator,e={},i=h.timing,f=i.responseEnd-i.navigationStart,d=i.domInteractive-i.navigationStart,c=i.domComplete-i.navigationStart,g=Math.floor(Math.random()*101),j=g<=k;
if(j){b.log("Firing performance metrics for "+k+"% of users. This is set by a griffin property.","info","_load");
e=b.merge({OperatingSystemPlatform:l.platform,UserAgent:l.userAgent,PageUrl:window.location.protocol+"//"+window.location.hostname+window.location.pathname,PageQueryString:window.location.search,NumberOfRedirects:h.navigation.redirectCount,ElementsByType:{ImgTags:document.getElementsByTagName("img").length,JSScriptTags:document.getElementsByTagName("script").length,CSSLinkTags:document.getElementsByTagName("link").length},LoadTimes:{HTML:f,FullPage:c,Perceived:d},PerformanceData:{navigationStart:i.navigationStart,redirectStart:i.redirectStart,unloadEventStart:i.unloadEventStart,unloadEventEnd:i.unloadEventEnd,redirectEnd:i.redirectEnd,fetchStart:i.fetchStart,domainLookupStart:i.domainLookupStart,domainLookupEnd:i.domainLookupEnd,connectStart:i.connectStart,connectEnd:i.connectEnd,requestStart:i.requestStart,responseStart:i.responseStart,responseEnd:i.responseEnd,domLoading:i.domLoading,domInteractive:i.domInteractive,domContentLoadedEventStart:i.domContentLoadedEventStart,domContentLoadedEventEnd:i.domContentLoadedEventEnd,domComplete:i.domComplete,loadEventStart:i.loadEventStart,loadEventEnd:i.loadEventEnd}},this._mixinValues);
b.io("/Metrics",{method:"POST",data:b.JSON.stringify(e),headers:{"Content-Type":"application/json"}})
}},initializer:function(c){var d=c.percentEnabled||5;
this._mixinValues=c.mixinValues;
b.one("window").after("load",function(){b.later(2000,this,function(){this._loadMetrics(d)
})
},this)
}},{ATTRS:{}})
},"@VERSION@",{requires:["base","node","json","io-base","querystring-stringify-simple","event-custom"]});
YUI.add("form-toolkit",function(a){a.namespace("FormToolkit").CharacterCountdown=a.Base.create("FormToolkit",a.Plugin.Base,[],{initializer:function(c){var e=c.host;
if(!e){return
}var h=null,n=null,b=this.get("charCount"),i=this.get("rowCount"),g=this.get("goRed"),m=this.get("showRemainder"),f=this.get("forceMaxlength"),l=this,j=function(p){var q=null,o="";
if(l.get("showMaxMessage")){o="Maximum "+b+" characters";
if(l.get("showRowCount")){o+=" or "+i+" lines"
}n=a.Node.create("<span>("+o+")</span>")
}if(m){q=a.Node.create('<span class="remaining">&nbsp;Remaining characters: <span class="charcount">'+b+"</span></span>");
if(n){n.append(q)
}else{n=q
}}n.addClass("countdown-box");
if(n){p.append(n)
}},d=function(r){var p=((r&&r.currentTarget)||e).get("value");
var o=p.length;
var q=(p.split("\n")).length;
if(m){n.one(".charcount").setContent(b-o)
}if(g&&((b<o)||(i<q))){n.addClass("low-count");
e.addClass("error")
}else{n.removeClass("low-count");
e.removeClass("error")
}if(i<q){e.set("value",p.replace(/\n$/,""))
}},k=function(o){if(f){o.setAttribute("maxlength",b)
}o.on("valueChange",d)
};
h=e.get("parentNode");
if(!h.one("#"+e.get("id")+" .countdown-box")){j(h);
k(e);
d()
}},destructor:function(){counterLine.destroy()
}},{NS:"FormToolkit",ATTRS:{charCount:{value:500},rowCount:{value:5},goRed:{value:false},showRemainder:{value:false},showMaxMessage:{value:false},showRowCount:{value:true},forceMaxlength:{value:false}}})
});
YUI.add("buffer-delayed",function(b){var a=function(c){this._name="DelayedFlush";
this._timeoutId=undefined;
this._delay=c||2000
};
b.extend(a,b.Analytics.BufferStrategy.BaseBufferStrategy,{onEvent:function(){var d=this._provider,c=this._buffer,e=c.getEventId();
window.clearTimeout(this._timeoutId);
this._timeoutId=setTimeout(function(){if(c.hasEvents()){d.flushBuffer(e,true)
}},this._delay)
}});
b.Analytics.BufferStrategy.DelayedFlush=a
},"@VERSION@",{requires:["analytics"]});
YUI.add("buffer-interval",function(b){var a=function(c){this._name="IntervalFlush";
this._intervalId=undefined;
this._interval=c||3000
};
b.extend(a,b.Analytics.BufferStrategy.BaseBufferStrategy,{onEvent:function(){},init:function(){var d=this._provider,c=this._buffer,e=c.getEventId();
this._intervalId=window.setInterval(function(){if(c.hasEvents()){d.flushBuffer(e,true)
}},this._interval)
}});
b.Analytics.BufferStrategy.IntervalFlush=a
},"@VERSION@",{requires:["analytics"]});
YUI.add("analytics-internaltracking",function(b){var a=function(c){this._name="InternalProvider";
this.constructor.superclass.constructor.apply(this,arguments);
this._cfg=b.merge({serverTime:"",contentType:"application/json; charset=UTF-8",baseUrl:"",prettyFormat:false,serviceEndpoint:{page:"POST /Analytics/Request/{encodedId}/Page",events:"POST /Analytics/Request/{encodedId}/Events"},buffers:{CLICK:{strategy:"IntervalFlush",args:[10000]},HOVER:{strategy:"UnloadFlush"},RESIZE:{strategy:"UnloadFlush"},SCROLL:{strategy:"UnloadFlush"},MANUAL:{strategy:"DelayedFlush",args:[500]}}},c);
this._currentPage={}
};
b.extend(a,b.Analytics.Provider.BaseProvider,{init:function(){this.publish(a.PAGE_TRACKED,{broadcast:1,fireOnce:true,async:false})
},getFormat:function(){return this._cfg.prettyFormat?4:null
},getEndpoint:function(f){var d=this._cfg.baseUrl+this._cfg.serviceEndpoint[f],e=b.BN.Lang.String.parseTemplate(d,{encodedId:this._encodedPageRequestId}),c=e.match(/([A-Z]+)\s+(\/.+)/);
c=e.match(/([A-Z]+)\s+(\/.+)/);
return{verb:c[1],url:c[2]}
},convertSections:function(c){var d=[];
c.each(function(e){d.push(e.getAttribute("data-bntrack"))
},this);
return d
},flushBuffer:function(c,f){var i=this.getEndpoint("page"),d=this.getEndpoint("events"),h=f?true:false,k=this,g=this.getBuffer(c),e={};
var j=function(n,l,m){b.log("flushBuffer Number of events to flush: "+(l.length||1),"info","InternalProvider");
b.io(n.url,{headers:{"Content-Type":k._cfg.contentType},method:n.verb,sync:!h,data:b.JSON.stringify(l,null,k.getFormat()),on:m||e})
};
if(c==="PAGE"){j(i,g,{complete:function(){k.fire(a.PAGE_TRACKED)
}});
this._pageTracked=g
}else{if(c==="ASYNC"){this.on(a.PAGE_TRACKED,function(){if(g.pages.length>0){j(i,g.pages)
}if(g.events.length>0){j(d,g.events)
}})
}else{if(c==="ELEMENTVIEW"){this.on(a.PAGE_TRACKED,function(){b.log("in the event posting "+d,"info",this._name);
j(d,g)
})
}else{this.on(a.PAGE_TRACKED,function(){j(d,g)
})
}}}},getBuffer:function(g){var i=this._buffers[g].getBuffer(),c=i.length,d={},f=[],h,j;
switch(g){case"PAGE":if(c>1){b.log("More than one PAGE event added to the buffer","error",this._name)
}else{if(c==1){j=i.pop().pageObj;
j.sections=this.convertSections(this.getTracker().getSections());
return j
}}break;
case"ASYNC":d={};
d.events=[];
d.pages=[];
while(c--){h=i[c];
if(h.event){d.events.push(h.event)
}if(h.pageObj){d.pages.push(h.pageObj)
}}return d;
case"ELEMENTVIEW":while(c--){f.push(i[c].elementObj)
}return f;
case"RESIZE":while(c--){f.push(i[c].elementObj)
}return f;
case"SCROLL":while(c--){f.push(i[c].elementObj)
}return f;
default:while(c--){h=i[c];
d={};
d.type=h.eventId;
d.target=h.eventObj.eventData.pop();
d.timestamp=h.eventObj.timestamp;
d.eventData=h.eventObj.eventData;
d.href=h.eventObj.href;
f.push(d)
}return f
}},getPageTracked:function(){return this._pageTracked
}},{PAGE_TRACKED:"wi:pagetracked"});
b.augment(a,b.EventTarget);
b.Analytics.Provider.InternalProvider=a
},"@VERSION@",{requires:["base-build","base-pluginhost","io-base","analytics","json-stringify","buffer-delayed","buffer-interval","cookie"]});
YUI.add("analytics-comscore",function(b){var a=function(c){this._name="ComscoreProvider";
this.constructor.superclass.constructor.apply(this,arguments);
this.CSINIT="csinit:complete";
this._cfg=b.merge({csClientId:"THIS_VALUE_MUST_BE_SET_VIA_GRIFFIN",apijsLoadTimeout:10000},c);
b.publish(this.CSINIT,{broadcast:2,fireOnce:true})
};
b.extend(a,b.Analytics.Provider.BaseProvider,{init:function(){},flushBuffer:function(f){var e=this,d=this._buffers[f].getBuffer(),c;
b.log("flushBuffer Number of events to flush"+(d.length||1),"info",e._name);
while(d.length>0){c=d.pop();
switch(c.eventId){case"PAGE":e._trackPage(c);
break;
case"ASYNC":break;
default:break
}}},_trackPage:function(){var d=this.getTracker().getPage();
if(a.IS_TRACKED){b.log("trackPage() Page has already been tracked; Skipping page track.","info",this._name);
return
}var c=this;
b.log("trackPage() Tracking page: "+d,"info",this._name);
this._currentPage=d;
c._tag.call(c);
a.IS_TRACKED=true;
b.on(this.CSINIT,function(){b.log("trackPage() Tracking page: "+c._currentPage,"info",c._name)
})
},_tag:function(g){window._comscore=window._comscore||[];
var d=this,f=g||false,e=window._comscore,c=document.location.protocol==="https:"?"https://sb":"http://b";
e.push({c1:"2",c2:this._cfg.csClientId});
b.Get.script(c+".scorecardresearch.com/beacon.js",{async:true,onEnd:function(){b.fire(d.CSINIT)
}})
}},{});
b.augment(a,b.EventTarget);
b.Analytics.Provider.ComscoreProvider=a
},"@VERSION",{requires:["base","analytics","analytics-model","buffer-delayed","querystring","event-custom"]});
YUI.add("review-form",function(b){var a=function(c){this._rootNode=b.one("#"+c.id);
this._parentNode=this._rootNode.get("parentNode");
this._form=this._rootNode.one("form");
this._submitBtns=this._rootNode.all('button[type="submit"]');
this._anonymousCheckBox=c.anonymousCheckBox||b.log("Anonymous Checkbox Instance Required for Review Widget","error",a.NAME);
this._createPenNameLink=c.createPenNameLink;
this._isSignedIn=c.signedIn;
this._review=null;
this._isPrivate=false;
this._penName=null;
this._testPenName=c.testPenName||false;
this._errors=null;
this._ean=c.ean;
this._messages=b.merge({ALREADY_REVIEWED:"Your review wasn't accepted, as you've already reviewed this product"},c.messages);
this.Account=c.Account||b.log("Account Class Required for Review Widget","error",a.NAME);
this._init()
};
a.NAME="ReviewForm";
a.prototype={_init:function(){this._submitBtns.on("click",function(c){c.preventDefault();
b.log("Submit Triggered","info",a.NAME);
this.submit()
},this);
b.log("Initialized","info",a.NAME)
},updateState:function(c,d){b.io("/reviews/review/json/model?EAN="+this._ean,{on:{success:function(h,e,f){var g=b.JSON.parse(e.responseText);
this.setPenName(g.sessionDataView.pers_Pen_Name);
this.setReview(g.review);
this.setPrivate(this._anonymousCheckBox.get("checked"));
c.call(d,g)
}},context:this})
},updateReview:function(){b.log("User has a review... update review and show error","info",a.NAME);
b.io("/reviews/review/json/widget?EAN="+this._ean,{method:"POST",on:{success:function(i,c,e){var g=b.JSON.parse(c.responseText);
var f=g.html;
var h=g.jsInline;
this._parentNode.setContent(f);
var d=this._parentNode.one(".error-box");
d.setContent(this._messages.ALREADY_REVIEWED);
d.toggleClass("hidden");
b.BN.Lang.Dom.handleInlineJs(h)
}},context:this})
},updatePenName:function(){b.log("User has a pen name... update pen name","info",a.NAME);
var d=b.one("#usersPenName"),c=b.one("#usersPenNameValue");
d.setContent(this.getPenName());
c.set("value",this.getPenName())
},updatePrivacy:function(){if(this.isPrivate()){b.one("#usersPrivacy").set("value","PRIVATE")
}},checkSignInStatus:function(c,d){b.log("Trigger SignIn","info",a.NAME);
if(this._isSignedIn){c.call(d)
}else{this.Account.signInUser().once(this.Account.SIGNED_IN,function(){c.call(d)
})
}},submit:function(){this.checkSignInStatus(function(){this.updateState(function(c){if(this.hasReview()){this.updateReview();
return
}if(this.hasPenName()&&!this.isPrivate()){this.updatePenName();
this.submitForm()
}else{if(this.isPrivate()){this.syncForm({isAnonymous:true});
this.submitForm()
}else{if(this.requiresPenName()){b.on("penname:success",function(d){b.log("Penname Successfully returned [type="+d.type+", penName="+d.penName+", isAnonymous="+d.isAnonymous+"]","info",a.NAME);
if(d!==undefined){this.syncForm(d);
if(d.type==="submit"){this.submitForm.call(this)
}}else{b.log('penname:success listener encountered an empty response. Expected type to be "penName" or "submit"',"info","PenNameOverlay")
}},this);
b.fire("penname:execute",{type:"submit",isAnonymous:this.isPrivate()})
}else{b.log("Not a known submission state. All checks for appropriate submit states have failed.","error",a.NAME)
}}}},this)
},this)
},submitForm:function(){b.Ajax.Form.submit({node:this._form,container:this._rootNode,actionButtons:this._submitBtns})
},syncForm:function(c){if(c.isAnonymous){this.setPrivate(true);
this._anonymousCheckBox.set("checked",true);
if(this._createPenNameLink){this._createPenNameLink.disable()
}this.updatePrivacy()
}else{this.setPrivate(false);
this.setPenName(c.penName);
this.updatePenName();
this._anonymousCheckBox.set("checked",false);
if(this._createPenNameLink){this._createPenNameLink.enable()
}}},hasPenName:function(){if(this._testPenName){return false
}return(b.Lang.isString(this._penName)&&this._penName!=="")
},hasReview:function(){return(this._review&&b.Lang.isString(this._review.body)&&this._review.body!=="")
},requiresPenName:function(){if(!this.isPrivate()&&!this.hasPenName()){return true
}return false
},setSignedIn:function(c){this._isSignedIn=c
},isSignedIn:function(){return this.isSignedIn
},setPrivate:function(c){this._isPrivate=c
},isPrivate:function(){return this._isPrivate
},setPenName:function(c){this._penName=c
},getPenName:function(){return this._penName
},setErrors:function(c){this._errors=c
},getErrors:function(){return this._errors
},setReview:function(c){this._review=c
},getReview:function(){return this._review
}};
b.namespace("Community")["ReviewForm"]=a
});
YUI.add("shared-tooltip",function(a){var c=a.namespace("Shared.Tooltip"),d="displaying",h="right",e="left",f="subright",b="subleft",g="top",i="bottom";
c.Widget=a.Base.create("Tooltip",a.Widget,[],{overlay:null,renderUI:function(){var j=this.get("width")||380;
if(!this.get("n_message")){return
}this.get("n_message").remove(false);
a.one("body").append(this.get("n_message"));
this.setBubbleLocation();
this.overlay=new a.Overlay({srcNode:this.get("n_message"),width:j+"px",zIndex:11000,constrain:false,render:true,visible:false,plugins:[a.Plugin.WidgetAnim]});
this.get("n_message").removeClass("hide");
this.get("n_trigger").addClass("clickable")
},setBubbleLocation:function(){var m=this.get("align")||"auto",j,k,l;
if(m=="auto"){j=this.get("n_trigger").get("winWidth");
k=this.get("n_trigger").getXY()[0];
l=this.get("n_trigger").get("offsetWidth");
this.get("n_message").addClass((k+l/2)<(j/2)?e:h)
}else{this.get("n_message").addClass(m)
}},getAlignPoints:function(){if(this.get("n_message").hasClass(h)){return["br","tr"]
}if(this.get("n_message").hasClass(e)){return["bl","tl"]
}if(this.get("n_message").hasClass(f)){return["tr","br"]
}if(this.get("n_message").hasClass(b)){return["tl","bl"]
}if(this.get("n_message").hasClass(g)){return["tl","tr"]
}if(this.get("n_message").hasClass(i)){return["bl","br"]
}},displayMessage:function(){a.Global.fire("overlay:closeall");
this.overlay.set("align",{node:this.get("n_trigger"),points:this.getAlignPoints()});
this.overlay.show();
this.get("n_trigger").addClass(d)
},hideMessage:function(){this.overlay.hide();
this.get("n_trigger").removeClass(d)
},onMouseover:function(){if(this.get("action")==="hover"){this.displayMessage()
}},bindUI:function(){if(!this.get("n_trigger")){return
}var l=this.get("action")||"click",j=this.get("hideAction")||"blur",k=this;
if(l=="click"){this.get("n_message").on(j,function(m){k.hideMessage();
k._subToKeyEsc
});
this.get("n_trigger").on("click",function(m){m.halt();
if(k.get("n_message").getStyle("visibility")==="visible"){k.hideMessage()
}else{k.displayMessage();
k.get("n_message").focus();
k._subToKeyEsc=k.get("n_message").on("key",function(n){k.hideMessage()
},"down: 27")
}});
a.Global.on("overlay:closeall",function(){k.hideMessage()
})
}else{if(l=="hover"){this.get("n_trigger").on("mouseover",function(){k.onMouseover()
});
this.get("n_trigger").on("mouseout",function(){k.hideMessage()
})
}}},destroy:function(){a.Global.detach("overlay:closeall")
}},{ATTRS:{action:{value:""},hideAction:{value:""},width:{value:""},n_message:{value:""},n_trigger:{value:""},align:{value:"auto"}}});
c.Init=function(j){if(!j.n_trigger){return
}j.n_trigger.once("mouseover",function(l){var k=new c.Widget(j);
k.render();
k.onMouseover()
})
}
});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("shim-plugin",function(b){function a(c){this.init(c);}a.CLASS_NAME="yui-node-shim";a.TEMPLATE='<iframe class="'+a.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>';a.prototype={init:function(c){this._host=c.host;this.initEvents();this.insert();this.sync();},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this);},getShim:function(){return this._shim||(this._shim=b.Node.create(a.TEMPLATE,this._host.get("ownerDocument")));},insert:function(){var c=this._host;this._shim=c.insertBefore(this.getShim(),c.get("firstChild"));},sync:function(){var d=this._shim,c=this._host;if(d){d.setAttrs({width:c.getStyle("width"),height:c.getStyle("height")});}},destroy:function(){var c=this._shim;if(c){c.remove(true);}this._resizeHandle.detach();}};a.NAME="Shim";a.NS="shim";b.namespace("Plugin");b.Plugin.Shim=a;},"3.5.1",{requires:["node-style","node-pluginhost"]});
YUI.add("p13n-preferences",function(a){var b="bn-pref";
a.namespace("P13N")["preferences"]={get:function(c){return a.Cookie.getSub(b,c)
},set:function(c,e,d){return a.Cookie.setSub(b,c,e,a.merge({path:"/"},d))
}}
},"@VERSION",{requires:["cookie"]});
YUI.add("third-party-purchase",function(e){var d="disabled",a="extsite_codes",b="data-extsite-code",f="data-bn-standard-title",c=function(){var g=e.P13N.preferences.get(a),h=(g&&g.indexOf("|"+this.get("srcNode").getAttribute(b)+"|")!==-1);
e.log("Personalized cookie: "+g,"info","ThirdPartyPurchase");
return h
};
e.namespace("ThirdPartyPurchase").LinkPlugin=e.Base.create("LinkPlugin",e.Plugin.Base,[],{initializer:function(g){var h=g.host;
this.set("srcNode",h);
h.on("click",function(j){var k=j.currentTarget,i=!c.call(this);
if(k.hasClass(d)||i){j.preventDefault()
}if(i){this.openOverlay()
}else{e.CoremetricsHelper.CreateElementTag("BUY_NOW_REMEMBERED_CONTINUING",this.get("srcNode").getAttribute(b).toUpperCase())
}e.CoremetricsHelper.CreateElementTag("BUY_NOW",this.get("srcNode").getAttribute(b).toUpperCase())
},this);
h.removeClass(d)
},openOverlay:function(){var g=e.Shared.BNOverlay.getById(this.get("overlayID")),i,h,j;
if(g){g.show()
}i=g.footerNode.one(".confirm");
h=g.bodyNode.one(".product-title");
j=g.footerNode.one(".remember-thirdparty-site-option");
if(i){i.setAttribute("href",this.get("srcNode").getAttribute("href"));
i.on("click",function(){e.CoremetricsHelper.CreateElementTag("OVERLAY_CONTINUE",this.get("srcNode").getAttribute(b).toUpperCase())
},this)
}if(h){h.setContent(this.get("srcNode").getAttribute(f))
}if(j){j.setAttribute(b,this.get("srcNode").getAttribute(b))
}g.bodyNode.get("parentNode").setAttribute(b,this.get("srcNode").getAttribute(b))
}},{NS:"ThirdPartyPurchase",ATTRS:{overlayID:{value:null},srcNode:{value:null}}});
e.namespace("ThirdPartyPurchase").HidePlugin=e.Base.create("HidePlugin",e.Plugin.Base,[],{initializer:function(g){var h=g.host;
this.set("srcNode",h);
h.on("change",function(){this.setDisabledOverlay(h.get("checked"))
},this)
},setDisabledOverlay:function(i){var g=e.P13N.preferences.get(a)||"",h=g,j="|"+this.get("srcNode").getAttribute(b)+"|";
if(i){if(!c.call(this)){h=g+j;
e.CoremetricsHelper.CreateElementTag("OVERLAY_REMEMBER_CHECKED",this.get("srcNode").getAttribute(b).toUpperCase())
}}else{if(h){h.replace(j,"")
}e.CoremetricsHelper.CreateElementTag("OVERLAY_REMEMBER_UNCHECKED",this.get("srcNode").getAttribute(b).toUpperCase())
}if(a!=h){e.P13N.preferences.set(a,h)
}}},{NS:"ThirdPartyPurchase",ATTRS:{srcNode:{value:null}}});
e.namespace("ThirdPartyPurchase").TrackingPlugin=e.Base.create("TrackingPlugin",e.Plugin.Base,[],{initializer:function(g){if(this.get("action")){g.host.on("click",function(i){var h=i.currentTarget.ancestor("["+b+"]");
e.throttle(function(){if(h&&h.getAttribute(b)){e.CoremetricsHelper.CreateElementTag(this.get("action"),h.getAttribute(b).toUpperCase())
}},50)
},this)
}}},{NS:"ThirdPartyPurchase",ATTRS:{action:{value:null}}})
});
YUI.add("enhanced-purchase-options",function(e){var d=e.namespace("Checkout"),c="activated",b={},a=null;
e.once("beforeunload",function(){var f=null;
for(f in b){if(b.hasOwnProperty(f)){cmCreateProductviewTag(f,b[f].title,b[f].storesubject,b[f].exploreAttributes)
}}});
d.Pulldown=e.Base.create("Pulldown",e.Widget,[e.WidgetPosition,e.WidgetPositionAlign,e.WidgetPositionConstrain],{BOUNDING_TEMPLATE:'<div class="buynow-dropdown additionalOptions"></div>',CONTENT_TEMPLATE:null,_hoverCheck:function(f){var j=this.get("boundingBox"),i=this.get("eds").get("parentContainer"),h=function(l){return l===j||l===i
},k=f.currentTarget.ancestor(h,true),g=f.relatedTarget?f.relatedTarget.ancestor(h,true):null;
if(!k||!g){this.hide()
}},_edsChange:function(g){var j=g.newVal,f=j.get("contentContainer"),i=this.get("boundingBox"),h;
if(g.prevVal){g.prevVal.get("parentContainer").detach("mouseleave",this._hoverCheck,this)
}j.get("parentContainer").on("mouseleave",this._hoverCheck,this);
i.setHTML(f.getHTML());
h=i.all(".buynow-thirdparty");
if(h){h.plug(e.ThirdPartyPurchase.LinkPlugin,{overlayID:"buynow-thirdparty-overlay"})
}e.Do.before(function(k){if(k==="parentNode"){return new e.Do.Halt("pretending the pulldown is a child of the contentContainer",f)
}},i,"get");
this.set("align.node",j.get("trigger"))
},_visibleChange:function(f){var i=this.get("boundingBox"),h=this.get("eds").get("parentContainer"),g=f.newVal;
i.toggleClass(c,g);
h.toggleClass(c,g);
if(h.hasClass("use-shim")){if(i.shim){i.unplug(e.Plugin.Shim)
}i.plug(e.Plugin.Shim)
}},bindUI:function(){this.on("edsChange",this._edsChange,this);
this.on("visibleChange",this._visibleChange,this);
this.get("boundingBox").on("mouseleave",this._hoverCheck,this)
}},{ATTRS:{eds:{value:null}}});
a=new d.Pulldown({render:false,constrain:true,visible:false,align:{node:e.one("body"),points:[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL]}});
d.EnhancedDisplayOptions=e.Base.create("EnhancedDisplayOptions",e.Base,[],{_bindProductView:function(h){var g=this.get("trigger"),i=g.getAttribute("data-bn-ean"),f={title:g.getAttribute("data-bn-title"),storesubject:g.getAttribute("data-bn-storesubject"),categoryid:g.getAttribute("data-bn-categoryid"),exploreAttributes:g.getAttribute("data-bn-productexploreattrs")+"-_--_-hover"};
h.preventDefault();
e.log("Logged:\n"+i+":"+f,"info","Checkout.EnhancedDisplayOptions");
e.log('\ncmCreateProductviewTag("'+i+'", "'+f.title+'", "'+f.storesubject+'", "'+f.exploreAttributes+'")',"info","Checkout.EnhancedDisplayOptions");
b[i]=f
},_showPulldown:function(f){f.preventDefault();
if(!a.get("rendered")){a.render(e.one("body"))
}e.all(".display-tile-item").removeClass(c);
a.set("eds",this).show()
},initializer:function(f){f.parentContainer.once("mouseover",this._bindProductView,this);
f.trigger.on("click",this._showPulldown,this)
}},{ATTRS:{trigger:{value:null},contentContainer:{value:null},parentContainer:{value:null}}})
},"@VERSION@",{requires:["base-build","node","widget-base","widget-position","widget-position-align","widget-position-constrain","event-custom","event-hover","lang-dom","shim-plugin","third-party-purchase"]});
YUI.add("launch-popup",function(a){a.namespace("Shared").PopUp=function(c,d,b){if(!d){d="popup"
}window.open(c,d,b)
}
});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("escape",function(c){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},b={html:function(d){return(d+"").replace(/[&<>"'\/`]/g,b._htmlReplacer);},regex:function(d){return(d+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&");},_htmlReplacer:function(d){return a[d];}};b.regexp=b.regex;c.Escape=b;},"3.5.1",{requires:["yui-base"]});
YUI.add("form-expando",function(b){var a=b.Base.create("Expando",b.Widget,[],{_update:function(){var e=this.get("field"),c=this.get("boundingBox"),f,d;
c.setContent(b.Escape.html(e.get("value")).replace(/\n/g,"<br/>").replace(/(?:\s$)|(?:^\s)/g,"&nbsp;")+"<br/>");
f=c.get("offsetHeight");
if(f!==e.get("offsetHeight")){d=new b.Anim({node:e,to:{height:f},duration:0.1});
d.run()
}},renderUI:function(){var f=this.get("field"),c=this.get("boundingBox"),d=["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],e;
for(e=0;
e<d.length;
e++){c.setStyle(d[e],f.getComputedStyle(d[e]))
}},bindUI:function(){this.get("field").on(["keyup","blur","focus"],this._update,this)
},syncUI:function(){var f=this.get("field"),e=f.getComputedStyle("width").replace(/px/,""),d=f.getComputedStyle("height").replace(/px/,""),c=this.get("boundingBox");
if(b.UA.gecko>3){c.setStyles({paddingLeft:1,paddingRight:1});
e=e-2
}c.setStyles({width:e,minHeight:d});
this._update()
},BOUNDING_TEMPLATE:"<div></div>",CONTENT_TEMPLATE:null},{CSS_PREFIX:"expando",ATTRS:{field:{value:null,writeOnce:true},visible:{value:false,readOnly:true}}});
b.namespace("FormToolkit").Expando=b.Base.create("ExpandoPlugin",b.Plugin.Base,[],{initializer:function(c){c.host.setStyle("overflow","hidden");
var d=new a({field:c.host,render:false});
c.host.on("focus",function(){if(!d.get("rendered")){d.render()
}})
}},{NS:"expando",ATTRS:{}})
},"@VERSION@",{requires:["base-build","node","widget-base","plugin","anim-base","escape","form-expando-css"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-node-plugin",function(b){var a=function(c){c=(c)?b.merge(c):{};c.node=c.host;a.superclass.constructor.apply(this,arguments);};a.NAME="nodefx";a.NS="fx";b.extend(a,b.Anim);b.namespace("Plugin");b.Plugin.NodeFX=a;},"3.5.1",{requires:["node-pluginhost","anim-base"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-curve",function(a){a.Anim.behaviors.curve={set:function(f,c,i,h,b,g,e){i=i.slice.call(i);h=h.slice.call(h);var d=e(b,0,100,g)/100;h.unshift(i);f._node.setXY(a.Anim.getBezier(h,d));},get:function(c,b){return c._node.getXY();}};a.Anim.getBezier=function(f,e){var g=f.length;var d=[];for(var c=0;c<g;++c){d[c]=[f[c][0],f[c][1]];}for(var b=1;b<g;++b){for(c=0;c<g-b;++c){d[c][0]=(1-e)*d[c][0]+e*d[parseInt(c+1,10)][0];d[c][1]=(1-e)*d[c][1]+e*d[parseInt(c+1,10)][1];}}return[d[0][0],d[0][1]];};},"3.5.1",{requires:["anim-xy"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-color",function(b){var a=Number;b.Anim.behaviors.color={set:function(f,d,i,h,c,g,e){i=b.Color.re_RGB.exec(b.Color.toRGB(i));h=b.Color.re_RGB.exec(b.Color.toRGB(h));if(!i||i.length<3||!h||h.length<3){b.error("invalid from or to passed to color behavior");}f._node.setStyle(d,"rgb("+[Math.floor(e(c,a(i[1]),a(h[1])-a(i[1]),g)),Math.floor(e(c,a(i[2]),a(h[2])-a(i[2]),g)),Math.floor(e(c,a(i[3]),a(h[3])-a(i[3]),g))].join(", ")+")");},get:function(d,c){var e=d._node.getComputedStyle(c);e=(e==="transparent")?"rgb(255, 255, 255)":e;return e;}};b.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(c,d){b.Anim.behaviors[c]=b.Anim.behaviors.color;});},"3.5.1",{requires:["anim-base"]});
YUI.add("scroll-to",function(a){a.namespace("ScrollTo").Value=function(d,b){b=b||{};
var c=new a.Anim({node:a.one(window),duration:b.duration||0.5,easing:b.easing||a.Easing.easeOutCubic,to:{scroll:[0,d-(b.padding||10)]}});
c.run()
};
a.namespace("ScrollTo").Node=function(c,b){if(typeof c==="string"){c=a.one(c)
}if(!c){return
}a.ScrollTo.Value(c.getXY()[1],b)
}
});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("querystring-parse",function(e){var b=e.namespace("QueryString"),d=function(f){return function g(l,n){var h,m,k,j,i;if(arguments.length!==2){l=l.split(f);return g(b.unescape(l.shift()),b.unescape(l.join(f)));}l=l.replace(/^\s+|\s+$/g,"");if(e.Lang.isString(n)){n=n.replace(/^\s+|\s+$/g,"");if(!isNaN(n)){m=+n;if(n===m.toString(10)){n=m;}}}h=/(.*)\[([^\]]*)\]$/.exec(l);if(!h){i={};if(l){i[l]=n;}return i;}j=h[2];k=h[1];if(!j){return g(k,[n]);}i={};i[j]=n;return g(k,i);};},c=function(g,f){return((!g)?f:(e.Lang.isArray(g))?g.concat(f):(!e.Lang.isObject(g)||!e.Lang.isObject(f))?[g].concat(f):a(g,f));},a=function(h,f){for(var g in f){if(g&&f.hasOwnProperty(g)){h[g]=c(h[g],f[g]);}}return h;};b.parse=function(g,h,f){return e.Array.reduce(e.Array.map(g.split(h||"&"),d(f||"=")),{},c);};b.unescape=function(f){return decodeURIComponent(f.replace(/\+/g," "));};},"3.5.1",{requires:["array-extras","yui-base"],supersedes:["querystring-parse-simple"]});
/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("querystring-parse-simple",function(b){var a=b.namespace("QueryString");a.parse=function(e,g,d){g=g||"&";d=d||"=";for(var k={},h=0,j=e.split(g),f=j.length,c;h<f;h++){c=j[h].split(d);if(c.length>0){k[a.unescape(c.shift())]=a.unescape(c.join(d));}}return k;};a.unescape=function(c){return decodeURIComponent(c.replace(/\+/g," "));};},"3.5.1",{requires:["yui-base"]});
YUI.add("analytics-coremetrics",function(a){var b=function(c){this._name="CoremetricsProvider";
this.constructor.superclass.constructor.apply(this,arguments);
this.CMINIT="cminit:complete";
this.PAGEVIEW="cmpageview:complete";
this._methodSignatures={cmCreatePageviewTag:["pageId","categoryId","searchString","searchResults","attributes","extraFields"],cmSetClientID:["clientId","firstPartyCM","dataCollectionDomain","cookieDomain","autoLoad"]};
this._timeoutId=undefined;
this._delimiter="-_-";
this._subDelimiter="_";
this._tagModes={1:"cm_sp",2:"cm_re"};
this._cfg=a.merge({cmClientId:"THIS_VALUE_MUST_BE_SET_VIA_GRIFFIN",cmIsLoadedIndicatorFunc:"cmExecuteTagQueue",apijsLoadTimeout:10000,firstPartyCM:true,dataCollectionDomain:"THIS_VALUE_MUST_BE_SET_VIA_GRIFFIN",cookieDomain:"barnesandnoble.com",autoLoad:undefined,lazyLoadDelay:800,pollingInterval:500},c);
this._isLoaded=false;
var d=this;
a.publish(this.CMINIT,{broadcast:2,fireOnce:true});
a.publish(this.PAGEVIEW,{broadcast:2,fireOnce:true});
d._initClientId()
};
a.extend(b,a.Analytics.Provider.BaseProvider,{init:function(){},flushBuffer:function(f){var e=this,d=this._buffers[f].getBuffer(),c;
a.log("flushBuffer Number of events to flush: "+(d.length||1),"info",e._name);
while(d.length>0){c=d.pop();
switch(c.eventId){case"PAGE":e._trackABElementView(c);
e._trackPage(c);
break;
case"ASYNC":break;
case"ELEMENTVIEW":break;
default:e._trackEvent(c.eventObj);
break
}}},_trackABElementView:function(c){var d=this;
this.on(this.PAGEVIEW,function(g){var f=d.getTracker().getPage().testCell;
if(f!==""){window.cmCreateElementTag.call(null,f)
}})
},_trackEvent:function(c){if(c){a.log("flushBuffer() Flushing event: "+c,"info",this._name);
var d=(c.isPageAware)?1:2;
this._tag.call(this,c.eventData.concat([]),d,c.eventObj)
}},_trackPage:function(){var d=this.getTracker().getPage();
if(b.IS_TRACKED){a.log("trackPage() Page has already been tracked; Skipping page track.","info",this._name);
return
}var c=this;
a.log("trackPage() Tracking page: "+d,"info",this._name);
this._currentPage=d;
a.on(this.CMINIT,function(){a.log("trackPage() Tracking page: "+c._currentPage,"info",c._name);
c._tagPageView.call(c);
b.IS_TRACKED=true;
c.fire(c.PAGEVIEW)
})
},_mapPgToPageviewTag:function(f){var e=f||this._tracker.getPage();
e.parameters=e.parameters||{};
function c(){var g="";
if(e.categoryId){g=e.categoryId
}else{if(e.parameters.extendedStoreSubject){g=e.parameters.extendedStoreSubject
}else{if(e.pageSubCategory){g=e.pageSubCategory
}else{g=e.parameters.searchOption||"";
g+=e.parameters.searchOption&&e.pageName?": ":"";
g+=e.pageName||""
}}}return g
}function d(){var h=e.pageId,g;
if(!h&&e.pageType){g=String(e.pageType);
if(g.indexOf("product.sample.")===0){h=e.categoryId+">EAN="+e.parameters.ean
}else{if(g.indexOf("product.")===0){h="PRODUCT:"+e.parameters.title+"("+e.parameters.ean+")"
}else{if(g.indexOf("search.")===0){h="Page ";
h+=e.parameters.paginationPage||"0";
if(String(e.pageType).indexOf(".contributor")!=-1){h="Contributor "+h
}}else{h=e.pageType
}}}}return h
}return{pageId:d(),categoryId:c(),searchString:e.parameters.searchTerm,searchResults:e.parameters.numOfResults,extraFields:[e.userId,"",e.siteId,e.isRecognized,e.testCell,e.appVersion]}
},_tagPageView:function(f){var d=this._objToFuncParams(this._mapPgToPageviewTag(),"cmCreatePageviewTag"),e=f||false,c=window.cmCreatePageviewTag;
if(e){return d
}c.apply(null,d)
},_tag:function(o,i,k){var f;
var j=this._tracker.getPage();
var n=(i==1||i==2)?this._tagModes[i]:this._tagModes["1"];
var h=k.currentTarget;
var d=j.pageType.split(".");
var l=d.pop();
var g=j.pageName||l;
var c;
if(i==1||!i){if(o[0]!="Global_Nav"&&o[0]!="Footer"){o[0]=g+"_"+o[0]
}}f=this._delimitEvent(o);
f=encodeURI(f);
try{c=h?h.getAttribute("href"):""
}catch(m){c=""
}c=this._mixQuerystring(c,n+"="+f);
this._tagMan(c)
},_tagMan:function(c){var d=window.cmCreateManualLinkClickTag;
if(typeof d!=="function"){a.log("_tagMan Failed","warn",this._name);
return
}d(c)
},_initClientId:function(g){var d=this;
var f,e,c;
a.log("_initClientId() Initialize clientID","info",d._name);
f={clientId:d._cfg.cmClientId,firstPartyCM:true,dataCollectionDomain:d._cfg.dataCollectionDomain,cookieDomain:d._cfg.cookieDomain,autoLoad:undefined};
e=d._objToFuncParams(f,"cmSetClientID");
c=window.cmSetClientID.apply(null,e);
a.Get.script("//libs.coremetrics.com/configs/"+c+".js",{onEnd:function(){a.fire(d.CMINIT)
}})
},_delimitEvent:function(c){var f=this._delimiter;
var e=this._subDelimiter;
var d="";
while(c.length<3){c.push("NA")
}d=c.slice(0,3).join(f);
if(c.length>3){d+=e+c.slice(3).join(e)
}return d
},_delimit:function(c){var d=this._delimiter;
return c.join(d)
},_objToFuncParams:function(j,h){var l,g,f,e,d,c;
l=this._methodSignatures[h];
g=[];
for(f=0,c=l.length;
f<c;
f++){e=l[f];
d=j[e];
if(d instanceof Array){d=this._delimit(d)
}g.push(d)
}return g
},isEluminateLoaded:function(){var c=this._cfg.cmIsLoadedIndicatorFunc;
return(typeof window[c]!=="undefined")
},_mixQuerystring:function(d,j){var c=this,i=c._parseUri(d),g=a.QueryString.parse(i.query),e=a.QueryString.parse(j),f="";
if(c._isEmpty(e)){f=d
}else{if(c._isEmpty(g)){f=d+"?"+j
}else{f=d+"&"+j
}}return f+((i.hash)?"#"+i.hash:"")
},_isEmpty:function(c){var d=null;
for(d in c){if(c.hasOwnProperty(d)){return false
}}return true
},_parseUri:function(g){var f={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c=f.parser[f.strictMode?"strict":"loose"].exec(g),e={},d=14;
while(d--){e[f.key[d]]=c[d]||""
}e[f.q.name]={};
e[f.key[12]].replace(f.q.parser,function(i,h,j){if(h){e[f.q.name][h]=j
}});
return e
}},{IS_TRACKED:false,IS_LOADING:false});
a.augment(b,a.EventTarget);
a.Analytics.Provider.CoremetricsProvider=b
},"@VERSION@",{requires:["base","analytics","analytics-model","buffer-delayed","querystring","event-custom"]});
YUI.add("shared-menu-item",function(b){var a="MenuItem";
b.namespace("Shared")[a]=b.Base.create(a,b.Widget,[],{renderUI:function(){var c;
this.get("n_content").remove(false);
b.one("body").append(this.get("n_content"));
this.overlay=new b.Overlay({srcNode:this.get("n_content"),zIndex:9000,constrain:false,render:true,visible:false,plugins:[b.Plugin.WidgetAnim]});
this.publish("opened",{emitFacade:true,broadcast:2});
this.publish("closed",{emitFacade:true,broadcast:2});
this.get("n_content").removeClass("hide");
c=this.get("n_content").one(".line");
if(c){c.setStyle("width",c.getComputedStyle("width"));
c.remove(false);
this.get("n_content").append(c)
}},displayMenu:function(){b.Global.fire("overlay:closeall");
this.overlay.set("align",{node:this.get("n_trigger"),points:["tl","tl"]});
this.overlay.show();
this.get("n_trigger").fire("opened")
},hideMenu:function(){this.overlay.hide();
this.get("n_trigger").fire("closed")
},onMouseover:function(){this.displayMenu()
},bindUI:function(){var c=this;
this.get("n_trigger").on("mouseover",function(){c.onMouseover()
});
this.get("n_content").on("mouseover",function(){clearTimeout(c.timer)
});
this.get("n_content").on("mouseout",function(){c.timer=setTimeout(function(){c.hideMenu()
},100)
});
b.Global.on("overlay:closeall",function(){c.hideMenu()
});
b.one("window").on("windowresize",function(){this.overlay.set("align",{node:this.get("n_trigger"),points:["tl","tl"]})
},this)
},destroy:function(){b.Global.detach("overlay:closeall")
}},{ATTRS:{n_content:{value:""},n_trigger:{value:""}}})
});
YUI.add("add-to-list",function(a){a.namespace("Plugin").AddToList=a.Base.create("AddToList",a.Plugin.Base,[],{initializer:function(b){this.set("boundingBox",b.host)
},add:function(){var c=this,b={method:"POST",on:{complete:function(h,f){var d;
try{d=a.JSON.parse(f.responseText)
}catch(g){}if(d){if(f.status==200&&d.status.success){if(c.get("success")){c.get("success").call()
}}else{if(c.get("failure")){c.get("failure").call(d)
}}}else{if(c.get("failure")){c.get("failure").call(d)
}}}},data:{ean:this.get("ean"),listId:this.get("id")}};
a.io(this.get("url"),b)
},newList:function(){var c=this,e=this.get("boundingBox"),d=e.getAttribute("action"),b={method:"POST",form:{id:e,useDisabled:true},on:{complete:function(i,g){var f;
try{f=a.JSON.parse(g.responseText)
}catch(h){}if(f){if(g.status==200&&f.status.success){c.get("success").call()
}else{c.get("failure").call(f)
}}else{c.get("failure").call()
}}}};
a.io(d,b)
}},{NS:"addToList",ATTRS:{url:{value:""},ean:{value:""},id:{value:""},success:{value:""},failure:{value:""}}})
});
YUI.add("report-this-review",function(d){var l,h="",i="",k="We're sorry, we are experiencing technical difficulties at this time. Please try again in a few hours.",p="Thank you, this review has been flagged.",b='<div class="shadowed-header"><div class="shadow-bar-header milo overlayHead">Why do you want to flag this review?</div><div class="shadow-bar"><span class="fade-right"></span></div></div>',f=null,m=null;
var a=function(o){d.all(".report-this-review.reviewId-"+o+" .submitted").setStyle("display","inline");
d.all(".report-this-review.reviewId-"+o+" .default").setStyle("display","none");
return true
};
var r;
var c=function(){var o;
if(m){o=m.one("form");
if(o){o.on("submit",function(t){t.preventDefault();
r(this,l,m)
})
}}};
var q=function(o,t){if(l===undefined){d.one("body").append('<div id="report-this-review"></div>');
m=d.one("#report-this-review");
m.addClass("report-this-review");
l=new d.Shared.BNOverlay({srcNode:m,visible:true,width:510});
l.setStdModContent("body",o,"replace");
l.setStdModContent("header",t||b,"replace");
c();
m.plug(d.StyledInputs.Plugin.Form)
}else{l.setStdModContent("body",o,"replace");
l.setStdModContent("header",t||b,"replace");
l.show();
c();
m.unplug(d.StyledInputs.Plugin.Form);
m.plug(d.StyledInputs.Plugin.Form)
}d.all(".close").on("click",function(u){u.preventDefault();
l.hide();
if(f){f.release();
f=null
}})
};
var j=function(o){if(o[0]=="/"){o=window.location.protocol+"//"+window.location.host+o
}location.href=o
};
var s=function(){q("<div class='yui3-widget-hd'><a href='#' class='close'></a></div><div class='yui3-widget-bd'>"+k+"</div>")
};
var g=function(t,o){q(o.responseText)
};
var n=function(t){var o={method:"POST",data:{reviewid:i,useDisabled:true},headers:{Accept:"application/json,text/html"},on:{success:g,failure:s}};
d.io(t,o)
};
var e=function(o){d.use("cookie",function(u){var t=new Date();
t.setFullYear(t.getFullYear()+1);
u.Cookie.setSub("wasFlagged",o,"1",{expires:t})
});
return
};
r=function(v,t,w){var o=v.getAttribute("action");
var u=v.one('[name="flag_reason"]:checked').get("value");
d.io(o,{method:"POST",data:{reviewid:i,option:u},on:{start:function(y,x){},success:function(A,z,x){var y=d.JSON.parse(z.responseText);
if(y.reviewreport&&(y.reviewreport.success===true||y.reviewreport.success==="true")){t.setContent(p);
w.setStyle("padding-top","12px").one(".yui3-widget-bd").setContent(p);
a(i);
e(i)
}else{w.one("#statusBox").setContent(k)
}},failure:function(z,y,x){w.one("#statusBox").setContent(k)
}}});
return
};
d.namespace("Reviews").ReportThisReview=function(o,u,t){i=o;
h=u;
if(t){f=t;
f.acquire()
}n(h)
}
},"@VERSION@",{requires:["io-base","io-form","querystring-stringify-simple","styled-inputs","json-parse","bn-overlay"]});
YUI.add("coremetrics-helper",function(c){var a="not available",b=["ean","title","workid","extendedstoresubject"];
c.namespace("CoremetricsHelper");
c.CoremetricsHelper.Productview=function(){var f=c.Array(arguments,0,true),e={store:"0001",workid:a,title:a},d,l,k,g,h,j;
if(f[0] instanceof c.Node){j=f[0];
for(g=0,h=b.length;
g<h;
g++){e[b[g]]=j.getAttribute("data-cm-"+b[g])
}if(c.Lang.isObject(f[1])){e=c.mix(f[1],e)
}}else{if(c.Lang.isObject(f[0])){e=c.mix(f[0],e)
}else{throw new Error("argument mismatch")
}}if(!e.ean||!e.extendedstoresubject){throw new Error("ean or extendedstoresubject are required")
}d=e.extendedstoresubject.split("-");
k=[d[0],d[1]];
k.push(d[2]||a);
k.push(e.workid);
k.unshift(e.store);
l=k.join("-_-");
c.on("cminit:complete",function(){window.cmCreateProductviewTag(e.ean,e.title,e.extendedstoresubject,l);
c.log("Productview for "+e.title+" ("+e.ean+")","info","CoremetricsHelper")
})
};
c.CoremetricsHelper.CreateElementTag=function(e,d,f){c.on("cminit:complete",function(){window.cmCreateElementTag(e,d,f);
c.log("CreateElementTag: "+[e,d,f].join(", "),"info","CoremetricsHelper")
})
}
},"@VERSION@",{requires:["node","yui-log"]});
YUI.add("analytics-visualization",function(b){var a=function(c){this._name="VisualizationTool";
this._cfg=b.merge({prettyFormatCfg:[{pattern:/(\"[a-zA-Z0-9\-\_\#\?\+\=]+\")/g,color:"green"}]},c);
this._toggleState=0;
this._tracker=b.Analytics.Tracker.getInstance();
b.on("analytics:dependenciesloaded",this._init,this);
this._loadDependencies()
};
a.prototype={_loadDependencies:function(){b.Get.css("/resources/css/widgets/analytics/visualization-tool.css",{onSuccess:function(){b.one("body").append(b.Node.create(a.tpl.panel));
b.fire("analytics:dependenciesloaded")
}})
},_init:function(){this._addTooltip();
this._initLinkTracking();
this._initPageTracking()
},_initPageTracking:function(){var e=this,g=["open","close"],d=b.one("#pageTracking_Popup"),c=b.one("#pageTracking_Toggle",d),i=b.one("#pageTracking_Data",d),h=b.one("#pageTracking_ToggleText",c),f=b.one("#pageTracking_ToggleIcon",c);
this._onPageTracked(function(j){i.setContent(e._prettyColor(j))
});
c.on("click",function(j){d.removeClass("nerv-init");
d.toggleClass("nerv-open");
f.toggleClass("nerv-open");
e._toggleState=Number(!e._toggleState);
h.setContent(g[e._toggleState])
})
},_initLinkTracking:function(){var c=this,d=null,e=null;
b.all("a[data-bntrack]").each(function(h){var l=c._getLinkTrackingData(h),i=l.json,g=l.nodes,j=b.one(g.pop()),f=b.Node.create('<div class="nerv-tracked-link-wrapper"></div>'),m=20,k=-20,n,o;
h.setData("rootNode",j);
h.addClass("nerv-tracked-link");
f.append(h.replace(f));
n=function(p){if(p.relatedTarget&&!p.relatedTarget.hasClass("nerv-arrow")&&!p.relatedTarget.hasClass("nerv-tracked-link")){c.tooltip.removeClass("nerv-tooltip-open");
c.tooltip.setAttribute("style","left:-4000px;")
}};
o=function(p){var q;
e=p.currentTarget;
clearTimeout(d);
p.stopPropagation();
setTimeout(function(){q=p.currentTarget.get("region");
clearTimeout(d);
c.tooltip.addClass("nerv-tooltip-open");
c.tooltipContent.setContent(i);
c.tooltip.setXY([q.right+m,q.bottom+k])
},300)
};
h.on("hover",o,n);
f.on("hover",o,n);
c.tooltip.on("hover",o,n)
})
},_addTooltip:function(){var e=b.Node.create('<div class="nerv-arrow nerv-border"></div><div class="nerv-arrow nerv-bg"></div>'),c=b.Node.create('<div id="linkTracking_content"></div>'),d=b.Node.create('<div class="nerv-tooltip nerv-tooltip-open"></div>');
d.append(e);
d.append(c);
b.one("body").append(d);
this.tooltip=d;
this.tooltipContent=c
},_prettyColor:function(h){var g=h,j=null,c="",d=this._cfg.prettyFormatCfg,f=0,e=d.length,k;
k=function(l,i){var m=b.substitute(a.tpl.prettywrapper,{color:c,text:i});
return m
};
while(f<e){j=d[f].pattern;
c=d[f].color;
g=g.replace(j,k);
f++
}return g
},_getLinkTrackingData:function(f){var h,g,c,e,i,d;
g=+new Date();
c=this._tracker._createEventObj(this._tracker.find(f,true));
d=c.nodes;
e=f.getAttribute("href");
h=c.eventData.pop();
c=b.merge(c,{timestamp:g,href:e,target:h});
c.eventData=c.eventData.join(",");
delete c.nodes;
i=b.JSON.stringify(c,null,4);
i=i.replace(/\"eventData\":(.*)/,function(l,k,j){var m=k.split(",");
m.pop();
return'"eventData": ['+m.join('","')+"]"
});
i=this._prettyColor(i);
return{json:i,nodes:d}
},_onPageTracked:function(c){var e=this._tracker.getProvider("InternalProvider"),d=this,f=null;
e.on(b.Analytics.Provider.InternalProvider.PAGE_TRACKED,function(){f=e.getPageTracked();
f=b.JSON.stringify(f,null,4);
c.call(d,f)
})
}};
a.tpl={panel:'<header class="nerv-pagepopup nerv-init" id="pageTracking_Popup">  <div class="nerv-content"><div class="nerv-padding" id="pageTracking_Data"></div></div>  <div class="nerv-toggle"><div href="#open-close%20Page" id="pageTracking_Toggle" class="nerv-toggle"><span id="pageTracking_ToggleIcon" class="nerv-toggle-vert-arrow"></span><span id="pageTracking_ToggleText">open</span> page tracking panel</div></div></header>',prettywrapper:'<span style="color:{color}">{text}</span>'};
a.init=function(){return new a()
};
b.namespace("Analytics.VisualizationTool");
b.Analytics.VisualizationTool=a
},"@VERSION@",{requires:["event-custom","event-hover","analytics-internaltracking","get","substitute","node"]});
